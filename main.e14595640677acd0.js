"use strict";(self.webpackChunkfirebase=self.webpackChunkfirebase||[]).push([[179],{217:($i,Bn,Ue)=>{Ue.d(Bn,{$:()=>Jg,A:()=>le,G:()=>Tt,K:()=>OI,L:()=>ra,N:()=>Jr,P:()=>Jc,R:()=>wm,U:()=>Ae,V:()=>_h,W:()=>Oc,X:()=>xi,Y:()=>Qi,Z:()=>Xr,_:()=>aa,a:()=>eo,a0:()=>Ih,a1:()=>Uc,a2:()=>Dh,a3:()=>nm,a4:()=>UI,a5:()=>rr,a6:()=>ca,a7:()=>rm,a8:()=>pu,a9:()=>BI,aA:()=>it,aB:()=>xt,aC:()=>ae,aD:()=>no,aE:()=>Y,aF:()=>He,aG:()=>Tu,aH:()=>Am,aI:()=>ya,aJ:()=>cn,aN:()=>Sn,aQ:()=>mo,aa:()=>ve,ab:()=>Jt,ac:()=>Ni,ad:()=>gr,ae:()=>la,af:()=>Ke,ag:()=>im,ah:()=>An,ak:()=>gu,al:()=>$o,am:()=>_o,ap:()=>Xg,aq:()=>_u,as:()=>MA,at:()=>FA,au:()=>Wt,av:()=>we,aw:()=>L,ax:()=>ut,ay:()=>Ia,az:()=>Mm,b:()=>$I,c:()=>zo,d:()=>Dm,e:()=>tE,f:()=>rE,g:()=>sr,h:()=>Et,i:()=>Kc,j:()=>to,k:()=>jm,l:()=>JI,m:()=>gE,o:()=>WA,p:()=>zt,r:()=>XI,s:()=>Cm,u:()=>qt});var D=Ue(861),K=Ue(58),F=Ue(534),Me=Ue(879),bt=Ue(582),rn=Ue(537);const zt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},le={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Tt=function Re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},jn=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new Me.Yd("@firebase/auth");function on(f,...c){Ge.logLevel<=Me.in.ERROR&&Ge.error(`Auth (${F.SDK_VERSION}): ${f}`,...c)}function ut(f,...c){throw tt(f,...c)}function xt(f,...c){return tt(f,...c)}function zr(f,c,d){const p=Object.assign(Object.assign({},jn()),{[c]:d});return new K.LL("auth","Firebase",p).create(c,{appName:f.name})}function Mn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&ut(f,"argument-error"),zr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tt(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return ht.create(f,...c)}function ae(f,c,...d){if(!f)throw tt(c,...d)}function gt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw on(c),new Error(c)}function Wt(f,c){f||gt(c)}function _n(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Cn(){return"http:"===Di()||"https:"===Di()}function Di(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class qr{constructor(c,d){this.shortDelay=c,this.longDelay=d,Wt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function Ai(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Cn()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hi(f,c){Wt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class H{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const q={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},W=new qr(3e4,6e4);function j(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function ne(f,c,d,p){return te.apply(this,arguments)}function te(){return(te=(0,D.Z)(function*(f,c,d,p,_={}){return ge(f,_,(0,D.Z)(function*(){let C={},O={};p&&("GET"===c?O=p:C={body:JSON.stringify(p)});const $=(0,K.xO)(Object.assign({key:f.config.apiKey},O)).slice(1),oe=yield f._getAdditionalHeaders();return oe["Content-Type"]="application/json",f.languageCode&&(oe["X-Firebase-Locale"]=f.languageCode),H.fetch()(yt(f,f.config.apiHost,d,$),Object.assign({method:c,headers:oe,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function ge(f,c,d){return at.apply(this,arguments)}function at(){return(at=(0,D.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},q),c);try{const _=new Lt(f),C=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const O=yield C.json();if("needConfirmation"in O)throw sn(f,"account-exists-with-different-credential",O);if(C.ok&&!("errorMessage"in O))return O;{const $=C.ok?O.errorMessage:O.error.message,[oe,Ce]=$.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===oe)throw sn(f,"credential-already-in-use",O);if("EMAIL_EXISTS"===oe)throw sn(f,"email-already-in-use",O);if("USER_DISABLED"===oe)throw sn(f,"user-disabled",O);const Ve=p[oe]||oe.toLowerCase().replace(/[_\s]+/g,"-");if(Ce)throw zr(f,Ve,Ce);ut(f,Ve)}}catch(_){if(_ instanceof K.ZR)throw _;ut(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function Ee(f,c,d,p){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,D.Z)(function*(f,c,d,p,_={}){const C=yield ne(f,c,d,p,_);return"mfaPendingCredential"in C&&ut(f,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function yt(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Hi(f.config,_):`${f.config.apiScheme}://${_}`}function Qt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(xt(this.auth,"network-request-failed")),W.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sn(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=xt(f,c,p);return _.customData._tokenResponse=d,_}function Hn(f){return void 0!==f&&void 0!==f.getResponse}function zn(f){return void 0!==f&&void 0!==f.enterprise}class tr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Qt(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Si(){return(Si=(0,D.Z)(function*(f){return(yield ne(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zi(f,c){return vt.apply(this,arguments)}function vt(){return(vt=(0,D.Z)(function*(f,c){return ne(f,"GET","/v2/recaptchaConfig",j(f,c))})).apply(this,arguments)}function Gi(){return(Gi=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Pi(){return(Pi=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Gr(){return(Gr=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Wr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Nt(){return(Nt=(0,D.Z)(function*(f,c=!1){const d=(0,K.m9)(f),p=yield d.getIdToken(c),_=bn(p);ae(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const C="object"==typeof _.firebase?_.firebase:void 0,O=C?.sign_in_provider;return{claims:_,token:p,authTime:Wr(Kr(_.auth_time)),issuedAtTime:Wr(Kr(_.iat)),expirationTime:Wr(Kr(_.exp)),signInProvider:O||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function Kr(f){return 1e3*Number(f)}function bn(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return on("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,K.tV)(d);return _?JSON.parse(_):(on("Failed to decode base64 JWT payload"),null)}catch(_){return on("Caught error parsing JWT payload as JSON",_?.toString()),null}}function an(f,c){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,D.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof K.ZR&&function Wi({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class Zi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,D.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,D.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class Mi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qn(f){return xn.apply(this,arguments)}function xn(){return xn=(0,D.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield an(f,function dr(f,c){return Gr.apply(this,arguments)}(d,{idToken:p}));ae(_?.users.length,d,"internal-error");const C=_.users[0];f._notifyReloadListener(C);const O=null!==(c=C.providerUserInfo)&&void 0!==c&&c.length?function ko(f){return f.map(c=>{var{providerId:d}=c,p=(0,bt._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(C.providerUserInfo):[],$=function na(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,O),Ve=!!f.isAnonymous&&!(f.email&&C.passwordHash||$?.length),pt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:$,metadata:new Mi(C.createdAt,C.lastLoginAt),isAnonymous:Ve};Object.assign(f,pt)}),xn.apply(this,arguments)}function Qr(){return(Qr=(0,D.Z)(function*(f){const c=(0,K.m9)(f);yield qn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Ki(){return(Ki=(0,D.Z)(function*(f,c){const d=yield ge(f,{},(0,D.Z)(function*(){const p=(0,K.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:C}=f.config,O=yt(f,_,"/v1/token",`key=${C}`),$=yield f._getAdditionalHeaders();return $["Content-Type"]="application/x-www-form-urlencoded",H.fetch()(O,{method:"POST",headers:$,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function S(){return(S=(0,D.Z)(function*(f,c){return ne(f,"POST","/v2/accounts:revokeToken",j(f,c))})).apply(this,arguments)}class w{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ae(c.idToken,"internal-error"),ae(typeof c.idToken<"u","internal-error"),ae(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function cu(f){const c=bn(f);return ae(c,"internal-error"),ae(typeof c.exp<"u","internal-error"),ae(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,D.Z)(function*(){return ae(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,D.Z)(function*(){const{accessToken:_,refreshToken:C,expiresIn:O}=yield function ps(f,c){return Ki.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,C,Number(O))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:C}=d,O=new w;return p&&(ae("string"==typeof p,"internal-error",{appName:c}),O.refreshToken=p),_&&(ae("string"==typeof _,"internal-error",{appName:c}),O.accessToken=_),C&&(ae("number"==typeof C,"internal-error",{appName:c}),O.expirationTime=C),O}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new w,this.toJSON())}_performRefresh(){return gt("not implemented")}}function b(f,c){ae("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class I{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,C=(0,bt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new Mi(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,D.Z)(function*(){const p=yield an(d,d.stsTokenManager.getToken(d.auth,c));return ae(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function nr(f){return Nt.apply(this,arguments)}(this,c)}reload(){return function hr(f){return Qr.apply(this,arguments)}(this)}_assign(c){this!==c&&(ae(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new I(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,D.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield qn(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,D.Z)(function*(){const d=yield c.getIdToken();return yield an(c,function qi(f,c){return Gi.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,C,O,$,oe,Ce,Ve;const pt=null!==(p=d.displayName)&&void 0!==p?p:void 0,Dr=null!==(_=d.email)&&void 0!==_?_:void 0,Io=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,Pu=null!==(O=d.photoURL)&&void 0!==O?O:void 0,Hm=null!==($=d.tenantId)&&void 0!==$?$:void 0,Ca=null!==(oe=d._redirectEventId)&&void 0!==oe?oe:void 0,Go=null!==(Ce=d.createdAt)&&void 0!==Ce?Ce:void 0,zm=null!==(Ve=d.lastLoginAt)&&void 0!==Ve?Ve:void 0,{uid:dl,emailVerified:rf,isAnonymous:ba,providerData:sf,stsTokenManager:_r}=d;ae(dl&&_r,c,"internal-error");const vE=w.fromJSON(this.name,_r);ae("string"==typeof dl,c,"internal-error"),b(pt,c.name),b(Dr,c.name),ae("boolean"==typeof rf,c,"internal-error"),ae("boolean"==typeof ba,c,"internal-error"),b(Io,c.name),b(Pu,c.name),b(Hm,c.name),b(Ca,c.name),b(Go,c.name),b(zm,c.name);const Gn=new I({uid:dl,auth:c,email:Dr,emailVerified:rf,displayName:pt,isAnonymous:ba,photoURL:Pu,phoneNumber:Io,tenantId:Hm,stsTokenManager:vE,createdAt:Go,lastLoginAt:zm});return sf&&Array.isArray(sf)&&(Gn.providerData=sf.map(af=>Object.assign({},af))),Ca&&(Gn._redirectEventId=Ca),Gn}static _fromIdTokenResponse(c,d,p=!1){return(0,D.Z)(function*(){const _=new w;_.updateFromServerResponse(d);const C=new I({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield qn(C),C})()}}const P=new Map;function Y(f){Wt(f instanceof Function,"Expected a class definition");let c=P.get(f);return c?(Wt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,P.set(f,c),c)}const Ae=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,D.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,D.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,D.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function He(f,c,d){return`firebase:${f}:${c}:${d}`}class It{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:C}=this.auth;this.fullUserKey=He(this.userKey,_.apiKey,C),this.fullPersistenceKey=He("persistence",_.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,D.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?I._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,D.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,D.Z)(function*(){if(!d.length)return new It(Y(Ae),c,p);const _=(yield Promise.all(d.map(function(){var Ce=(0,D.Z)(function*(Ve){if(yield Ve._isAvailable())return Ve});return function(Ve){return Ce.apply(this,arguments)}}()))).filter(Ce=>Ce);let C=_[0]||Y(Ae);const O=He(p,c.config.apiKey,c.name);let $=null;for(const Ce of d)try{const Ve=yield Ce._get(O);if(Ve){const pt=I._fromJSON(c,Ve);Ce!==C&&($=pt),C=Ce;break}}catch{}const oe=_.filter(Ce=>Ce._shouldAllowMigration);return C._shouldAllowMigration&&oe.length?(C=oe[0],$&&(yield C._set(O,$.toJSON())),yield Promise.all(d.map(function(){var Ce=(0,D.Z)(function*(Ve){if(Ve!==C)try{yield Ve._remove(O)}catch{}});return function(Ve){return Ce.apply(this,arguments)}}())),new It(C,c,p)):new It(C,c,p)})()}}function ye(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(gs(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Ft(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(N(c))return"Blackberry";if(se(c))return"Webos";if(xe(c))return"Safari";if((c.includes("chrome/")||Qn(c))&&!c.includes("edge/"))return"Chrome";if(L(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Ft(f=(0,K.z$)()){return/firefox\//i.test(f)}function xe(f=(0,K.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Qn(f=(0,K.z$)()){return/crios\//i.test(f)}function gs(f=(0,K.z$)()){return/iemobile/i.test(f)}function L(f=(0,K.z$)()){return/android/i.test(f)}function N(f=(0,K.z$)()){return/blackberry/i.test(f)}function se(f=(0,K.z$)()){return/webos/i.test(f)}function we(f=(0,K.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function it(f=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function un(f=(0,K.z$)()){return we(f)||L(f)||se(f)||N(f)||/windows phone/i.test(f)||gs(f)}function ot(f,c=[]){let d;switch(f){case"Browser":d=ye((0,K.z$)());break;case"Worker":d=`${ye((0,K.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${F.SDK_VERSION}/${p}`}class lu{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=C=>new Promise((O,$)=>{try{O(c(C))}catch(oe){$(oe)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,D.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const C of p)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function oh(){return(oh=(0,D.Z)(function*(f,c={}){return ne(f,"GET","/v2/passwordPolicy",j(f,c))})).apply(this,arguments)}class Yr{constructor(c){var d,p,_,C;const O=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=O.minPasswordLength)&&void 0!==d?d:6,O.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=O.maxPasswordLength),void 0!==O.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=O.containsLowercaseCharacter),void 0!==O.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=O.containsUppercaseCharacter),void 0!==O.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=O.containsNumericCharacter),void 0!==O.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=O.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(C=c.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,C,O,$;const oe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,oe),this.validatePasswordCharacterOptions(c,oe),oe.isValid&&(oe.isValid=null===(d=oe.meetsMinPasswordLength)||void 0===d||d),oe.isValid&&(oe.isValid=null===(p=oe.meetsMaxPasswordLength)||void 0===p||p),oe.isValid&&(oe.isValid=null===(_=oe.containsLowercaseLetter)||void 0===_||_),oe.isValid&&(oe.isValid=null===(C=oe.containsUppercaseLetter)||void 0===C||C),oe.isValid&&(oe.isValid=null===(O=oe.containsNumericCharacter)||void 0===O||O),oe.isValid&&(oe.isValid=null===($=oe.containsNonAlphanumericCharacter)||void 0===$||$),oe}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,C){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=C))}}class wA{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PI(this),this.idTokenSubscription=new PI(this),this.beforeStateQueue=new lu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=Y(d)),this._initializationPromise=this.queue((0,D.Z)(function*(){var _,C;if(!p._deleted&&(p.persistenceManager=yield It.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(C=p.currentUser)||void 0===C?void 0:C.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,D.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,D.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let C=_,O=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const $=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,oe=C?._redirectEventId,Ce=yield d.tryRedirectSignIn(c);(!$||$===oe)&&Ce?.user&&(C=Ce.user,O=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(O)try{yield d.beforeStateQueue.runMiddleware(C)}catch($){C=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject($))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return ae(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(c){var d=this;return(0,D.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,D.Z)(function*(){try{yield qn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Xe(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,D.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,D.Z)(function*(){const p=c?(0,K.m9)(c):null;return p&&ae(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,D.Z)(function*(){if(!p._deleted)return c&&ae(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,D.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,D.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,D.Z)(function*(){yield d.assertedPersistence.setPersistence(Y(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,D.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,D.Z)(function*(){const d=yield function EA(f){return oh.apply(this,arguments)}(c),p=new Yr(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new K.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,D.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function M(f,c){return S.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,D.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,D.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&Y(c)||d._popupRedirectResolver;ae(p,d,"argument-error"),d.redirectPersistenceManager=yield It.create(d,[Y(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,D.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,D.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,D.Z)(function*(){if(c===d.currentUser)return d.queue((0,D.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let O=!1;const $=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae($,this,"internal-error"),$.then(()=>{O||C(this.currentUser)}),"function"==typeof d){const oe=c.addObserver(d,p,_);return()=>{O=!0,oe()}}{const oe=c.addObserver(d);return()=>{O=!0,oe()}}}directlySetCurrentUser(c){var d=this;return(0,D.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=ot(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,D.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const C=yield c._getAppCheckToken();return C&&(p["X-Firebase-AppCheck"]=C),p})()}_getAppCheckToken(){var c=this;return(0,D.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function $n(f,...c){Ge.logLevel<=Me.in.WARN&&Ge.warn(`Auth (${F.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function cn(f){return(0,K.m9)(f)}class PI{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,K.ne)(d=>this.observer=d)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hg(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const C=xt("internal-error");C.customData=_,d(C)},p.type="text/javascript",p.charset="UTF-8",function ms(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function MI(f){return`__${f}${Math.floor(1e6*Math.random())}`}class NI{constructor(c){this.type="recaptcha-enterprise",this.auth=cn(c)}verify(c="verify",d=!1){var p=this;return(0,D.Z)(function*(){function C(){return C=(0,D.Z)(function*($){if(!d){if(null==$.tenantId&&null!=$._agentRecaptchaConfig)return $._agentRecaptchaConfig.siteKey;if(null!=$.tenantId&&void 0!==$._tenantRecaptchaConfigs[$.tenantId])return $._tenantRecaptchaConfigs[$.tenantId].siteKey}return new Promise(function(){var oe=(0,D.Z)(function*(Ce,Ve){zi($,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pt=>{if(void 0!==pt.recaptchaKey){const Dr=new tr(pt);return null==$.tenantId?$._agentRecaptchaConfig=Dr:$._tenantRecaptchaConfigs[$.tenantId]=Dr,Ce(Dr.siteKey)}Ve(new Error("recaptcha Enterprise site key undefined"))}).catch(pt=>{Ve(pt)})});return function(Ce,Ve){return oe.apply(this,arguments)}}())}),C.apply(this,arguments)}function O($,oe,Ce){const Ve=window.grecaptcha;zn(Ve)?Ve.enterprise.ready(()=>{Ve.enterprise.execute($,{action:c}).then(pt=>{oe(pt)}).catch(()=>{oe("NO_RECAPTCHA")})}):Ce(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(($,oe)=>{(function _($){return C.apply(this,arguments)})(p.auth).then(Ce=>{if(!d&&zn(window.grecaptcha))O(Ce,$,oe);else{if(typeof window>"u")return void oe(new Error("RecaptchaVerifier is only supported in browser"));Hg("https://www.google.com/recaptcha/enterprise.js?render="+Ce).then(()=>{O(Ce,$,oe)}).catch(Ve=>{oe(Ve)})}}).catch(Ce=>{oe(Ce)})})})()}}function zg(f,c,d){return qg.apply(this,arguments)}function qg(){return(qg=(0,D.Z)(function*(f,c,d,p=!1){const _=new NI(f);let C;try{C=yield _.verify(d)}catch{C=yield _.verify(d,!0)}const O=Object.assign({},c);return Object.assign(O,p?{captchaResp:C}:{captchaResponse:C}),Object.assign(O,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(O,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),O})).apply(this,arguments)}function fr(f,c,d,p){return je.apply(this,arguments)}function je(){return je=(0,D.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield zg(f,c,d,"getOobCode"===d);return p(f,C)}return p(f,c).catch(function(){var C=(0,D.Z)(function*(O){if("auth/missing-recaptcha-token"===O.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const $=yield zg(f,c,d,"getOobCode"===d);return p(f,$)}return Promise.reject(O)});return function(O){return C.apply(this,arguments)}}())}),je.apply(this,arguments)}function OI(f,c,d){const p=cn(f);ae(p._canInitEmulator,p,"emulator-config-failed"),ae(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,C=Yn(c),{host:O,port:$}=function Tc(f){const c=Yn(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const C=_[1];return{host:C,port:Wg(p.substr(C.length+1))}}{const[C,O]=p.split(":");return{host:C,port:Wg(O)}}}(c);p.config.emulator={url:`${C}//${O}${null===$?"":`:${$}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:O,port:$,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Zg(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function Yn(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Wg(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class ra{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return gt("not implemented")}_getIdTokenResponse(c){return gt("not implemented")}_linkToIdToken(c,d){return gt("not implemented")}_getReauthenticationResolver(c){return gt("not implemented")}}function du(f,c){return ia.apply(this,arguments)}function ia(){return(ia=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:resetPassword",j(f,c))})).apply(this,arguments)}function Dc(){return(Dc=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function kI(f,c){return st.apply(this,arguments)}function st(){return(st=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Ac(){return(Ac=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:update",j(f,c))})).apply(this,arguments)}function Or(f,c){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signInWithPassword",j(f,c))})).apply(this,arguments)}function ch(f,c){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:sendOobCode",j(f,c))})).apply(this,arguments)}function Kg(){return(Kg=(0,D.Z)(function*(f,c){return ch(f,c)})).apply(this,arguments)}function me(f,c){return hu.apply(this,arguments)}function hu(){return(hu=(0,D.Z)(function*(f,c){return ch(f,c)})).apply(this,arguments)}function lh(f,c){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,D.Z)(function*(f,c){return ch(f,c)})).apply(this,arguments)}function hh(){return(hh=(0,D.Z)(function*(f,c){return ch(f,c)})).apply(this,arguments)}function Qg(){return(Qg=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signInWithEmailLink",j(f,c))})).apply(this,arguments)}function Yg(){return(Yg=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signInWithEmailLink",j(f,c))})).apply(this,arguments)}class Pc extends ra{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Pc(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Pc(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,D.Z)(function*(){switch(d.signInMethod){case"password":return fr(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Or);case"emailLink":return function fh(f,c){return Qg.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:ut(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,D.Z)(function*(){switch(p.signInMethod){case"password":return fr(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kI);case"emailLink":return function SA(f,c){return Yg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:ut(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Fo(f,c){return _s.apply(this,arguments)}function _s(){return(_s=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signInWithIdp",j(f,c))})).apply(this,arguments)}class Jr extends ra{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Jr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):ut("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,C=(0,bt._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const O=new Jr(p,_);return O.idToken=C.idToken||void 0,O.accessToken=C.accessToken||void 0,O.secret=C.secret,O.nonce=C.nonce,O.pendingToken=C.pendingToken||null,O}_getIdTokenResponse(c){return Fo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,Fo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Fo(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,K.xO)(d)}return c}}function gh(){return(gh=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:sendVerificationCode",j(f,c))})).apply(this,arguments)}function Mc(){return(Mc=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,c))})).apply(this,arguments)}function mh(){return(mh=(0,D.Z)(function*(f,c){const d=yield Ee(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,c));if(d.temporaryProof)throw sn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Vo={USER_NOT_FOUND:"user-not-found"};function he(){return(he=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Vo)})).apply(this,arguments)}class Lo extends ra{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Lo({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Lo({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function VI(f,c){return Mc.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function oa(f,c){return mh.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function LI(f,c){return he.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:C}=c;return p||d||_||C?new Lo({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:C}):null}}class ys{constructor(c){var d,p,_,C,O,$;const oe=(0,K.zd)((0,K.pd)(c)),Ce=null!==(d=oe.apiKey)&&void 0!==d?d:null,Ve=null!==(p=oe.oobCode)&&void 0!==p?p:null,pt=function Te(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=oe.mode)&&void 0!==_?_:null);ae(Ce&&Ve&&pt,"argument-error"),this.apiKey=Ce,this.operation=pt,this.code=Ve,this.continueUrl=null!==(C=oe.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(O=oe.languageCode)&&void 0!==O?O:null,this.tenantId=null!==($=oe.tenantId)&&void 0!==$?$:null}static parseLink(c){const d=function xc(f){const c=(0,K.zd)((0,K.pd)(f)).link,d=c?(0,K.zd)((0,K.pd)(c)).deep_link_id:null,p=(0,K.zd)((0,K.pd)(f)).deep_link_id;return(p?(0,K.zd)((0,K.pd)(p)).link:null)||p||d||c||f}(c);try{return new ys(d)}catch{return null}}}let _h=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Pc._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=ys.parseLink(p);return ae(_,"argument-error"),Pc._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class go{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class sa extends go{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Xr extends sa{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return ae("providerId"in d&&"signInMethod"in d,"argument-error"),Jr._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ae(c.idToken||c.accessToken,"argument-error"),Jr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Xr.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Xr.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:C,nonce:O,providerId:$}=c;if(!p&&!_&&!d&&!C||!$)return null;try{return new Xr($)._credential({idToken:d,accessToken:p,nonce:O,pendingToken:C})}catch{return null}}}let Oc=(()=>{class f extends sa{constructor(){super("facebook.com")}static credential(d){return Jr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),xi=(()=>{class f extends sa{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Jr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Qi=(()=>{class f extends sa{constructor(){super("github.com")}static credential(d){return Jr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class mo extends ra{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return Fo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,Fo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Fo(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:C}=d;return p&&_&&C&&p===_?new mo(p,C):null}static _create(c,d){return new mo(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class aa extends go{constructor(c){ae(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return aa.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return aa.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=mo.fromJSON(c);return ae(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return mo._create(p,d)}catch{return null}}}let Jg=(()=>{class f extends sa{constructor(){super("twitter.com")}static credential(d,p){return Jr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Yi(f,c){return vs.apply(this,arguments)}function vs(){return(vs=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signUp",j(f,c))})).apply(this,arguments)}class ei{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,D.Z)(function*(){const C=yield I._fromIdTokenResponse(c,p,_),O=vh(p);return new ei({user:C,providerId:O,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,D.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=vh(p);return new ei({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function vh(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Ih(f){return kc.apply(this,arguments)}function kc(){return(kc=(0,D.Z)(function*(f){var c;const d=cn(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new ei({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Yi(d,{returnSecureToken:!0}),_=yield ei._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class fu extends K.ZR{constructor(c,d,p,_){var C;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:c.name,tenantId:null!==(C=c.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new fu(c,d,p,_)}}function ua(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?fu._fromErrorAndOperation(f,C,c,p):C})}function Eh(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function Xg(f,c){return wh.apply(this,arguments)}function wh(){return wh=(0,D.Z)(function*(f,c){const d=(0,K.m9)(f);yield Vc(!0,d,c);const{providerUserInfo:p}=yield function Ri(f,c){return Pi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=Eh(p||[]);return d.providerData=d.providerData.filter(C=>_.has(C.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),wh.apply(this,arguments)}function Fc(f,c){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,D.Z)(function*(f,c,d=!1){const p=yield an(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return ei._forOperation(f,"link",p)})).apply(this,arguments)}function Vc(f,c,d){return ti.apply(this,arguments)}function ti(){return(ti=(0,D.Z)(function*(f,c,d){yield qn(c);const _=!1===f?"provider-already-linked":"no-such-provider";ae(Eh(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function em(f,c){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,D.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const C=yield an(f,ua(p,_,c,f),d);ae(C.idToken,p,"internal-error");const O=bn(C.idToken);ae(O,p,"internal-error");const{sub:$}=O;return ae(f.uid===$,p,"user-mismatch"),ei._forOperation(f,_,C)}catch(C){throw"auth/user-not-found"===C?.code&&ut(p,"user-mismatch"),C}})).apply(this,arguments)}function tm(f,c){return bh.apply(this,arguments)}function bh(){return(bh=(0,D.Z)(function*(f,c,d=!1){const p="signIn",_=yield ua(f,p,c),C=yield ei._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(C.user)),C})).apply(this,arguments)}function Uc(f,c){return Th.apply(this,arguments)}function Th(){return(Th=(0,D.Z)(function*(f,c){return tm(cn(f),c)})).apply(this,arguments)}function Dh(f,c){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,D.Z)(function*(f,c){const d=(0,K.m9)(f);return yield Vc(!1,d,c.providerId),Fc(d,c)})).apply(this,arguments)}function nm(f,c){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,D.Z)(function*(f,c){return em((0,K.m9)(f),c)})).apply(this,arguments)}function Rh(){return(Rh=(0,D.Z)(function*(f,c){return Ee(f,"POST","/v1/accounts:signInWithCustomToken",j(f,c))})).apply(this,arguments)}function UI(f,c){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,D.Z)(function*(f,c){const d=cn(f),p=yield function Dn(f,c){return Rh.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield ei._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),Ph.apply(this,arguments)}class Nn{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Mh._fromServerResponse(c,d):"totpInfo"in d?Bc._fromServerResponse(c,d):ut(c,"internal-error")}}class Mh extends Nn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Mh(d)}}class Bc extends Nn{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new Bc(d)}}function $e(f,c,d){var p;ae((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),ae(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(ae(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(ae(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function pr(f){return ft.apply(this,arguments)}function ft(){return(ft=(0,D.Z)(function*(f){const c=cn(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function rr(f,c,d){return ir.apply(this,arguments)}function ir(){return(ir=(0,D.Z)(function*(f,c,d){const p=cn(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&$e(p,_,d),yield fr(p,_,"getOobCode",me)})).apply(this,arguments)}function ca(f,c,d){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,D.Z)(function*(f,c,d){yield du((0,K.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,D.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&pr(f),_});return function(_){return p.apply(this,arguments)}}())}),Cr.apply(this,arguments)}function rm(f,c){return jc.apply(this,arguments)}function jc(){return jc=(0,D.Z)(function*(f,c){yield function uh(f,c){return Ac.apply(this,arguments)}((0,K.m9)(f),{oobCode:c})}),jc.apply(this,arguments)}function pu(f,c){return xh.apply(this,arguments)}function xh(){return(xh=(0,D.Z)(function*(f,c){const d=(0,K.m9)(f),p=yield du(d,{oobCode:c}),_=p.requestType;switch(ae(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(p.mfaInfo,d,"internal-error");default:ae(p.email,d,"internal-error")}let C=null;return p.mfaInfo&&(C=Nn._fromServerResponse(cn(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:C},operation:_}})).apply(this,arguments)}function BI(f,c){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,D.Z)(function*(f,c){const{data:d}=yield pu((0,K.m9)(f),c);return d.email})).apply(this,arguments)}function ve(f,c,d){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,D.Z)(function*(f,c,d){const p=cn(f),O=yield fr(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yi).catch(oe=>{throw"auth/password-does-not-meet-requirements"===oe.code&&pr(f),oe}),$=yield ei._fromIdTokenResponse(p,"signIn",O);return yield p._updateCurrentUser($.user),$})).apply(this,arguments)}function Jt(f,c,d){return Uc((0,K.m9)(f),_h.credential(c,d)).catch(function(){var p=(0,D.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&pr(f),_});return function(_){return p.apply(this,arguments)}}())}function Ni(f,c,d){return Is.apply(this,arguments)}function Is(){return(Is=(0,D.Z)(function*(f,c,d){const p=cn(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function C(O,$){ae($.handleCodeInApp,p,"argument-error"),$&&$e(p,O,$)})(_,d),yield fr(p,_,"getOobCode",lh)})).apply(this,arguments)}function gr(f,c){const d=ys.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function la(f,c,d){return ln.apply(this,arguments)}function ln(){return(ln=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f),_=_h.credentialWithLink(c,d||_n());return ae(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Uc(p,_)})).apply(this,arguments)}function Bo(){return(Bo=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:createAuthUri",j(f,c))})).apply(this,arguments)}function Ke(f,c){return Es.apply(this,arguments)}function Es(){return Es=(0,D.Z)(function*(f,c){const p={identifier:c,continueUri:Cn()?_n():"http://localhost"},{signinMethods:_}=yield function Uo(f,c){return Bo.apply(this,arguments)}((0,K.m9)(f),p);return _||[]}),Es.apply(this,arguments)}function im(f,c){return jo.apply(this,arguments)}function jo(){return jo=(0,D.Z)(function*(f,c){const d=(0,K.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&$e(d.auth,_,c);const{email:C}=yield function AA(f,c){return Kg.apply(this,arguments)}(d.auth,_);C!==f.email&&(yield f.reload())}),jo.apply(this,arguments)}function An(f,c,d){return ws.apply(this,arguments)}function ws(){return ws=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&$e(p.auth,C,d);const{email:O}=yield function dh(f,c){return hh.apply(this,arguments)}(p.auth,C);O!==f.email&&(yield f.reload())}),ws.apply(this,arguments)}function pi(){return(pi=(0,D.Z)(function*(f,c){return ne(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function gu(f,c){return $c.apply(this,arguments)}function $c(){return $c=(0,D.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,K.m9)(f),C={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},O=yield an(p,function da(f,c){return pi.apply(this,arguments)}(p.auth,C));p.displayName=O.displayName||null,p.photoURL=O.photoUrl||null;const $=p.providerData.find(({providerId:oe})=>"password"===oe);$&&($.displayName=p.displayName,$.photoURL=p.photoURL),yield p._updateTokensIfNecessary(O)}),$c.apply(this,arguments)}function $o(f,c){return ha((0,K.m9)(f),c,null)}function _o(f,c){return ha((0,K.m9)(f),null,c)}function ha(f,c,d){return Cs.apply(this,arguments)}function Cs(){return Cs=(0,D.Z)(function*(f,c,d){const{auth:p}=f,C={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(C.email=c),d&&(C.password=d);const O=yield an(f,function ah(f,c){return Dc.apply(this,arguments)}(p,C));yield f._updateTokensIfNecessary(O,!0)}),Cs.apply(this,arguments)}class mu{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class Hc extends mu{constructor(c,d,p,_){super(c,d,p),this.username=_}}class om extends mu{constructor(c,d){super(c,"facebook.com",d)}}class Ji extends Hc{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class zc extends mu{constructor(c,d){super(c,"google.com",d)}}class fa extends Hc{constructor(c,d,p){super(c,"twitter.com",d,p)}}function _u(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function lt(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},C=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const O=null===(d=null===(c=bn(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(O)return new mu(C,"anonymous"!==O&&"custom"!==O?O:null)}if(!p)return null;switch(p){case"facebook.com":return new om(C,_);case"github.com":return new Ji(C,_);case"google.com":return new zc(C,_);case"twitter.com":return new fa(C,_,f.screenName||null);case"custom":case"anonymous":return new mu(C,null);default:return new mu(C,p,_)}}(d)}class Ts{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new Ts("enroll",c,d)}static _fromMfaPendingCredential(c){return new Ts("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ts._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Ts._fromIdtoken(c.multiFactorSession.idToken)}return null}}class am{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=cn(c),_=d.customData._serverResponse,C=(_.mfaInfo||[]).map($=>Nn._fromServerResponse(p,$));ae(_.mfaPendingCredential,p,"internal-error");const O=Ts._fromMfaPendingCredential(_.mfaPendingCredential);return new am(O,C,function(){var $=(0,D.Z)(function*(oe){const Ce=yield oe._process(p,O);delete _.mfaInfo,delete _.mfaPendingCredential;const Ve=Object.assign(Object.assign({},_),{idToken:Ce.idToken,refreshToken:Ce.refreshToken});switch(d.operationType){case"signIn":const pt=yield ei._fromIdTokenResponse(p,d.operationType,Ve);return yield p._updateCurrentUser(pt.user),pt;case"reauthenticate":return ae(d.user,p,"internal-error"),ei._forOperation(d.user,d.operationType,Ve);default:ut(p,"internal-error")}});return function(oe){return $.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,D.Z)(function*(){return d.signInResolver(c)})()}}function MA(f,c){var d;const p=(0,K.m9)(f),_=c;return ae(c.customData.operationType,p,"argument-error"),ae(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),am._fromError(p,_)}class um{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Nn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new um(c)}getSession(){var c=this;return(0,D.Z)(function*(){return Ts._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,D.Z)(function*(){const _=c,C=yield p.getSession(),O=yield an(p.user,_._process(p.user.auth,C,d));return yield p.user._updateTokensIfNecessary(O),p.user.reload()})()}unenroll(c){var d=this;return(0,D.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const C=yield an(d.user,function kA(f,c){return ne(f,"POST","/v2/accounts/mfaEnrollment:withdraw",j(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:O})=>O!==p),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const cm=new WeakMap;function FA(f){const c=(0,K.m9)(f);return cm.has(c)||cm.set(c,um._fromUser(c)),cm.get(c)}const Fh="__sak";class jI{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Fh,"1"),this.storage.removeItem(Fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const $I=(()=>{class f extends jI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function lm(){const f=(0,K.z$)();return xe(f)||we(f)}()&&function Se(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=un(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),C=this.localCache[p];_!==C&&d(p,C,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys(($,oe,Ce)=>{this.notifyListeners($,Ce)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const $=this.storage.getItem(_);if(d.newValue!==$)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const C=()=>{const $=this.storage.getItem(_);!p&&this.localCache[_]===$||this.notifyListeners(_,$)},O=this.storage.getItem(_);!function Z(){return(0,K.w1)()&&10===document.documentMode}()||O===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const C of Array.from(_))C(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,C=this;return(0,D.Z)(function*(){yield _().call(C,d,p),C.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,D.Z)(function*(){const C=yield p().call(_,d);return _.localCache[d]=JSON.stringify(C),C})()}_remove(d){var p=()=>super._remove,_=this;return(0,D.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),eo=(()=>{class f extends jI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let UA=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(C=>C.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,D.Z)(function*(){const _=d,{eventId:C,eventType:O,data:$}=_.data,oe=p.handlersMap[O];if(!oe?.size)return;_.ports[0].postMessage({status:"ack",eventId:C,eventType:O});const Ce=Array.from(oe).map(function(){var pt=(0,D.Z)(function*(Dr){return Dr(_.origin,$)});return function(Dr){return pt.apply(this,arguments)}}()),Ve=yield function LA(f){return Promise.all(f.map(function(){var c=(0,D.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(Ce);_.ports[0].postMessage({status:"done",eventId:C,eventType:O,response:Ve})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Sn(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class qc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,D.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let O,$;return new Promise((oe,Ce)=>{const Ve=Sn("",20);C.port1.start();const pt=setTimeout(()=>{Ce(new Error("unsupported_event"))},p);$={messageChannel:C,onMessage(Dr){const Io=Dr;if(Io.data.eventId===Ve)switch(Io.data.status){case"ack":clearTimeout(pt),O=setTimeout(()=>{Ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(O),oe(Io.data.response);break;default:clearTimeout(pt),clearTimeout(O),Ce(new Error("invalid_response"))}}},_.handlers.add($),C.port1.addEventListener("message",$.onMessage),_.target.postMessage({eventType:c,eventId:Ve,data:d},[C.port2])}).finally(()=>{$&&_.removeMessageHandler($)})})()}}function Pt(){return window}function Gc(){return typeof Pt().WorkerGlobalScope<"u"&&"function"==typeof Pt().importScripts}function Wc(){return(Wc=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zc="firebaseLocalStorageDb",yu="firebaseLocalStorage",Uh="fbase_key";class ga{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Ds(f,c){return f.transaction([yu],c?"readwrite":"readonly").objectStore(yu)}function Ho(){const f=indexedDB.open(Zc,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(yu,{keyPath:Uh})}catch(_){d(_)}}),f.addEventListener("success",(0,D.Z)(function*(){const p=f.result;p.objectStoreNames.contains(yu)?c(p):(p.close(),yield function vu(){const f=indexedDB.deleteDatabase(Zc);return new ga(f).toPromise()}(),c(yield Ho()))}))})}function Bh(f,c,d){return gm.apply(this,arguments)}function gm(){return(gm=(0,D.Z)(function*(f,c,d){const p=Ds(f,!0).put({[Uh]:c,value:d});return new ga(p).toPromise()})).apply(this,arguments)}function mm(){return(mm=(0,D.Z)(function*(f,c){const d=Ds(f,!1).get(c),p=yield new ga(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function _m(f,c){const d=Ds(f,!0).delete(c);return new ga(d).toPromise()}const Kc=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,D.Z)(function*(){return d.db||(d.db=yield Ho()),d.db})()}_withRetries(d){var p=this;return(0,D.Z)(function*(){let _=0;for(;;)try{const C=yield p._openDb();return yield d(C)}catch(C){if(_++>3)throw C;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,D.Z)(function*(){return Gc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,D.Z)(function*(){d.receiver=UA._getInstance(function pm(){return Gc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,D.Z)(function*(_,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(_,C){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,D.Z)(function*(_,C){return["keyChanged"]});return function(_,C){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,D.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function fm(){return Wc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new qc(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(p=C[0])&&void 0!==p&&p.fulfilled&&null!==(_=C[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,D.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Vh(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Ho();return yield Bh(d,Fh,"1"),yield _m(d,Fh),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,D.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,D.Z)(function*(){return _._withPendingWrite((0,D.Z)(function*(){return yield _._withRetries(C=>Bh(C,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,D.Z)(function*(){const _=yield p._withRetries(C=>function BA(f,c){return mm.apply(this,arguments)}(C,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,D.Z)(function*(){return p._withPendingWrite((0,D.Z)(function*(){return yield p._withRetries(_=>_m(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,D.Z)(function*(){const p=yield d._withRetries(O=>{const $=Ds(O,!1).getAll();return new ga($).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],C=new Set;if(0!==p.length)for(const{fbase_key:O,value:$}of p)C.add(O),JSON.stringify(d.localCache[O])!==JSON.stringify($)&&(d.notifyListeners(O,$),_.push(O));for(const O of Object.keys(d.localCache))d.localCache[O]&&!C.has(O)&&(d.notifyListeners(O,null),_.push(O));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const C of Array.from(_))C(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Iu=1e12;class ym{constructor(c){this.auth=c,this.counter=Iu,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new WI(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Iu;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Iu))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,D.Z)(function*(){var p;return null===(p=d._widgets.get(c||Iu))||void 0===p||p.execute(),""})()}}class WI{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;ae(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ZI(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $h=MI("rcb"),vm=new qr(3e4,6e4);class Im{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Pt().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return ae(function QI(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Hn(Pt().grecaptcha)?Promise.resolve(Pt().grecaptcha):new Promise((p,_)=>{const C=Pt().setTimeout(()=>{_(xt(c,"network-request-failed"))},vm.get());Pt()[$h]=()=>{Pt().clearTimeout(C),delete Pt()[$h];const $=Pt().grecaptcha;if(!$||!Hn($))return void _(xt(c,"internal-error"));const oe=$.render;$.render=(Ce,Ve)=>{const pt=oe(Ce,Ve);return this.counter++,pt},this.hostLanguage=d,p($)},Hg(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:$h,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),_(xt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=Pt().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zA{load(c){return(0,D.Z)(function*(){return new ym(c)})()}clearedOneInstance(){}}const Em="recaptcha",gi={theme:"light",type:"image"};class wm{constructor(c,d,p=Object.assign({},gi)){this.parameters=p,this.type=Em,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(c),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;ae(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zA:new Im,this.validateStartingState()}verify(){var c=this;return(0,D.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(C=>{const O=$=>{$&&(c.tokenChangeListeners.delete(O),C($))};c.tokenChangeListeners.add(O),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=Pt()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,D.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,D.Z)(function*(){ae(Cn()&&!Gc(),c.auth,"internal-error"),yield function YI(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Nr(f){return Si.apply(this,arguments)}(c.auth);ae(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Lo._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Cm(f,c,d){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,D.Z)(function*(f,c,d){const p=cn(f),_=yield wu(p,c,(0,K.m9)(d));return new Hh(_,C=>Uc(p,C))})).apply(this,arguments)}function JI(f,c,d){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f);yield Vc(!1,p,"phone");const _=yield wu(p.auth,c,(0,K.m9)(d));return new Hh(_,C=>Dh(p,C))})).apply(this,arguments)}function XI(f,c,d){return mi.apply(this,arguments)}function mi(){return(mi=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f),_=yield wu(p.auth,c,(0,K.m9)(d));return new Hh(_,C=>nm(p,C))})).apply(this,arguments)}function wu(f,c,d){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,D.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let C;if(ae("string"==typeof _,f,"argument-error"),ae(d.type===Em,f,"argument-error"),C="string"==typeof c?{phoneNumber:c}:c,"session"in C){const O=C.session;if("phoneNumber"in C)return ae("enroll"===O.type,f,"internal-error"),(yield function xA(f,c){return ne(f,"POST","/v2/accounts/mfaEnrollment:start",j(f,c))}(f,{idToken:O.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{ae("signin"===O.type,f,"internal-error");const $=(null===(p=C.multiFactorHint)||void 0===p?void 0:p.uid)||C.multiFactorUid;return ae($,f,"missing-multi-factor-info"),(yield function qI(f,c){return ne(f,"POST","/v2/accounts/mfaSignIn:start",j(f,c))}(f,{mfaPendingCredential:O.credential,mfaEnrollmentId:$,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:O}=yield function FI(f,c){return gh.apply(this,arguments)}(f,{phoneNumber:C.phoneNumber,recaptchaToken:_});return O}}finally{d._reset()}}),Yc.apply(this,arguments)}function qt(f,c){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,D.Z)(function*(f,c){yield Fc((0,K.m9)(f),c)})).apply(this,arguments)}let Jc=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=cn(d)}verifyPhoneNumber(d,p){return wu(this.auth,d,(0,K.m9)(p))}static credential(d,p){return Lo._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?Lo._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function On(f,c){return c?Y(c):(ae(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class zh extends ra{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Fo(c,this._buildIdpRequest())}_linkToIdToken(c,d){return Fo(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return Fo(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function bm(f){return tm(f.auth,new zh(f),f.bypassAuthState)}function ma(f){const{auth:c,user:d}=f;return ae(d,c,"internal-error"),em(d,new zh(f),f.bypassAuthState)}function ri(f){return qh.apply(this,arguments)}function qh(){return(qh=(0,D.Z)(function*(f){const{auth:c,user:d}=f;return ae(d,c,"internal-error"),Fc(d,new zh(f),f.bypassAuthState)})).apply(this,arguments)}class Tm{constructor(c,d,p,_,C=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,D.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(C){c.reject(C)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,D.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:C,tenantId:O,error:$,type:oe}=c;if($)return void d.reject($);const Ce={auth:d.auth,requestUri:p,sessionId:_,tenantId:O||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(oe)(Ce))}catch(Ve){d.reject(Ve)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return bm;case"linkViaPopup":case"linkViaRedirect":return ri;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:ut(this.auth,"internal-error")}}resolve(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eE=new qr(2e3,1e4);function zo(f,c,d){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,D.Z)(function*(f,c,d){const p=cn(f);Mn(f,c,go);const _=On(p,d);return new Gh(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function tE(f,c,d){return el.apply(this,arguments)}function el(){return(el=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f);Mn(p.auth,c,go);const _=On(p.auth,d);return new Gh(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function Dm(f,c,d){return tl.apply(this,arguments)}function tl(){return(tl=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f);Mn(p.auth,c,go);const _=On(p.auth,d);return new Gh(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let Gh=(()=>{class f extends Tm{constructor(d,p,_,C,O){super(d,p,C,O),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,D.Z)(function*(){const p=yield d.execute();return ae(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,D.Z)(function*(){Wt(1===d.filter.length,"Popup operations only handle one event");const p=Sn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(xt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,eE.get())};d()}}return f.currentPopupAction=null,f})();const ze="pendingRedirect",_a=new Map;class qA extends Tm{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,D.Z)(function*(){let p=_a.get(d.auth._key());if(!p){try{const C=(yield function nE(f,c){return Wh.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(C)}catch(_){p=()=>Promise.reject(_)}_a.set(d.auth._key(),p)}return d.bypassAuthState||_a.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,D.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function Wh(){return(Wh=(0,D.Z)(function*(f,c){const d=Rm(c),p=Sm(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function Zh(f,c){return nl.apply(this,arguments)}function nl(){return(nl=(0,D.Z)(function*(f,c){return Sm(f)._set(Rm(c),"true")})).apply(this,arguments)}function ya(){_a.clear()}function Am(f,c){_a.set(f._key(),c)}function Sm(f){return Y(f._redirectPersistence)}function Rm(f){return He(ze,f.config.apiKey,f.name)}function rE(f,c,d){return function iE(f,c,d){return re.apply(this,arguments)}(f,c,d)}function re(){return(re=(0,D.Z)(function*(f,c,d){const p=cn(f);Mn(f,c,go),yield p._initializationPromise;const _=On(p,d);return yield Zh(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Et(f,c,d){return function Zt(f,c,d){return Ut.apply(this,arguments)}(f,c,d)}function Ut(){return(Ut=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f);Mn(p.auth,c,go),yield p.auth._initializationPromise;const _=On(p.auth,d);yield Zh(_,p.auth);const C=yield oE(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",C)})).apply(this,arguments)}function sr(f,c,d){return function Pm(f,c,d){return As.apply(this,arguments)}(f,c,d)}function As(){return(As=(0,D.Z)(function*(f,c,d){const p=(0,K.m9)(f);Mn(p.auth,c,go),yield p.auth._initializationPromise;const _=On(p.auth,d);yield Vc(!1,p,c.providerId),yield Zh(_,p.auth);const C=yield oE(p);return _._openRedirect(p.auth,c,"linkViaRedirect",C)})).apply(this,arguments)}function to(f,c){return bu.apply(this,arguments)}function bu(){return(bu=(0,D.Z)(function*(f,c){return yield cn(f)._initializationPromise,Tu(f,c,!1)})).apply(this,arguments)}function Tu(f,c){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,D.Z)(function*(f,c,d=!1){const p=cn(f),_=On(p,c),O=yield new qA(p,_,d).execute();return O&&!d&&(delete O.user._redirectEventId,yield p._persistUserIfCurrent(O.user),yield p._setRedirectUser(null,c)),O})).apply(this,arguments)}function oE(f){return rl.apply(this,arguments)}function rl(){return(rl=(0,D.Z)(function*(f){const c=Sn(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class no{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function yo(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ss(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!Ss(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(xt(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qh(c))}saveEventToCache(c){this.cachedEventUids.add(Qh(c)),this.lastProcessedEventTime=Date.now()}}function Qh(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function Ss({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Mm(f){return il.apply(this,arguments)}function il(){return(il=(0,D.Z)(function*(f,c={}){return ne(f,"GET","/v1/projects",c)})).apply(this,arguments)}const sE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aE=/^https?/;function Du(){return(Du=(0,D.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Mm(f);for(const d of c)try{if(xm(d))return}catch{}ut(f,"unauthorized-domain")})).apply(this,arguments)}function xm(f){const c=_n(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const O=new URL(f);return""===O.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&O.hostname===p}if(!aE.test(d))return!1;if(sE.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const Jh=new qr(3e4,6e4);function Nm(){const f=Pt().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let va=null;const Fm=new qr(5e3,15e3),Vm="__/auth/iframe",Lm="emulator/auth/iframe",Xh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cE(f){const c=f.config;ae(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Hi(c,Lm):`https://${f.config.authDomain}/${Vm}`,p={apiKey:c.apiKey,appName:f.name,v:F.SDK_VERSION},_=uE.get(f.config.apiHost);_&&(p.eid=_);const C=f._getFrameworks();return C.length&&(p.fw=C.join(",")),`${d}?${(0,K.xO)(p).slice(1)}`}function vo(){return vo=(0,D.Z)(function*(f){const c=yield function km(f){return va=va||function Om(f){return new Promise((c,d)=>{var p,_,C;function O(){Nm(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Nm(),d(xt(f,"network-request-failed"))},timeout:Jh.get()})}if(null!==(_=null===(p=Pt().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(C=Pt().gapi)||void 0===C||!C.load){const $=MI("iframefcb");return Pt()[$]=()=>{gapi.load?O():d(xt(f,"network-request-failed"))},Hg(`https://apis.google.com/js/api.js?onload=${$}`).catch(oe=>d(oe))}O()}}).catch(c=>{throw va=null,c})}(f),va}(f),d=Pt().gapi;return ae(d,f,"internal-error"),c.open({where:document.body,url:cE(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xh,dontclear:!0},p=>new Promise(function(){var _=(0,D.Z)(function*(C,O){yield p.restyle({setHideOnLeave:!1});const $=xt(f,"network-request-failed"),oe=Pt().setTimeout(()=>{O($)},Fm.get());function Ce(){Pt().clearTimeout(oe),C(p)}p.ping(Ce).then(Ce,()=>{O($)})});return function(C,O){return _.apply(this,arguments)}}()))}),vo.apply(this,arguments)}const dn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ef{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const qo="__/auth/handler",pE="emulator/auth/handler",sl=encodeURIComponent("fac");function Ia(f,c,d,p,_,C){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,D.Z)(function*(f,c,d,p,_,C){ae(f.config.authDomain,f,"auth-domain-config-required"),ae(f.config.apiKey,f,"invalid-api-key");const O={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:F.SDK_VERSION,eventId:_};if(c instanceof go){c.setDefaultLanguage(f.languageCode),O.providerId=c.providerId||"",(0,K.xb)(c.getCustomParameters())||(O.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Ve,pt]of Object.entries(C||{}))O[Ve]=pt}if(c instanceof sa){const Ve=c.getScopes().filter(pt=>""!==pt);Ve.length>0&&(O.scopes=Ve.join(","))}f.tenantId&&(O.tid=f.tenantId);const $=O;for(const Ve of Object.keys($))void 0===$[Ve]&&delete $[Ve];const oe=yield f._getAppCheckToken(),Ce=oe?`#${sl}=${encodeURIComponent(oe)}`:"";return`${function tf({config:f}){return f.emulator?Hi(f,pE):`https://${f.authDomain}/${qo}`}(f)}?${(0,K.xO)($).slice(1)}${Ce}`})).apply(this,arguments)}const al="webStorageSupport",jm=class Bm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eo,this._completeRedirectFn=Tu,this._overrideRedirectResult=Am}_openPopup(c,d,p,_){var C=this;return(0,D.Z)(function*(){var O;Wt(null===(O=C.eventManagers[c._key()])||void 0===O?void 0:O.manager,"_initialize() not called before _openPopup()");const $=yield Ia(c,d,p,_n(),_);return function Um(f,c,d,p=500,_=600){const C=Math.max((window.screen.availHeight-_)/2,0).toString(),O=Math.max((window.screen.availWidth-p)/2,0).toString();let $="";const oe=Object.assign(Object.assign({},dn),{width:p.toString(),height:_.toString(),top:C,left:O}),Ce=(0,K.z$)().toLowerCase();d&&($=Qn(Ce)?"_blank":d),Ft(Ce)&&(c=c||"http://localhost",oe.scrollbars="yes");const Ve=Object.entries(oe).reduce((Dr,[Io,Pu])=>`${Dr}${Io}=${Pu},`,"");if(function ct(f=(0,K.z$)()){var c;return we(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ce)&&"_self"!==$)return function ol(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",$),new ef(null);const pt=window.open(c||"",$,Ve);ae(pt,f,"popup-blocked");try{pt.focus()}catch{}return new ef(pt)}(c,$,Sn())})()}_openRedirect(c,d,p,_){var C=this;return(0,D.Z)(function*(){return yield C._originValidation(c),function hm(f){Pt().location.href=f}(yield Ia(c,d,p,_n(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:C}=this.eventManagers[d];return _?Promise.resolve(_):(Wt(C,"If manager is not set, promise should be"),C)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,D.Z)(function*(){const p=yield function Tr(f){return vo.apply(this,arguments)}(c),_=new no(c);return p.register("authEvent",C=>(ae(C?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(al,{type:al},_=>{var C;const O=null===(C=_?.[0])||void 0===C?void 0:C[al];void 0!==O&&d(!!O),ut(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Yh(f){return Du.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return un()||xe()||we()}};class wa{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return gt("unexpected MultiFactorSessionType")}}}class Rs extends wa{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Rs(c)}_finalizeEnroll(c,d,p){return function NA(f,c){return ne(f,"POST","/v2/accounts/mfaEnrollment:finalize",j(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function jh(f,c){return ne(f,"POST","/v2/accounts/mfaSignIn:finalize",j(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gE=(()=>{class f{constructor(){}static assertion(d){return Rs._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var $m="@firebase/auth";class GA{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,D.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ru=(0,K.Pz)("authIdTokenMaxAge")||300;let cl=null;const ll=f=>function(){var c=(0,D.Z)(function*(d){const p=d&&(yield d.getIdTokenResult()),_=p&&((new Date).getTime()-Date.parse(p.issuedAtTime))/1e3;if(_&&_>Ru)return;const C=p?.token;cl!==C&&(cl=C,yield fetch(f,{method:C?"POST":"DELETE",headers:C?{Authorization:`Bearer ${C}`}:{}}))});return function(d){return c.apply(this,arguments)}}();function WA(f=(0,F.getApp)()){const c=(0,F._getProvider)(f,"auth");if(c.isInitialized())return c.getImmediate();const d=function DA(f,c){const d=(0,F._getProvider)(f,"auth");if(d.isInitialized()){const _=d.getImmediate(),C=d.getOptions();if((0,K.vZ)(C,c??{}))return _;ut(_,"already-initialized")}return d.initialize({options:c})}(f,{popupRedirectResolver:jm,persistence:[Kc,$I,eo]}),p=(0,K.Pz)("authTokenSyncURL");if(p){const C=ll(p);(function bs(f,c,d){(0,K.m9)(f).beforeAuthStateChanged(c,d)})(d,C,()=>C(d.currentUser)),function Nh(f,c,d,p){(0,K.m9)(f).onIdTokenChanged(c,d,p)}(d,O=>C(O))}const _=(0,K.q4)("auth");return _&&OI(d,`http://${_}`),d}!function Su(f){(0,F._registerComponent)(new rn.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),C=c.getProvider("app-check-internal"),{apiKey:O,authDomain:$}=p.options;ae(O&&!O.includes(":"),"invalid-api-key",{appName:p.name});const oe={apiKey:O,authDomain:$,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ot(f)},Ce=new wA(p,_,C,oe);return function Pe(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(Y);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(Ce,d),Ce},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new rn.wA("auth-internal",c=>{const d=cn(c.getProvider("auth").getImmediate());return new GA(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)($m,"1.5.1",function nf(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,F.registerVersion)($m,"1.5.1","esm2017")}("Browser")},58:($i,Bn,Ue)=>{Ue.d(Bn,{BH:()=>zr,G6:()=>Hi,L:()=>_t,LL:()=>te,P0:()=>on,Pz:()=>xt,Sg:()=>Mn,UG:()=>gt,ZB:()=>Re,ZR:()=>ne,aH:()=>ut,b$:()=>Cn,eu:()=>q,hl:()=>H,jU:()=>Wt,m9:()=>Ki,ne:()=>Gr,pd:()=>Pi,q4:()=>$n,r3:()=>zn,ru:()=>_n,tV:()=>X,uI:()=>ae,vZ:()=>zi,w1:()=>Ai,xO:()=>Gi,xb:()=>Nr,z$:()=>tt,zd:()=>Ri});const Me=function(M){const S=[];let w=0;for(let b=0;b<M.length;b++){let I=M.charCodeAt(b);I<128?S[w++]=I:I<2048?(S[w++]=I>>6|192,S[w++]=63&I|128):55296==(64512&I)&&b+1<M.length&&56320==(64512&M.charCodeAt(b+1))?(I=65536+((1023&I)<<10)+(1023&M.charCodeAt(++b)),S[w++]=I>>18|240,S[w++]=I>>12&63|128,S[w++]=I>>6&63|128,S[w++]=63&I|128):(S[w++]=I>>12|224,S[w++]=I>>6&63|128,S[w++]=63&I|128)}return S},rn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(M,S){if(!Array.isArray(M))throw Error("encodeByteArray takes an array as a parameter");this.init_();const w=S?this.byteToCharMapWebSafe_:this.byteToCharMap_,b=[];for(let I=0;I<M.length;I+=3){const P=M[I],Y=I+1<M.length,be=Y?M[I+1]:0,Ae=I+2<M.length,He=Ae?M[I+2]:0;let Ft=(15&be)<<2|He>>6,xe=63&He;Ae||(xe=64,Y||(Ft=64)),b.push(w[P>>2],w[(3&P)<<4|be>>4],w[Ft],w[xe])}return b.join("")},encodeString(M,S){return this.HAS_NATIVE_SUPPORT&&!S?btoa(M):this.encodeByteArray(Me(M),S)},decodeString(M,S){return this.HAS_NATIVE_SUPPORT&&!S?atob(M):function(M){const S=[];let w=0,b=0;for(;w<M.length;){const I=M[w++];if(I<128)S[b++]=String.fromCharCode(I);else if(I>191&&I<224){const P=M[w++];S[b++]=String.fromCharCode((31&I)<<6|63&P)}else if(I>239&&I<365){const Ae=((7&I)<<18|(63&M[w++])<<12|(63&M[w++])<<6|63&M[w++])-65536;S[b++]=String.fromCharCode(55296+(Ae>>10)),S[b++]=String.fromCharCode(56320+(1023&Ae))}else{const P=M[w++],Y=M[w++];S[b++]=String.fromCharCode((15&I)<<12|(63&P)<<6|63&Y)}}return S.join("")}(this.decodeStringToByteArray(M,S))},decodeStringToByteArray(M,S){this.init_();const w=S?this.charToByteMapWebSafe_:this.charToByteMap_,b=[];for(let I=0;I<M.length;){const P=w[M.charAt(I++)],be=I<M.length?w[M.charAt(I)]:0;++I;const He=I<M.length?w[M.charAt(I)]:64;++I;const ye=I<M.length?w[M.charAt(I)]:64;if(++I,null==P||null==be||null==He||null==ye)throw new wn;b.push(P<<2|be>>4),64!==He&&(b.push(be<<4&240|He>>2),64!==ye&&b.push(He<<6&192|ye))}return b},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let M=0;M<this.ENCODED_VALS.length;M++)this.byteToCharMap_[M]=this.ENCODED_VALS.charAt(M),this.charToByteMap_[this.byteToCharMap_[M]]=M,this.byteToCharMapWebSafe_[M]=this.ENCODED_VALS_WEBSAFE.charAt(M),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[M]]=M,M>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(M)]=M,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(M)]=M)}}};class wn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _t=function(M){return function(M){const S=Me(M);return rn.encodeByteArray(S,!0)}(M).replace(/\./g,"")},X=function(M){try{return rn.decodeString(M,!0)}catch(S){console.error("base64Decode failed: ",S)}return null};function Re(M,S){if(!(S instanceof Object))return S;switch(S.constructor){case Date:return new Date(S.getTime());case Object:void 0===M&&(M={});break;case Array:M=[];break;default:return S}for(const w in S)!S.hasOwnProperty(w)||!Ye(w)||(M[w]=Re(M[w],S[w]));return M}function Ye(M){return"__proto__"!==M}const Ge=()=>{try{return function Tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const M=process.env.__FIREBASE_DEFAULTS__;return M?JSON.parse(M):void 0})()||(()=>{if(typeof document>"u")return;let M;try{M=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const S=M&&X(M[1]);return S&&JSON.parse(S)})()}catch(M){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${M}`)}},$n=M=>{var S,w;return null===(w=null===(S=Ge())||void 0===S?void 0:S.emulatorHosts)||void 0===w?void 0:w[M]},on=M=>{const S=$n(M);if(!S)return;const w=S.lastIndexOf(":");if(w<=0||w+1===S.length)throw new Error(`Invalid host ${S} with no separate hostname and port!`);const b=parseInt(S.substring(w+1),10);return"["===S[0]?[S.substring(1,w-1),b]:[S.substring(0,w),b]},ut=()=>{var M;return null===(M=Ge())||void 0===M?void 0:M.config},xt=M=>{var S;return null===(S=Ge())||void 0===S?void 0:S[`_${M}`]};class zr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((S,w)=>{this.resolve=S,this.reject=w})}wrapCallback(S){return(w,b)=>{w?this.reject(w):this.resolve(b),"function"==typeof S&&(this.promise.catch(()=>{}),1===S.length?S(w):S(w,b))}}}function Mn(M,S){if(M.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const b=S||"demo-project",I=M.iat||0,P=M.sub||M.user_id;if(!P)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Y=Object.assign({iss:`https://securetoken.google.com/${b}`,aud:b,iat:I,exp:I+3600,auth_time:I,sub:P,user_id:P,firebase:{sign_in_provider:"custom",identities:{}}},M);return[_t(JSON.stringify({alg:"none",type:"JWT"})),_t(JSON.stringify(Y)),""].join(".")}function tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function gt(){var M;const S=null===(M=Ge())||void 0===M?void 0:M.forceEnvironment;if("node"===S)return!0;if("browser"===S)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Wt(){return"object"==typeof self&&self.self===self}function _n(){const M="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof M&&void 0!==M.id}function Cn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ai(){const M=tt();return M.indexOf("MSIE ")>=0||M.indexOf("Trident/")>=0}function Hi(){return!gt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){try{return"object"==typeof indexedDB}catch{return!1}}function q(){return new Promise((M,S)=>{try{let w=!0;const b="validate-browser-context-for-indexeddb-analytics-module",I=self.indexedDB.open(b);I.onsuccess=()=>{I.result.close(),w||self.indexedDB.deleteDatabase(b),M(!0)},I.onupgradeneeded=()=>{w=!1},I.onerror=()=>{var P;S((null===(P=I.error)||void 0===P?void 0:P.message)||"")}}catch(w){S(w)}})}class ne extends Error{constructor(S,w,b){super(w),this.code=S,this.customData=b,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,te.prototype.create)}}class te{constructor(S,w,b){this.service=S,this.serviceName=w,this.errors=b}create(S,...w){const b=w[0]||{},I=`${this.service}/${S}`,P=this.errors[S],Y=P?function ge(M,S){return M.replace(at,(w,b)=>{const I=S[b];return null!=I?String(I):`<${b}?>`})}(P,b):"Error";return new ne(I,`${this.serviceName}: ${Y} (${I}).`,b)}}const at=/\{\$([^}]+)}/g;function zn(M,S){return Object.prototype.hasOwnProperty.call(M,S)}function Nr(M){for(const S in M)if(Object.prototype.hasOwnProperty.call(M,S))return!1;return!0}function zi(M,S){if(M===S)return!0;const w=Object.keys(M),b=Object.keys(S);for(const I of w){if(!b.includes(I))return!1;const P=M[I],Y=S[I];if(vt(P)&&vt(Y)){if(!zi(P,Y))return!1}else if(P!==Y)return!1}for(const I of b)if(!w.includes(I))return!1;return!0}function vt(M){return null!==M&&"object"==typeof M}function Gi(M){const S=[];for(const[w,b]of Object.entries(M))Array.isArray(b)?b.forEach(I=>{S.push(encodeURIComponent(w)+"="+encodeURIComponent(I))}):S.push(encodeURIComponent(w)+"="+encodeURIComponent(b));return S.length?"&"+S.join("&"):""}function Ri(M){const S={};return M.replace(/^\?/,"").split("&").forEach(b=>{if(b){const[I,P]=b.split("=");S[decodeURIComponent(I)]=decodeURIComponent(P)}}),S}function Pi(M){const S=M.indexOf("?");if(!S)return"";const w=M.indexOf("#",S);return M.substring(S,w>0?w:void 0)}function Gr(M,S){const w=new Wr(M,S);return w.subscribe.bind(w)}class Wr{constructor(S,w){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=w,this.task.then(()=>{S(this)}).catch(b=>{this.error(b)})}next(S){this.forEachObserver(w=>{w.next(S)})}error(S){this.forEachObserver(w=>{w.error(S)}),this.close(S)}complete(){this.forEachObserver(S=>{S.complete()}),this.close()}subscribe(S,w,b){let I;if(void 0===S&&void 0===w&&void 0===b)throw new Error("Missing Observer.");I=function nr(M,S){if("object"!=typeof M||null===M)return!1;for(const w of S)if(w in M&&"function"==typeof M[w])return!0;return!1}(S,["next","error","complete"])?S:{next:S,error:w,complete:b},void 0===I.next&&(I.next=Nt),void 0===I.error&&(I.error=Nt),void 0===I.complete&&(I.complete=Nt);const P=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?I.error(this.finalError):I.complete()}catch{}}),this.observers.push(I),P}unsubscribeOne(S){void 0===this.observers||void 0===this.observers[S]||(delete this.observers[S],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(S){if(!this.finalized)for(let w=0;w<this.observers.length;w++)this.sendOne(w,S)}sendOne(S,w){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[S])try{w(this.observers[S])}catch(b){typeof console<"u"&&console.error&&console.error(b)}})}close(S){this.finalized||(this.finalized=!0,void 0!==S&&(this.finalError=S),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}function Ki(M){return M&&M._delegate?M._delegate:M}},179:($i,Bn,Ue)=>{function D(t){return"function"==typeof t}function K(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const F=K(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Me(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(D(r))try{r()}catch(o){e=o instanceof F?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{zt(o)}catch(s){e=e??[],s instanceof F?e=[...e,...s.errors]:e.push(s)}}if(e)throw new F(e)}}add(e){var n;if(e&&e!==this)if(this.closed)zt(e);else{if(e instanceof bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Me(n,e)}remove(e){const{_finalizers:n}=this;n&&Me(n,e),e instanceof bt&&e._removeParent(this)}}bt.EMPTY=(()=>{const t=new bt;return t.closed=!0,t})();const rn=bt.EMPTY;function wn(t){return t instanceof bt||t&&"closed"in t&&D(t.remove)&&D(t.add)&&D(t.unsubscribe)}function zt(t){D(t)?t():t.unsubscribe()}const _t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},X={setTimeout(t,e,...n){const{delegate:r}=X;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=X;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function le(t){X.setTimeout(()=>{const{onUnhandledError:e}=_t;if(!e)throw t;e(t)})}function Re(){}const Ye=ht("C",void 0,void 0);function ht(t,e,n){return{kind:t,value:e,error:n}}let qe=null;function Ge(t){if(_t.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=qe;if(qe=null,n)throw r}}else t()}class on extends bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wn(e)&&e.add(this)):this.destination=Wt}static create(e,n,r){return new Mn(e,n,r)}next(e){this.isStopped?gt(function jn(t){return ht("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?gt(function Tt(t){return ht("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gt(Ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ut=Function.prototype.bind;function xt(t,e){return ut.call(t,e)}class zr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){tt(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){tt(r)}else tt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){tt(n)}}}class Mn extends on{constructor(e,n,r){let i;if(super(),D(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&_t.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xt(e.next,o),error:e.error&&xt(e.error,o),complete:e.complete&&xt(e.complete,o)}):i=e}this.destination=new zr(i)}}function tt(t){_t.useDeprecatedSynchronousErrorHandling?function $n(t){_t.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=t)}(t):le(t)}function gt(t,e){const{onStoppedNotification:n}=_t;n&&X.setTimeout(()=>n(t,e))}const Wt={closed:!0,next:Re,error:function ae(t){throw t},complete:Re},_n="function"==typeof Symbol&&Symbol.observable||"@@observable";function Cn(t){return t}function Ai(t){return 0===t.length?Cn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Xe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function H(t){return t&&t instanceof on||function Hi(t){return t&&D(t.next)&&D(t.error)&&D(t.complete)}(t)&&wn(t)}(n)?n:new Mn(n,r,i);return Ge(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=qr(r))((i,o)=>{const s=new Mn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[_n](){return this}pipe(...n){return Ai(n)(this)}toPromise(n){return new(n=qr(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function qr(t){var e;return null!==(e=t??_t.Promise)&&void 0!==e?e:Promise}const q=K(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let W=(()=>{class t extends Xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new j(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new q}next(n){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?rn:(this.currentObservers=null,o.push(n),new bt(()=>{this.currentObservers=null,Me(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Xe;return n.source=this,n}}return t.create=(e,n)=>new j(e,n),t})();class j extends W{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:rn}}function ne(t){return D(t?.lift)}function te(t){return e=>{if(ne(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(t,e,n,r,i){return new at(t,e,n,r,i)}class at extends on{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ee(t,e){return te((n,r)=>{let i=0;n.subscribe(ge(r,o=>{r.next(t.call(e,o,i++))}))})}var Fe=Ue(582);const yt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Qt(t){return D(t?.then)}function Lt(t){return D(t[_n])}function sn(t){return Symbol.asyncIterator&&D(t?.[Symbol.asyncIterator])}function Hn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const tr=function zn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Nr(t){return D(t?.[tr])}function Si(t){return(0,Fe.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Fe.qq)(n.read());if(i)return yield(0,Fe.qq)(void 0);yield yield(0,Fe.qq)(r)}}finally{n.releaseLock()}})}function zi(t){return D(t?.getReader)}function vt(t){if(t instanceof Xe)return t;if(null!=t){if(Lt(t))return function qi(t){return new Xe(e=>{const n=t[_n]();if(D(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(yt(t))return function Gi(t){return new Xe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Qt(t))return function Ri(t){return new Xe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,le)})}(t);if(sn(t))return dr(t);if(Nr(t))return function Pi(t){return new Xe(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(zi(t))return function Gr(t){return dr(Si(t))}(t)}throw Hn(t)}function dr(t){return new Xe(e=>{(function Wr(t,e){var n,r,i,o;return(0,Fe.mG)(this,void 0,void 0,function*(){try{for(n=(0,Fe.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Zr(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Nt(t,e,n=1/0){return D(e)?Nt((r,i)=>Ee((o,s)=>e(r,o,i,s))(vt(t(r,i))),n):("number"==typeof e&&(n=e),te((r,i)=>function nr(t,e,n,r,i,o,s,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},v=R=>l<r?A(R):u.push(R),A=R=>{o&&e.next(R),l++;let x=!1;vt(n(R,h++)).subscribe(ge(e,U=>{i?.(U),o?v(U):e.next(U)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){const U=u.shift();s?Zr(e,s,()=>A(U)):A(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(ge(e,v,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function Kr(t=1/0){return Nt(Cn,t)}const bn=new Xe(t=>t.complete());function Wi(t){return t[t.length-1]}function Zi(t){return D(Wi(t))?t.pop():void 0}function Mi(t){return function Tn(t){return t&&D(t.schedule)}(Wi(t))?t.pop():void 0}function xn(t,e=0){return te((n,r)=>{n.subscribe(ge(r,i=>Zr(r,t,()=>r.next(i),e),()=>Zr(r,t,()=>r.complete(),e),i=>Zr(r,t,()=>r.error(i),e)))})}function hr(t,e=0){return te((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Ki(t,e){if(!t)throw new Error("Iterable cannot be null");return new Xe(n=>{Zr(n,e,()=>{const r=t[Symbol.asyncIterator]();Zr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function w(t,e){return e?function S(t,e){if(null!=t){if(Lt(t))return function Qr(t,e){return vt(t).pipe(hr(e),xn(e))}(t,e);if(yt(t))return function ko(t,e){return new Xe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Qt(t))return function na(t,e){return vt(t).pipe(hr(e),xn(e))}(t,e);if(sn(t))return Ki(t,e);if(Nr(t))return function ps(t,e){return new Xe(n=>{let r;return Zr(n,e,()=>{r=t[tr](),Zr(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>D(r?.return)&&r.return()})}(t,e);if(zi(t))return function M(t,e){return Ki(Si(t),e)}(t,e)}throw Hn(t)}(t,e):vt(t)}function b(...t){const e=Mi(t),n=function qn(t,e){return"number"==typeof Wi(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?vt(r[0]):Kr(n)(w(r,e)):bn}class I extends W{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function P(...t){return w(t,Mi(t))}function Y(t={}){const{connector:e=(()=>new W),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=g=!1},A=()=>{const R=s;v(),R?.unsubscribe()};return te((R,x)=>{l++,!g&&!h&&m();const U=u=u??e();x.add(()=>{l--,0===l&&!g&&!h&&(a=be(A,i))}),U.subscribe(x),!s&&l>0&&(s=new Mn({next:k=>U.next(k),error:k=>{g=!0,m(),a=be(v,n,k),U.error(k)},complete:()=>{h=!0,m(),a=be(v,r),U.complete()}}),vt(R).subscribe(s))})(o)}}function be(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Mn({next:()=>{r.unsubscribe(),t()}});return vt(e(...n)).subscribe(r)}function Ae(t,e){return te((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(ge(r,u=>{i?.unsubscribe();let l=0;const h=o++;vt(t(u,h)).subscribe(i=ge(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function He(t,e=Cn){return t=t??It,te((n,r)=>{let i,o=!0;n.subscribe(ge(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function It(t,e){return t===e}function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function Ft(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function xe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(xe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Qn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const gs=ye({__forward_ref__:ye});function L(t){return t.__forward_ref__=L,t.toString=function(){return xe(this())},t}function N(t){return se(t)?t():t}function se(t){return"function"==typeof t&&t.hasOwnProperty(gs)&&t.__forward_ref__===L}function we(t){return t&&!!t.\u0275providers}const ct="https://g.co/ng/security#xss";class Z extends Error{constructor(e,n){super(function un(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Se(t){return"string"==typeof t?t:null==t?"":String(t)}function sh(t,e){throw new Z(-201,!1)}function fr(t,e){null==t&&function je(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Yn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Tc(t){return Zg(t,ia)||Zg(t,Dc)}function Zg(t,e){return t.hasOwnProperty(e)?t[e]:null}function du(t){return t&&(t.hasOwnProperty(ah)||t.hasOwnProperty(kI))?t[ah]:null}const ia=ye({\u0275prov:ye}),ah=ye({\u0275inj:ye}),Dc=ye({ngInjectableDef:ye}),kI=ye({ngInjectorDef:ye});var st=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(st||{});let uh;function Or(t){const e=uh;return uh=t,e}function Sc(t,e,n){const r=Tc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&st.Optional?null:void 0!==e?e:void sh(xe(t))}const Vt=globalThis;class me{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _s={},ph="__NG_DI_FLAG__",Jr="ngTempTokenPath",gh=/\n/gm,Mc="__source";let oa;function Vo(t){const e=oa;return oa=t,e}function LI(t,e=st.Default){if(void 0===oa)throw new Z(-203,!1);return null===oa?Sc(t,void 0,e):oa.get(t,e&st.Optional?null:void 0,e)}function he(t,e=st.Default){return(function Ac(){return uh}()||LI)(N(t),e)}function Te(t,e=st.Default){return he(t,xc(e))}function xc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ys(t){const e=[];for(let n=0;n<t.length;n++){const r=N(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Z(900,!1);let i,o=st.Default;for(let s=0;s<r.length;s++){const a=r[s],u=_h(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function Nc(t,e){return t[ph]=e,t.prototype[ph]=e,t}function _h(t){return t[ph]}function Xr(t){return{toString:t}.toString()}var Oc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Oc||{}),xi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(xi||{});const Qi={},At=[],mo=ye({\u0275cmp:ye}),yh=ye({\u0275dir:ye}),aa=ye({\u0275pipe:ye}),Jg=ye({\u0275mod:ye}),Yi=ye({\u0275fac:ye}),vs=ye({__NG_ELEMENT_ID__:ye}),ei=ye({__NG_ENV_ID__:ye});function vh(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Ih(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];fu(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function kc(t){return 3===t||4===t||6===t}function fu(t){return 64===t.charCodeAt(0)}function ua(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Eh(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Eh(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const Xg="ng-template";function wh(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==vh(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Fc(t){return 4===t.type&&t.value!==Xg}function Ch(t,e,n){return e===(4!==t.type||n?t.value:Xg)}function Vc(t,e,n){let r=4;const i=t.attrs||[],o=function bh(t){for(let e=0;e<t.length;e++)if(kc(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ch(t,u,n)||""===u&&1===e.length){if(ti(r))return!1;s=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!wh(t.attrs,l,n)){if(ti(r))return!1;s=!0}continue}const g=em(8&r?"class":u,i,Fc(t),n);if(-1===g){if(ti(r))return!1;s=!0;continue}if(""!==l){let m;m=g>o?"":i[g+1].toLowerCase();const v=8&r?m:null;if(v&&-1!==vh(v,l,0)||2&r&&l!==m){if(ti(r))return!1;s=!0}}}}else{if(!s&&!ti(r)&&!ti(u))return!1;if(s&&ti(u))continue;s=!1,r=u|1&r}}return ti(r)||s}function ti(t){return 0==(1&t)}function em(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Uc(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Lc(t,e,n=!1){for(let r=0;r<e.length;r++)if(Vc(t,e[r],n))return!0;return!1}function Dh(t,e){return t?":not("+e.trim()+")":e}function Ah(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ti(s)&&(e+=Dh(o,i),i=""),r=s,o=o||!ti(r);n++}return""!==i&&(e+=Dh(o,i)),e}function Dn(t){return Xr(()=>{const e=rm(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Oc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xi.Emulated,styles:t.styles||At,_:null,schemas:t.schemas||null,tView:null,id:""};jc(n);const r=t.dependencies;return n.directiveDefs=pu(r,!1),n.pipeDefs=pu(r,!0),n.id=function BI(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function UI(t){return ft(t)||rr(t)}function Ph(t){return null!==t}function Nn(t){return Xr(()=>({type:t.type,bootstrap:t.bootstrap||At,declarations:t.declarations||At,imports:t.imports||At,exports:t.exports||At,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Bc(t,e){if(null==t)return Qi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function $e(t){return Xr(()=>{const e=rm(t);return jc(e),e})}function pr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ft(t){return t[mo]||null}function rr(t){return t[yh]||null}function ir(t){return t[aa]||null}function Cr(t,e){const n=t[Jg]||null;if(!n&&!0===e)throw new Error(`Type ${xe(t)} does not have '\u0275mod' property.`);return n}function rm(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Qi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||At,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bc(t.inputs,e),outputs:Bc(t.outputs)}}function jc(t){t.features?.forEach(e=>e(t))}function pu(t,e){if(!t)return null;const n=e?ir:UI;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Ph)}const Yt=0,ve=1,Ze=2,Jt=3,Ni=4,Is=5,gr=6,la=7,ln=8,Uo=9,Bo=10,Ke=11,Es=12,im=13,jo=14,An=15,ws=16,da=17,pi=18,gu=19,$c=20,$o=21,_o=22,ha=23,Cs=24,lt=25,Hc=1,om=2,Ji=7,fa=9,mr=11;function ni(t){return Array.isArray(t)&&"object"==typeof t[Hc]}function or(t){return Array.isArray(t)&&!0===t[Hc]}function Nh(t){return 0!=(4&t.flags)}function bs(t){return t.componentOffset>-1}function Oh(t){return 1==(1&t.flags)}function Xi(t){return!!t.template}function sm(t){return 0!=(512&t[Ze])}function pa(t,e){return t.hasOwnProperty(Yi)?t[Yi]:null}let Sn=null,qc=!1;function Pt(t){const e=Sn;return Sn=t,e}const hm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function fm(t){if(!vu(t)||t.dirty){if(!t.producerMustRecompute(t)&&!yu(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function pm(t){t.dirty=!0,function Wc(t){if(void 0===t.liveConsumerNode)return;const e=qc;qc=!0;try{for(const n of t.liveConsumerNode)n.dirty||pm(n)}finally{qc=e}}(t),t.consumerMarkedDirty?.(t)}function Zc(t){return t&&(t.nextProducerIndex=0),Pt(t)}function Lh(t,e){if(Pt(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(vu(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ds(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function yu(t){Ho(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fm(n),r!==n.version))return!0}return!1}function Uh(t){if(Ho(t),vu(t))for(let e=0;e<t.producerNode.length;e++)Ds(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ds(t,e){if(function Bh(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ho(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Ds(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ho(i),i.producerIndexOfThis[r]=e}}function vu(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ho(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let zI=null;function vm(t){const e=Pt(null);try{return t()}finally{Pt(e)}}const Im=()=>{},QI=(()=>({...hm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Im}))();class Em{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function gi(){return wm}function wm(t){return t.type.prototype.ngOnChanges&&(t.setInput=Hh),YI}function YI(){const t=Qc(this),e=t?.current;if(e){const n=t.previous;if(n===Qi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Hh(t,e,n,r){const i=this.declaredInputs[n],o=Qc(t)||function JI(t,e){return t[Cm]=e}(t,{previous:Qi,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new Em(u&&u.currentValue,e,a===Qi),t[r]=e}gi.ngInherit=!0;const Cm="__ngSimpleChanges__";function Qc(t){return t[Cm]||null}const mi=function(t,e,n){};function qt(t){for(;Array.isArray(t);)t=t[Yt];return t}function Jc(t,e){return qt(e[t])}function On(t,e){return qt(e[t.index])}function bm(t,e){return t.data[e]}function ma(t,e){return t[e]}function ri(t,e){const n=e[t];return ni(n)?n:n[Yt]}function zo(t,e){return null==e?null:t[e]}function Xc(t){t[da]=0}function tE(t){1024&t[Ze]||(t[Ze]|=1024,Dm(t,1))}function el(t){1024&t[Ze]&&(t[Ze]&=-1025,Dm(t,-1))}function Dm(t,e){let n=t[Jt];if(null===n)return;n[Is]+=e;let r=n;for(n=n[Jt];null!==n&&(1===e&&1===r[Is]||-1===e&&0===r[Is]);)n[Is]+=e,r=n,n=n[Jt]}const ze={lFrame:Fm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nl(){return ze.bindingsEnabled}function re(){return ze.lFrame.lView}function Et(){return ze.lFrame.tView}function Zt(t){return ze.lFrame.contextLView=t,t[ln]}function Ut(t){return ze.lFrame.contextLView=null,t}function sr(){let t=Pm();for(;null!==t&&64===t.type;)t=t.parent;return t}function Pm(){return ze.lFrame.currentTNode}function to(t,e){const n=ze.lFrame;n.currentTNode=t,n.isParent=e}function bu(){return ze.lFrame.isParent}function Tu(){ze.lFrame.isParent=!1}function br(){const t=ze.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ss(){return ze.lFrame.bindingIndex++}function yo(t){const e=ze.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function sE(t,e){const n=ze.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yh(e)}function Yh(t){ze.lFrame.currentDirectiveIndex=t}function xm(){return ze.lFrame.currentQueryIndex}function Jh(t){ze.lFrame.currentQueryIndex=t}function Nm(t){const e=t[ve];return 2===e.type?e.declTNode:1===e.type?t[gr]:null}function Om(t,e,n){if(n&st.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&st.Host||(i=Nm(o),null===i||(o=o[jo],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ze.lFrame=km();return r.currentTNode=e,r.lView=t,!0}function va(t){const e=km(),n=t[ve];ze.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function km(){const t=ze.lFrame,e=null===t?null:t.child;return null===e?Fm(t):e}function Fm(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Vm(){const t=ze.lFrame;return ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Lm=Vm;function Xh(){const t=Vm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Tr(){return ze.lFrame.selectedIndex}function vo(t){ze.lFrame.selectedIndex=t}function dn(){const t=ze.lFrame;return bm(t.tView,t.selectedIndex)}let Um=!0;function ol(){return Um}function qo(t){Um=t}function sl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Ia(t,e,n){al(t,e,3,n)}function Ea(t,e,n,r){(3&t[Ze])===n&&al(t,e,n,r)}function tf(t,e){let n=t[Ze];(3&n)===e&&(n&=8191,n+=1,t[Ze]=n)}function al(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[da]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[da]+=65536),(a<o||-1==o)&&(jm(t,n,e,u),t[da]=(4294901760&t[da])+u+2),u++}function Bm(t,e){mi(4,t,e);const n=Pt(null);try{e.call(t)}finally{Pt(n),mi(5,t,e)}}function jm(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ze]>>13<t[da]>>16&&(3&t[Ze])===e&&(t[Ze]+=8192,Bm(a,o)):Bm(a,o)}const wa=-1;class Rs{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function nf(t){return t!==wa}function Su(t){return 32767&t}function Ru(t,e){let n=function yE(t){return t>>16}(t),r=e;for(;n>0;)r=r[jo],n--;return r}let cl=!0;function ll(t){const e=cl;return cl=t,e}const f=255,c=5;let d=0;const p={};function C(t,e){const n=$(t,e);if(-1!==n)return n;const r=e[ve];r.firstCreatePass&&(t.injectorIndex=e.length,O(r.data,t),O(e,null),O(r.blueprint,null));const i=oe(t,e),o=t.injectorIndex;if(nf(i)){const s=Su(i),a=Ru(i,e),u=a[ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function O(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function oe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=ZA(i),null===r)return wa;if(n++,i=i[jo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return wa}function Ce(t,e,n){!function _(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(vs)&&(r=n[vs]),null==r&&(r=n[vs]=d++);const i=r&f;e.data[t+(i>>c)]|=1<<i}(t,e,n)}function pt(t,e,n){if(n&st.Optional||void 0!==t)return t;sh()}function Dr(t,e,n,r){if(n&st.Optional&&void 0===r&&(r=null),!(n&(st.Self|st.Host))){const i=t[Uo],o=Or(void 0);try{return i?i.get(e,r,n&st.Optional):Sc(e,r,n&st.Optional)}finally{Or(o)}}return pt(r,0,n)}function Io(t,e,n,r=st.Default,i){if(null!==t){if(2048&e[Ze]&&!(r&st.Self)){const s=function SB(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[Ze]&&!(512&s[Ze]);){const a=Pu(o,s,n,r|st.Self,p);if(a!==p)return a;let u=o.parent;if(!u){const l=s[$c];if(l){const h=l.get(n,p,r);if(h!==p)return h}u=ZA(s),s=s[jo]}o=u}return i}(t,e,n,r,p);if(s!==p)return s}const o=Pu(t,e,n,r,p);if(o!==p)return o}return Dr(e,n,r,i)}function Pu(t,e,n,r,i){const o=function zm(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(vs)?t[vs]:void 0;return"number"==typeof e?e>=0?e&f:vE:e}(n);if("function"==typeof o){if(!Om(e,t,r))return r&st.Host?pt(i,0,r):Dr(e,n,r,i);try{let s;if(s=o(r),null!=s||r&st.Optional)return s;sh()}finally{Lm()}}else if("number"==typeof o){let s=null,a=$(t,e),u=wa,l=r&st.Host?e[An][gr]:null;for((-1===a||r&st.SkipSelf)&&(u=-1===a?oe(t,e):e[a+8],u!==wa&&rf(r,!1)?(s=e[ve],a=Su(u),e=Ru(u,e)):a=-1);-1!==a;){const h=e[ve];if(dl(o,a,h.data)){const g=Hm(a,e,n,s,r,l);if(g!==p)return g}u=e[a+8],u!==wa&&rf(r,e[ve].data[a+8]===l)&&dl(o,a,e)?(s=h,a=Su(u),e=Ru(u,e)):a=-1}}return i}function Hm(t,e,n,r,i,o){const s=e[ve],a=s.data[t+8],h=Ca(a,s,n,null==r?bs(a)&&cl:r!=s&&0!=(3&a.type),i&st.Host&&o===a);return null!==h?Go(e,s,h,a):p}function Ca(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,h=o>>20,m=i?a+h:t.directiveEnd;for(let v=r?a:a+h;v<m;v++){const A=s[v];if(v<u&&n===A||v>=u&&A.type===n)return v}if(i){const v=s[u];if(v&&Xi(v)&&v.type===n)return u}return null}function Go(t,e,n,r){let i=t[n];const o=e.data;if(function gE(t){return t instanceof Rs}(i)){const s=i;s.resolving&&function lu(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Z(-200,`Circular dependency in DI detected for ${t}${n}`)}(function ot(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Se(t)}(o[n]));const a=ll(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Or(s.injectImpl):null;Om(t,r,st.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function pE(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=wm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&Or(l),ll(a),s.resolving=!1,Lm()}}return i}function dl(t,e,n){return!!(n[e+(t>>c)]&1<<t)}function rf(t,e){return!(t&st.Self||t&st.Host&&e)}class _r{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Io(this._tNode,this._lView,e,xc(r),n)}}function vE(){return new _r(sr(),re())}function Gn(t){return Xr(()=>{const e=t.prototype.constructor,n=e[Yi]||af(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Yi]||af(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function af(t){return se(t)?()=>{const e=af(N(t));return e&&e()}:pa(t)}function ZA(t){const e=t[ve],n=e.type;return 2===n?e.declTNode:1===n?t[gr]:null}const fl="__parameters__";function gl(t,e,n){return Xr(()=>{const r=function IE(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,l,h){const g=u.hasOwnProperty(fl)?u[fl]:Object.defineProperty(u,fl,{value:[]})[fl];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function _l(t,e){t.forEach(n=>Array.isArray(n)?_l(n,e):e(n))}function QA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Gm(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Oi(t,e,n){let r=yl(t,e);return r>=0?t[1|r]=n:(r=~r,function kB(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function EE(t,e){const n=yl(t,e);if(n>=0)return t[1|n]}function yl(t,e){return function YA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const _i=Nc(gl("Optional"),8),Zm=Nc(gl("SkipSelf"),4);function Xm(t){return 128==(128&t.flags)}var Ta=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ta||{});const nj=/^>|^->|<!--|-->|--!>|<!-$/g,rj=/(<|>)/g,ij="\u200b$1\u200b";const DE=new Map;let oj=0;const SE="__ngContext__";function kr(t,e){ni(e)?(t[SE]=e[gu],function aj(t){DE.set(t[gu],t)}(e)):t[SE]=e}let RE;function PE(t,e){return RE(t,e)}function hf(t){const e=t[Jt];return or(e)?e[Jt]:e}function _S(t){return vS(t[Es])}function yS(t){return vS(t[Ni])}function vS(t){for(;null!==t&&!or(t);)t=t[Ni];return t}function El(t,e,n,r,i){if(null!=r){let o,s=!1;or(r)?o=r:ni(r)&&(s=!0,r=r[Yt]);const a=qt(r);0===t&&null!==n?null==i?CS(e,n,a):Mu(e,n,a,i||null,!0):1===t&&null!==n?Mu(e,n,a,i||null,!0):2===t?function s_(t,e,n){const r=i_(t,e);r&&function Dj(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function Rj(t,e,n,r,i){const o=n[Ji];o!==qt(n)&&El(e,t,r,o,i);for(let a=mr;a<n.length;a++){const u=n[a];pf(u[ve],u,t,e,r,o)}}(e,t,o,n,i)}}function ME(t,e){return t.createComment(function cS(t){return t.replace(nj,e=>e.replace(rj,ij))}(e))}function n_(t,e,n){return t.createElement(e,n)}function ES(t,e){const n=t[fa],r=n.indexOf(e);el(e),n.splice(r,1)}function r_(t,e){if(t.length<=mr)return;const n=mr+e,r=t[n];if(r){const i=r[ws];null!==i&&i!==t&&ES(i,r),e>0&&(t[n-1][Ni]=r[Ni]);const o=Gm(t,mr+e);!function yj(t,e){pf(t,e,e[Ke],2,null,null),e[Yt]=null,e[gr]=null}(r[ve],r);const s=o[pi];null!==s&&s.detachView(o[ve]),r[Jt]=null,r[Ni]=null,r[Ze]&=-129}return r}function xE(t,e){if(!(256&e[Ze])){const n=e[Ke];e[ha]&&Uh(e[ha]),e[Cs]&&Uh(e[Cs]),n.destroyNode&&pf(t,e,n,3,null,null),function Ej(t){let e=t[Es];if(!e)return NE(t[ve],t);for(;e;){let n=null;if(ni(e))n=e[Es];else{const r=e[mr];r&&(n=r)}if(!n){for(;e&&!e[Ni]&&e!==t;)ni(e)&&NE(e[ve],e),e=e[Jt];null===e&&(e=t),ni(e)&&NE(e[ve],e),n=e&&e[Ni]}e=n}}(e)}}function NE(t,e){if(!(256&e[Ze])){e[Ze]&=-129,e[Ze]|=256,function Tj(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Rs)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];mi(4,a,u);try{u.call(a)}finally{mi(5,a,u)}}else{mi(4,i,o);try{o.call(i)}finally{mi(5,i,o)}}}}}(t,e),function bj(t,e){const n=t.cleanup,r=e[la];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[la]=null);const i=e[$o];if(null!==i){e[$o]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[ve].type&&e[Ke].destroy();const n=e[ws];if(null!==n&&or(e[Jt])){n!==e[Jt]&&ES(n,e);const r=e[pi];null!==r&&r.detachView(t)}!function uj(t){DE.delete(t[gu])}(e)}}function OE(t,e,n){return function wS(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Yt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===xi.None||o===xi.Emulated)return null}return On(r,n)}}(t,e.parent,n)}function Mu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function CS(t,e,n){t.appendChild(e,n)}function bS(t,e,n,r,i){null!==r?Mu(t,e,n,r,i):CS(t,e,n)}function i_(t,e){return t.parentNode(e)}let kE,UE,u_,AS=function DS(t,e,n){return 40&t.type?On(t,n):null};function o_(t,e,n,r){const i=OE(t,r,e),o=e[Ke],a=function TS(t,e,n){return AS(t,e,n)}(r.parent||e[gr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)bS(o,i,n[u],a,!1);else bS(o,i,n,a,!1);void 0!==kE&&kE(o,r,e,n,i)}function ff(t,e){if(null!==e){const n=e.type;if(3&n)return On(e,t);if(4&n)return FE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return ff(t,r);{const i=t[e.index];return or(i)?FE(-1,i):qt(i)}}if(32&n)return PE(e,t)()||qt(t[e.index]);{const r=RS(t,e);return null!==r?Array.isArray(r)?r[0]:ff(hf(t[An]),r):ff(t,e.next)}}return null}function RS(t,e){return null!==e?t[An][gr].projection[e.projection]:null}function FE(t,e){const n=mr+t+1;if(n<e.length){const r=e[n],i=r[ve].firstChild;if(null!==i)return ff(r,i)}return e[Ji]}function VE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&kr(qt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)VE(t,e,n.child,r,i,o,!1),El(e,t,i,a,o);else if(32&u){const l=PE(n,r);let h;for(;h=l();)El(e,t,i,h,o);El(e,t,i,a,o)}else 16&u?MS(t,e,r,n,i,o):El(e,t,i,a,o);n=s?n.projectionNext:n.next}}function pf(t,e,n,r,i,o){VE(n,r,t.firstChild,e,i,o,!1)}function MS(t,e,n,r,i,o){const s=n[An],u=s[gr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)El(e,t,i,u[l],o);else{let l=u;const h=s[Jt];Xm(r)&&(l.flags|=128),VE(t,e,l,h,i,o,!0)}}function xS(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function NS(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Ih(t,e,r),null!==i&&xS(t,e,i),null!==o&&function Mj(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function FS(t){return function BE(){if(void 0===u_&&(u_=null,Vt.trustedTypes))try{u_=Vt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return u_}()?.createScriptURL(t)||t}class VS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}function Da(t){return t instanceof VS?t.changingThisBreaksApplicationSecurity:t}function gf(t,e){const n=function jj(t){return t instanceof VS&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ct})`)}return n===e}const qj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var bl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(bl||{});function l_(t){const e=_f();return e?e.sanitize(bl.URL,t)||"":gf(t,"URL")?Da(t):function jE(t){return(t=String(t)).match(qj)?t:"unsafe:"+t}(Se(t))}function zS(t){const e=_f();if(e)return FS(e.sanitize(bl.RESOURCE_URL,t)||"");if(gf(t,"ResourceURL"))return FS(Da(t));throw new Z(904,!1)}function _f(){const t=re();return t&&t[Bo].sanitizer}const yf=new me("ENVIRONMENT_INITIALIZER"),GS=new me("INJECTOR",-1),WS=new me("INJECTOR_DEF_TYPES");class qE{get(e,n=_s){if(n===_s){const r=new Error(`NullInjectorError: No provider for ${xe(e)}!`);throw r.name="NullInjectorError",r}return n}}function i3(...t){return{\u0275providers:KS(0,t),\u0275fromNgModule:!0}}function KS(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return _l(e,s=>{const a=s;d_(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&QS(i,o),n}function QS(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];GE(i,o=>{e(o,r)})}}function d_(t,e,n,r){if(!(t=N(t)))return!1;let i=null,o=du(t);const s=!o&&ft(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=du(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of u)d_(l,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{_l(o.imports,h=>{d_(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&QS(l,e)}if(!a){const l=pa(i)||(()=>new i);e({provide:i,useFactory:l,deps:At},i),e({provide:WS,useValue:i,multi:!0},i),e({provide:yf,useValue:()=>he(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const l=t;GE(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function GE(t,e){for(let n of t)we(n)&&(n=n.\u0275providers),Array.isArray(n)?GE(n,e):e(n)}const o3=ye({provide:String,useValue:ye});function WE(t){return null!==t&&"object"==typeof t&&o3 in t}function xu(t){return"function"==typeof t}const ZE=new me("Set Injector scope."),h_={},a3={};let KE;function f_(){return void 0===KE&&(KE=new qE),KE}class io{}class Tl extends io{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,YE(e,s=>this.processProvider(s)),this.records.set(GS,Dl(void 0,this)),i.has("environment")&&this.records.set(io,Dl(void 0,this));const o=this.records.get(ZE);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(WS.multi,At,st.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Vo(this),r=Or(void 0);try{return e()}finally{Vo(n),Or(r)}}get(e,n=_s,r=st.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ei))return e[ei](this);r=xc(r);const o=Vo(this),s=Or(void 0);try{if(!(r&st.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function h3(t){return"function"==typeof t||"object"==typeof t&&t instanceof me}(e)&&Tc(e);u=l&&this.injectableDefInScope(l)?Dl(QE(e),h_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&st.Self?f_():this.parent).get(e,n=r&st.Optional&&n===_s?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Jr]=a[Jr]||[]).unshift(xe(e)),o)throw a;return function go(t,e,n,r){const i=t[Jr];throw e[Mc]&&i.unshift(e[Mc]),t.message=function sa(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=xe(e);if(Array.isArray(e))i=e.map(xe).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):xe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(gh,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Jr]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Or(s),Vo(o)}}resolveInjectorInitializers(){const e=Vo(this),n=Or(void 0);try{const i=this.get(yf.multi,At,st.Self);for(const o of i)o()}finally{Vo(e),Or(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(xe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){let n=xu(e=N(e))?e:N(e&&e.provide);const r=function c3(t){return WE(t)?Dl(void 0,t.useValue):Dl(XS(t),h_)}(e);if(xu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Dl(void 0,h_,!0),i.factory=()=>ys(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===h_&&(n.value=a3,n.value=n.factory()),"object"==typeof n.value&&n.value&&function d3(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=N(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function QE(t){const e=Tc(t),n=null!==e?e.factory:pa(t);if(null!==n)return n;if(t instanceof me)throw new Z(204,!1);if(t instanceof Function)return function u3(t){const e=t.length;if(e>0)throw function cf(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new Z(204,!1);const n=function ra(t){return t&&(t[ia]||t[Dc])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Z(204,!1)}function XS(t,e,n){let r;if(xu(t)){const i=N(t);return pa(i)||QE(i)}if(WE(t))r=()=>N(t.useValue);else if(function JS(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...ys(t.deps||[]));else if(function YS(t){return!(!t||!t.useExisting)}(t))r=()=>he(N(t.useExisting));else{const i=N(t&&(t.useClass||t.provide));if(!function l3(t){return!!t.deps}(t))return pa(i)||QE(i);r=()=>new i(...ys(t.deps))}return r}function Dl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function YE(t,e){for(const n of t)Array.isArray(n)?YE(n,e):n&&we(n)?YE(n.\u0275providers,e):e(n)}const p_=new me("AppId",{providedIn:"root",factory:()=>f3}),f3="ng",e1=new me("Platform Initializer"),Wo=new me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),t1=new me("CSP nonce",{providedIn:"root",factory:()=>function Cl(){if(void 0!==UE)return UE;if(typeof document<"u")return document;throw new Z(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let n1=(t,e,n)=>null;function ow(t,e,n=!1){return n1(t,e,n)}class C3{}class o1{}class T3{resolveComponentFactory(e){throw function b3(t){const e=Error(`No component factory found for ${xe(t)}.`);return e.ngComponent=t,e}(e)}}let I_=(()=>{class t{static#e=this.NULL=new T3}return t})();function D3(){return Rl(sr(),re())}function Rl(t,e){return new ki(On(t,e))}let ki=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=D3}return t})();function A3(t){return t instanceof ki?t.nativeElement:t}class a1{}let Ms=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function S3(){const t=re(),n=ri(sr().index,t);return(ni(n)?n:t)[Ke]}()}return t})(),R3=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>null})}return t})();class Pl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const uw=new Pl("16.2.12"),cw={};function d1(t,e=null,n=null,r){const i=h1(t,e,n,r);return i.resolveInjectorInitializers(),i}function h1(t,e=null,n=null,r,i=new Set){const o=[n||At,i3(t)];return r=r||("object"==typeof t?void 0:xe(t)),new Tl(o,e||f_(),r||null,i)}let Fr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=_s;static#t=this.NULL=new qE;static create(n,r){if(Array.isArray(n))return d1({name:""},r,n,"");{const i=n.name??"";return d1({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Pe({token:t,providedIn:"any",factory:()=>he(GS)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function dw(t){return t.ngOriginalError}class xs{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&dw(e);for(;n&&dw(n);)n=dw(n);return n||null}}function fw(t){return e=>{setTimeout(t,void 0,e)}}const kn=class F3 extends W{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=fw(o),i&&(i=fw(i)),s&&(s=fw(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof bt&&e.add(a),a}};function p1(...t){}class Mt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kn(!1),this.onMicrotaskEmpty=new kn(!1),this.onStable=new kn(!1),this.onError=new kn(!1),typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function V3(){const t="function"==typeof Vt.requestAnimationFrame;let e=Vt[t?"requestAnimationFrame":"setTimeout"],n=Vt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function B3(t){const e=()=>{!function U3(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Vt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gw(t),t.isCheckStableRunning=!0,pw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gw(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function $3(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return g1(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),m1(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return g1(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),m1(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,gw(t),pw(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mt.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(Mt.isInAngularZone())throw new Z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,L3,p1,p1);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const L3={};function pw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gw(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function g1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function m1(t){t._nesting--,pw(t)}class j3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kn,this.onMicrotaskEmpty=new kn,this.onStable=new kn,this.onError=new kn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const _1=new me("",{providedIn:"root",factory:y1});function y1(){const t=Te(Mt);let e=!0;return b(new Xe(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Xe(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=t.onUnstable.subscribe(()=>{Mt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Y()))}function Ns(t){return t instanceof Function?t():t}let mw=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ef(t){for(;t;){t[Ze]|=64;const e=hf(t);if(sm(t)&&!e)return t;t=e}return null}const C1=new me("",{providedIn:"root",factory:()=>!1});let w_=null;function A1(t,e){return t[e]??P1()}function S1(t,e){const n=P1();n.producerNode?.length&&(t[e]=w_,n.lView=t,w_=R1())}const J3={...hm,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ef(t.lView)},lView:null};function R1(){return Object.create(J3)}function P1(){return w_??=R1(),w_}const et={};function ce(t){M1(Et(),re(),Tr()+t,!1)}function M1(t,e,n,r){if(!r)if(3==(3&e[Ze])){const o=t.preOrderCheckHooks;null!==o&&Ia(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Ea(e,o,0,n)}vo(n)}function G(t,e=st.Default){const n=re();return null===n?he(t,e):Io(sr(),n,N(t),e)}function C_(t,e,n,r,i,o,s,a,u,l,h){const g=e.blueprint.slice();return g[Yt]=i,g[Ze]=140|r,(null!==l||t&&2048&t[Ze])&&(g[Ze]|=2048),Xc(g),g[Jt]=g[jo]=t,g[ln]=n,g[Bo]=s||t&&t[Bo],g[Ke]=a||t&&t[Ke],g[Uo]=u||t&&t[Uo]||null,g[gr]=o,g[gu]=function sj(){return oj++}(),g[_o]=h,g[$c]=l,g[An]=2==e.type?t[An]:g,g}function Nl(t,e,n,r,i){let o=t.data[e];if(null===o)o=function _w(t,e,n,r,i){const o=Pm(),s=bu(),u=t.data[e]=function s4(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function ya(){return null!==ze.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function Mm(){return ze.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function As(){const t=ze.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return to(o,!0),o}function wf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function N1(t,e,n,r,i){const o=A1(e,ha),s=Tr(),a=2&r;try{vo(-1),a&&e.length>lt&&M1(t,e,lt,!1),mi(a?2:0,i);const l=a?o:null,h=Zc(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Lh(l,h)}}finally{a&&null===e[ha]&&S1(e,ha),vo(s),mi(a?3:1,i)}}function yw(t,e,n){if(Nh(e)){const r=Pt(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Pt(r)}}}function vw(t,e,n){nl()&&(function f4(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;bs(n)&&function I4(t,e,n){const r=On(e,t),i=O1(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=b_(t,C_(t,i,null,s,r,e,null,t[Bo].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||C(n,e),kr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],l=Go(e,t,a,n);kr(l,e),null!==s&&E4(0,a-i,l,u,0,s),Xi(u)&&(ri(n.index,e)[ln]=Go(e,t,a,n))}}(t,e,n,On(n,e)),64==(64&n.flags)&&U1(t,e,n))}function Iw(t,e,n=On){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function O1(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ew(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ew(t,e,n,r,i,o,s,a,u,l,h){const g=lt+r,m=g+i,v=function e4(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:et);return n}(g,m),A="function"==typeof l?l():l;return v[ve]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}let k1=t=>null;function F1(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?V1(n,e,i,o):r.hasOwnProperty(i)&&V1(n,e,r[i],o)}return n}function V1(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Fi(t,e,n,r,i,o,s,a){const u=On(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(Dw(t,n,h,r,i),bs(e)&&function c4(t,e){const n=ri(e,t);16&n[Ze]||(n[Ze]|=64)}(n,e.index)):3&e.type&&(r=function u4(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function ww(t,e,n,r){if(nl()){const i=null===r?null:{"":-1},o=function g4(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(Lc(e,s.selectors,!1))if(r||(r=[]),Xi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Cw(t,e,a.length)}else r.unshift(s),Cw(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&L1(t,e,n,s,i,a),i&&function m4(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new Z(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=ua(n.mergedAttrs,n.attrs)}function L1(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Ce(C(n,e),t,r[l].type);!function y4(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=wf(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=ua(n.mergedAttrs,h.hostAttrs),v4(t,n,e,u,h),_4(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function a4(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=o[h],m=n?n.get(g):null,A=m?m.outputs:null;u=F1(g.inputs,h,u,m?m.inputs:null),l=F1(g.outputs,h,l,A);const R=null===u||null===s||Fc(e)?null:w4(u,h,s);a.push(R)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,o)}function U1(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function aE(){return ze.lFrame.currentDirectiveIndex}();try{vo(o);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];Yh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&p4(u,l)}}finally{vo(-1),Yh(s)}}function p4(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Cw(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _4(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Xi(e)&&(n[""]=t)}}function v4(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=pa(i.type)),s=new Rs(o,Xi(i),G);t.blueprint[r]=s,n[r]=s,function d4(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function h4(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,wf(t,n,i.hostVars,et),i)}function Zo(t,e,n,r,i,o){const s=On(t,e);!function bw(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Se(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[Ke],s,o,t.value,n,r,i)}function E4(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)B1(r,n,s[a++],s[a++],s[a++])}function B1(t,e,n,r,i){const o=Pt(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Pt(o)}}function w4(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function j1(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function $1(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];Jh(n[r]),s.contentQueries(2,e[o],o)}}}function b_(t,e){return t[Es]?t[im][Ni]=e:t[Es]=e,t[im]=e,e}function Tw(t,e,n){Jh(0);const r=Pt(null);try{e(t,n)}finally{Pt(r)}}function H1(t){return t[la]||(t[la]=[])}function z1(t){return t.cleanup||(t.cleanup=[])}function G1(t,e){const n=t[Uo],r=n?n.get(xs,null):null;r&&r.handleError(e)}function Dw(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];B1(t.data[s],e[s],r,a,i)}}function Os(t,e,n){const r=Jc(e,t);!function IS(t,e,n){t.setValue(e,n)}(t[Ke],r,n)}function C4(t,e){const n=ri(e,t),r=n[ve];!function b4(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Yt];null!==i&&null===n[_o]&&(n[_o]=ow(i,n[Uo])),Aw(r,n,n[ln])}function Aw(t,e,n){va(e);try{const r=t.viewQuery;null!==r&&Tw(1,r,n);const i=t.template;null!==i&&N1(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$1(t,e),t.staticViewQueries&&Tw(2,t.viewQuery,n);const o=t.components;null!==o&&function T4(t,e){for(let n=0;n<e.length;n++)C4(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ze]&=-5,Xh()}}let W1=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function KI(t,e,n){const r=Object.create(QI);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>pm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!yu(r))return;r.hasRun=!0;const s=Zc(r);try{r.cleanupFn(),r.cleanupFn=Im,r.fn(i)}finally{Lh(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function T_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Qn(i,a):2==o&&(r=Qn(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Cf(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(qt(o)),or(o)&&Z1(o,r);const s=n.type;if(8&s)Cf(t,e,n.child,r);else if(32&s){const a=PE(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=RS(e,n);if(Array.isArray(a))r.push(...a);else{const u=hf(e[An]);Cf(u[ve],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Z1(t,e){for(let n=mr;n<t.length;n++){const r=t[n],i=r[ve].firstChild;null!==i&&Cf(r[ve],r,i,e)}t[Ji]!==t[Yt]&&e.push(t[Ji])}function D_(t,e,n,r=!0){const i=e[Bo],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{K1(t,e,t.template,n)}catch(u){throw r&&G1(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function K1(t,e,n,r){const i=e[Ze];if(256!=(256&i)){e[Bo].effectManager?.flush(),va(e);try{Xc(e),function Qh(t){return ze.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&N1(t,e,n,2,r);const s=3==(3&i);if(s){const l=t.preOrderCheckHooks;null!==l&&Ia(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Ea(e,l,0,null),tf(e,0)}if(function S4(t){for(let e=_S(t);null!==e;e=yS(e)){if(!e[om])continue;const n=e[fa];for(let r=0;r<n.length;r++){tE(n[r])}}}(e),Q1(e,2),null!==t.contentQueries&&$1(t,e),s){const l=t.contentCheckHooks;null!==l&&Ia(e,l)}else{const l=t.contentHooks;null!==l&&Ea(e,l,1),tf(e,1)}!function X3(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=A1(e,Cs);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)vo(~o);else{const s=o,a=n[++i],u=n[++i];sE(a,s),r.dirty=!1;const l=Zc(r);try{u(2,e[s])}finally{Lh(r,l)}}}}finally{null===e[Cs]&&S1(e,Cs),vo(-1)}}(t,e);const a=t.components;null!==a&&J1(e,a,0);const u=t.viewQuery;if(null!==u&&Tw(2,u,r),s){const l=t.viewCheckHooks;null!==l&&Ia(e,l)}else{const l=t.viewHooks;null!==l&&Ea(e,l,2),tf(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ze]&=-73,el(e)}finally{Xh()}}}function Q1(t,e){for(let n=_S(t);null!==n;n=yS(n))for(let r=mr;r<n.length;r++)Y1(n[r],e)}function R4(t,e,n){Y1(ri(e,t),n)}function Y1(t,e){if(!function Tm(t){return 128==(128&t[Ze])}(t))return;const n=t[ve],r=t[Ze];if(80&r&&0===e||1024&r||2===e)K1(n,t,n.template,t[ln]);else if(t[Is]>0){Q1(t,1);const i=n.components;null!==i&&J1(t,i,1)}}function J1(t,e,n){for(let r=0;r<e.length;r++)R4(t,e[r],n)}class bf{get rootNodes(){const e=this._lView,n=e[ve];return Cf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(e){this._lView[ln]=e}get destroyed(){return 256==(256&this._lView[Ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Jt];if(or(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(r_(e,r),Gm(n,r))}this._attachedToViewContainer=!1}xE(this._lView[ve],this._lView)}onDestroy(e){!function tl(t,e){if(256==(256&t[Ze]))throw new Z(911,!1);null===t[$o]&&(t[$o]=[]),t[$o].push(e)}(this._lView,e)}markForCheck(){Ef(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ze]&=-129}reattach(){this._lView[Ze]|=128}detectChanges(){D_(this._lView[ve],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ij(t,e){pf(t,e,e[Ke],2,null,null)}(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e}}class P4 extends bf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;D_(e[ve],e,e[ln],!1)}checkNoChanges(){}get context(){return null}}class X1 extends I_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=ft(e);return new Tf(n,this.ngModule)}}function eR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class x4{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=xc(r);const i=this.injector.get(e,cw,r);return i!==cw||n===cw?i:this.parentInjector.get(e,n,r)}}class Tf extends o1{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=eR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return eR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function nm(t){return t.map(Ah).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof io?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new x4(e,o):e,a=s.get(a1,null);if(null===a)throw new Z(407,!1);const g={rendererFactory:a,sanitizer:s.get(R3,null),effectManager:s.get(W1,null),afterRenderEventManager:s.get(mw,null)},m=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",A=r?function t4(t,e,n,r){const o=r.get(C1,!1)||n===xi.ShadowDom,s=t.selectRootElement(e,o);return function n4(t){k1(t)}(s),s}(m,r,this.componentDef.encapsulation,s):n_(m,v,function M4(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),U=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let k=null;null!==A&&(k=ow(A,s,!0));const B=Ew(0,null,null,1,0,null,null,null,null,null,null),ee=C_(null,B,null,U,null,null,g,m,s,null,k);let fe,Be;va(ee);try{const Dt=this.componentDef;let mn,ta=null;Dt.findHostDirectiveDefs?(mn=[],ta=new Map,Dt.findHostDirectiveDefs(Dt,mn,ta),mn.push(Dt)):mn=[Dt];const RI=function O4(t,e){const n=t[ve],r=lt;return t[r]=e,Nl(n,r,2,"#host",null)}(ee,A),ere=function k4(t,e,n,r,i,o,s){const a=i[ve];!function F4(t,e,n,r){for(const i of t)e.mergedAttrs=ua(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(T_(e,e.mergedAttrs,!0),null!==n&&NS(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=ow(e,i[Uo]));const l=o.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=C_(i,O1(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&Cw(a,t,r.length-1),b_(i,g),i[t.index]=g}(RI,A,Dt,mn,ee,g,m);Be=bm(B,lt),A&&function L4(t,e,n,r){if(r)Ih(t,n,["ng-version",uw.full]);else{const{attrs:i,classes:o}=function Sh(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ti(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Ih(t,n,i),o&&o.length>0&&xS(t,n,o.join(" "))}}(m,Dt,A,r),void 0!==n&&function U4(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(Be,this.ngContentSelectors,n),fe=function V4(t,e,n,r,i,o){const s=sr(),a=i[ve],u=On(s,i);L1(a,i,s,n,null,r);for(let h=0;h<n.length;h++)kr(Go(i,a,s.directiveStart+h,s),i);U1(a,i,s),u&&kr(u,i);const l=Go(i,a,s.directiveStart+s.componentOffset,s);if(t[ln]=i[ln]=l,null!==o)for(const h of o)h(l,e);return yw(a,s,t),l}(ere,Dt,mn,ta,ee,[B4]),Aw(B,ee,null)}finally{Xh()}return new N4(this.componentType,fe,Rl(Be,ee),ee,Be)}}class N4 extends C3{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new P4(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;Dw(o[ve],o,i,e,n),this.previousInputValues.set(e,n),Ef(ri(this._tNode.index,o))}}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function B4(){const t=sr();sl(re()[ve],t)}function Bt(t){let e=function tR(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Xi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=A_(t.inputs),s.inputTransforms=A_(t.inputTransforms),s.declaredInputs=A_(t.declaredInputs),s.outputs=A_(t.outputs);const a=i.hostBindings;a&&z4(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&$4(t,u),l&&H4(t,l),Ft(t.inputs,i.inputs),Ft(t.declaredInputs,i.declaredInputs),Ft(t.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Ft(s.inputTransforms,i.inputTransforms)),Xi(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Bt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function j4(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ua(i.hostAttrs,n=ua(n,i.hostAttrs))}}(r)}function A_(t){return t===Qi?{}:t===At?[]:t}function $4(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function H4(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function z4(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function oR(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function S_(t){return!!Sw(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Sw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Vr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Qo(t,e,n,r){const i=re();return Vr(i,Ss(),e)&&(Et(),Zo(dn(),i,t,e,n,r)),Qo}function kl(t,e,n,r){return Vr(t,Ss(),n)?e+Se(n)+r:et}function Fl(t,e,n,r,i,o){const a=function Nu(t,e,n,r){const i=Vr(t,e,n);return Vr(t,e+1,r)||i}(t,function no(){return ze.lFrame.bindingIndex}(),n,i);return yo(2),a?e+Se(n)+r+Se(i)+o:et}function We(t,e,n,r,i,o,s,a){const u=re(),l=Et(),h=t+lt,g=l.firstCreatePass?function g$(t,e,n,r,i,o,s,a,u){const l=e.consts,h=Nl(e,t,4,s||null,zo(l,a));ww(e,n,h,zo(l,u)),sl(e,h);const g=h.tView=Ew(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,o,s):l.data[h];to(g,!1);const m=yR(l,u,g,t);ol()&&o_(l,u,m,g),kr(m,u),b_(u,u[h]=j1(m,u,m,g)),Oh(g)&&vw(l,u,g),null!=s&&Iw(u,g,a)}let yR=function vR(t,e,n,r){return qo(!0),e[Ke].createComment("")};function N_(t){return ma(function Kh(){return ze.lFrame.contextLView}(),lt+t)}function de(t,e,n){const r=re();return Vr(r,Ss(),e)&&Fi(Et(),dn(),r,t,e,r[Ke],n,!1),de}function Ow(t,e,n,r,i){const s=i?"class":"style";Dw(t,n,e.inputs[s],s,r)}function y(t,e,n,r){const i=re(),o=Et(),s=lt+t,a=i[Ke],u=o.firstCreatePass?function v$(t,e,n,r,i,o){const s=e.consts,u=Nl(e,t,2,r,zo(s,i));return ww(e,n,u,zo(s,o)),null!==u.attrs&&T_(u,u.attrs,!1),null!==u.mergedAttrs&&T_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],l=IR(o,i,u,a,e,t);i[s]=l;const h=Oh(u);return to(u,!0),NS(a,l,u),32!=(32&u.flags)&&ol()&&o_(o,i,l,u),0===function nE(){return ze.lFrame.elementDepthCount}()&&kr(l,i),function Wh(){ze.lFrame.elementDepthCount++}(),h&&(vw(o,i,u),yw(o,u,i)),null!==r&&Iw(i,u),y}function E(){let t=sr();bu()?Tu():(t=t.parent,to(t,!1));const e=t;(function Am(t){return ze.skipHydrationRootTNode===t})(e)&&function iE(){ze.skipHydrationRootTNode=null}(),function Zh(){ze.lFrame.elementDepthCount--}();const n=Et();return n.firstCreatePass&&(sl(n,t),Nh(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function ul(t){return 0!=(8&t.flags)}(e)&&Ow(n,e,re(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function $m(t){return 0!=(16&t.flags)}(e)&&Ow(n,e,re(),e.stylesWithoutHost,!1),E}function J(t,e,n,r){return y(t,e,n,r),E(),J}let IR=(t,e,n,r,i,o)=>(qo(!0),n_(r,i,function ef(){return ze.lFrame.currentNamespace}()));function O_(t,e,n){const r=re(),i=Et(),o=t+lt,s=i.firstCreatePass?function w$(t,e,n,r,i){const o=e.consts,s=zo(o,r),a=Nl(e,t,8,"ng-container",s);return null!==s&&T_(a,s,!0),ww(e,n,a,zo(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];to(s,!0);const a=wR(i,r,s,t);return r[o]=a,ol()&&o_(i,r,a,s),kr(a,r),Oh(s)&&(vw(i,r,s),yw(i,s,r)),null!=n&&Iw(r,s),O_}function k_(){let t=sr();const e=Et();return bu()?Tu():(t=t.parent,to(t,!1)),e.firstCreatePass&&(sl(e,t),Nh(t)&&e.queries.elementEnd(t)),k_}let wR=(t,e,n,r)=>(qo(!0),ME(e[Ke],""));function Eo(){return re()}function Pf(t){return!!t&&"function"==typeof t.then}function CR(t){return!!t&&"function"==typeof t.subscribe}function Le(t,e,n,r){const i=re(),o=Et(),s=sr();return function TR(t,e,n,r,i,o,s){const a=Oh(r),l=t.firstCreatePass&&z1(t),h=e[ln],g=H1(e);let m=!0;if(3&r.type||s){const R=On(r,e),x=s?s(R):R,U=g.length,k=s?ee=>s(qt(ee[r.index])):r.index;let B=null;if(!s&&a&&(B=function T$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[la],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==B)(B.__ngLastListenerFn__||B).__ngNextListenerFn__=o,B.__ngLastListenerFn__=o,m=!1;else{o=AR(r,e,h,o,!1);const ee=n.listen(x,i,o);g.push(o,ee),l&&l.push(i,k,U,U+1)}}else o=AR(r,e,h,o,!1);const v=r.outputs;let A;if(m&&null!==v&&(A=v[i])){const R=A.length;if(R)for(let x=0;x<R;x+=2){const fe=e[A[x]][A[x+1]].subscribe(o),Be=g.length;g.push(o,fe),l&&l.push(i,r.index,Be,-(Be+1))}}}(o,i,i[Ke],s,t,e,r),Le}function DR(t,e,n,r){try{return mi(6,e,n),!1!==n(r)}catch(i){return G1(t,i),!1}finally{mi(7,e,n)}}function AR(t,e,n,r,i){return function o(s){if(s===Function)return r;Ef(t.componentOffset>-1?ri(t.index,e):e);let u=DR(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=DR(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function dt(t=1){return function uE(t){return(ze.lFrame.contextLView=function cE(t,e){for(;t>0;)e=e[jo],t--;return e}(t,ze.lFrame.contextLView))[ln]}(t)}function kw(t,e,n){return Fw(t,"",e,"",n),kw}function Fw(t,e,n,r,i){const o=re(),s=kl(o,e,n,r);return s!==et&&Fi(Et(),dn(),o,t,s,o[Ke],i,!1),Fw}function F_(t,e){return t<<17|e<<2}function Aa(t){return t>>17&32767}function Vw(t){return 2|t}function Ou(t){return(131068&t)>>2}function Lw(t,e){return-131069&t|e<<2}function Uw(t){return 1|t}function FR(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Aa(o):Ou(o),u=!1;for(;0!==a&&(!1===u||s);){const h=t[a+1];O$(t[a],e)&&(u=!0,t[a+1]=r?Uw(h):Vw(h)),a=r?Aa(h):Ou(h)}u&&(t[n+1]=r?Vw(o):Uw(o))}function O$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&yl(t,e)>=0}const ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function VR(t){return t.substring(ur.key,ur.keyEnd)}function LR(t,e){const n=ur.textEnd;return n===e?-1:(e=ur.keyEnd=function L$(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ur.key=e,n),Hl(t,e,n))}function Hl(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function V_(t,e,n){return wo(t,e,n,!1),V_}function L_(t,e){return wo(t,e,null,!0),L_}function Bw(t){!function Co(t,e,n,r){const i=Et(),o=yo(2);i.firstUpdatePass&&zR(i,null,o,r);const s=re();if(n!==et&&Vr(s,o,n)){const a=i.data[Tr()];if(ZR(a,r)&&!HR(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=Qn(u,n||"")),Ow(i,a,s,n,r)}else!function Z$(t,e,n,r,i,o,s,a){i===et&&(i=At);let u=0,l=0,h=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;null!==h||null!==g;){const m=u<i.length?i[u+1]:void 0,v=l<o.length?o[l+1]:void 0;let R,A=null;h===g?(u+=2,l+=2,m!==v&&(A=g,R=v)):null===g||null!==h&&h<g?(u+=2,A=h):(l+=2,A=g,R=v),null!==A&&GR(t,e,n,r,A,R,s,a),h=u<i.length?i[u]:null,g=l<o.length?o[l]:null}}(i,a,s,s[Ke],s[o+1],s[o+1]=function G$(t,e,n){if(null==n||""===n)return At;const r=[],i=Da(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}(W$,Jo,t,!0)}function Jo(t,e){for(let n=function F$(t){return function BR(t){ur.key=0,ur.keyEnd=0,ur.value=0,ur.valueEnd=0,ur.textEnd=t.length}(t),LR(t,Hl(t,0,ur.textEnd))}(e);n>=0;n=LR(e,n))Oi(t,VR(e),!0)}function wo(t,e,n,r){const i=re(),o=Et(),s=yo(2);o.firstUpdatePass&&zR(o,t,s,r),e!==et&&Vr(i,s,e)&&GR(o,o.data[Tr()],i,i[Ke],t,i[s+1]=function K$(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=xe(Da(t)))),t}(e,n),r,s)}function HR(t,e){return e>=t.expandoStartIndex}function zR(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Tr()],s=HR(t,n);ZR(o,r)&&null===e&&!s&&(e=!1),e=function $$(t,e,n,r){const i=function Du(t){const e=ze.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Mf(n=jw(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=jw(i,t,e,n,r),null===o){let u=function H$(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ou(r))return t[Aa(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=jw(null,t,e,u[1],r),u=Mf(u,e.attrs,r),function z$(t,e,n,r){t[Aa(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function q$(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Mf(r,t[o].hostAttrs,n);return Mf(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function x$(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Aa(s),u=Ou(s);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||yl(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=Aa(t[a+1]);t[r+1]=F_(m,a),0!==m&&(t[m+1]=Lw(t[m+1],r)),t[a+1]=function P$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=F_(a,0),0!==a&&(t[a+1]=Lw(t[a+1],r)),a=r;else t[r+1]=F_(u,0),0===a?a=r:t[u+1]=Lw(t[u+1],r),u=r;l&&(t[r+1]=Vw(t[r+1])),FR(t,h,r,!0),FR(t,h,r,!1),function N$(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&yl(o,e)>=0&&(n[r+1]=Uw(n[r+1]))}(e,h,t,r,o),s=F_(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function jw(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Mf(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Mf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Oi(t,s,!!n||e[++o]))}return void 0===t?null:t}function W$(t,e,n){const r=String(e);""!==r&&!r.includes(" ")&&Oi(t,r,n)}function GR(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function M$(t){return 1==(1&t)}(l)?WR(u,e,n,i,Ou(l),s):void 0;U_(h)||(U_(o)||function R$(t){return 2==(2&t)}(l)&&(o=WR(u,null,n,i,a,s)),function Pj(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ta.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ta.Important),t.setStyle(n,r,i,o))}}(r,s,Jc(Tr(),n),i,o))}function WR(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===et&&(m=g?At:void 0);let v=g?EE(m,r):h===r?m:void 0;if(l&&!U_(v)&&(v=EE(u,r)),U_(v)&&(a=v,s))return a;const A=t[i+1];i=s?Aa(A):Ou(A)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=EE(u,r))}return a}function U_(t){return void 0!==t}function ZR(t,e){return 0!=(t.flags&(e?8:16))}function T(t,e=""){const n=re(),r=Et(),i=t+lt,o=r.firstCreatePass?Nl(r,i,1,e,null):r.data[i],s=KR(r,n,o,e,t);n[i]=s,ol()&&o_(r,n,s,o),to(o,!1)}let KR=(t,e,n,r,i)=>(qo(!0),function t_(t,e){return t.createText(e)}(e[Ke],r));function so(t){return ao("",t,""),so}function ao(t,e,n){const r=re(),i=kl(r,t,e,n);return i!==et&&Os(r,Tr(),i),ao}function B_(t,e,n,r,i){const o=re(),s=Fl(o,t,e,n,r,i);return s!==et&&Os(o,Tr(),s),B_}const ql="en-US";let mP=ql;function zw(t,e,n,r,i){if(t=N(t),Array.isArray(t))for(let o=0;o<t.length;o++)zw(t[o],e,n,r,i);else{const o=Et(),s=re(),a=sr();let u=xu(t)?t:N(t.provide);const l=XS(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(xu(t)||!t.multi){const v=new Rs(l,i,G),A=Gw(u,e,i?h:h+m,g);-1===A?(Ce(C(a,s),o,u),qw(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)):(n[A]=v,s[A]=v)}else{const v=Gw(u,e,h+m,g),A=Gw(u,e,h,h+m),x=A>=0&&n[A];if(i&&!x||!i&&!(v>=0&&n[v])){Ce(C(a,s),o,u);const U=function mH(t,e,n,r,i){const o=new Rs(t,n,G);return o.multi=[],o.index=e,o.componentProviders=0,jP(o,i,r&&!n),o}(i?gH:pH,n.length,i,r,l);!i&&x&&(n[A].providerFactory=U),qw(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),s.push(U)}else qw(o,t,v>-1?v:A,jP(n[i?A:v],l,!i&&r));!i&&r&&x&&n[A].componentProviders++}}}function qw(t,e,n,r){const i=xu(e),o=function s3(t){return!!t.useClass}(e);if(i||o){const u=(o?N(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function jP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Gw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function pH(t,e,n,r){return Ww(this.multi,[])}function gH(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Go(n,n[ve],this.providerFactory.index,r);o=a.slice(0,s),Ww(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Ww(i,o);return o}function Ww(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function yn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function fH(t,e,n){const r=Et();if(r.firstCreatePass){const i=Xi(t);zw(n,r.data,r.blueprint,i,!0),zw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Fu{}class $P{}class Zw extends Fu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new X1(this);const i=Cr(e);this._bootstrapComponents=Ns(i.bootstrap),this._r3Injector=h1(e,n,[{provide:Fu,useValue:this},{provide:I_,useValue:this.componentFactoryResolver},...r],xe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Kw extends $P{constructor(e){super(),this.moduleType=e}create(e){return new Zw(this.moduleType,e,[])}}class HP extends Fu{constructor(e){super(),this.componentFactoryResolver=new X1(this),this.instance=null;const n=new Tl([...e.providers,{provide:Fu,useValue:this},{provide:I_,useValue:this.componentFactoryResolver}],e.parent||f_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Qw(t,e,n=null){return new HP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let vH=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=KS(0,n.type),i=r.length>0?Qw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pe({token:t,providedIn:"environment",factory:()=>new t(he(io))})}return t})();function zP(t){t.getStandaloneInjector=e=>e.get(vH).getOrCreateStandaloneInjector(t)}function Jw(t,e,n,r){return YP(re(),br(),t,e,n,r)}function YP(t,e,n,r,i,o){const s=e+n;return Vr(t,s,i)?function Ko(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function Vf(t,e){const n=t[e];return n===et?void 0:n}(t,s+1)}function rM(t,e,n){const r=t+lt,i=re(),o=ma(i,r);return function Lf(t,e){return t[ve].data[e].pure}(i,r)?YP(i,br(),e,o.transform,n,o):o.transform(n)}function $H(){return this._results[Symbol.iterator]()}class Xw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new kn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Xw.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=$H)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const r=this;r.dirty=!1;const i=function ro(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function NB(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zH(t,e,n,r=!0){const i=e[ve];if(function wj(t,e,n,r){const i=mr+r,o=n.length;r>0&&(n[i-1][Ni]=e),r<o-mr?(e[Ni]=n[i],QA(n,mr+r,e)):(n.push(e),e[Ni]=null),e[Jt]=n;const s=e[ws];null!==s&&n!==s&&function Cj(t,e){const n=t[fa];e[An]!==e[Jt][Jt][An]&&(t[om]=!0),null===n?t[fa]=[e]:n.push(e)}(s,e);const a=e[pi];null!==a&&a.insertView(t),e[Ze]|=128}(i,e,t,n),r){const o=FE(n,t),s=e[Ke],a=i_(s,t[Ji]);null!==a&&function vj(t,e,n,r,i,o){r[Yt]=i,r[gr]=e,pf(t,r,n,1,i,o)}(i,t[gr],s,e,a,o)}}let ks=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=WH}return t})();const qH=ks,GH=class extends qH{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function HH(t,e,n,r){const i=e.tView,a=C_(t,i,n,4096&t[Ze]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ws]=t[e.index];const l=t[pi];return null!==l&&(a[pi]=l.createEmbeddedView(i)),Aw(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new bf(i)}};function WH(){return q_(sr(),re())}function q_(t,e){return 4&t.type?new GH(e,t,Rl(t,e)):null}let bo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=XH}return t})();function XH(){return lM(sr(),re())}const e6=bo,uM=class extends e6{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Rl(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){const e=oe(this._hostTNode,this._hostLView);if(nf(e)){const n=Ru(e,this._hostLView),r=Su(e);return new _r(n[ve].data[r+8],n)}return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=cM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-mr}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,o){const s=e&&!function uf(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const R=n||{};a=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef}const u=s?e:new Tf(ft(e)),l=r||this.parentInjector;if(!o&&null==u.ngModule){const x=(s?l:this.parentInjector).get(io,null);x&&(o=x)}ft(u.componentType??{});const v=u.create(l,i,null,o);return this.insertImpl(v.hostView,a,false),v}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function eE(t){return or(t[Jt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[Jt],h=new uM(l,l[gr],l[Jt]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return zH(a,i,s,!r),e.attachToViewContainerRef(),QA(e0(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=cM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=r_(this._lContainer,n);r&&(Gm(e0(this._lContainer),n),xE(r[ve],r))}detach(e){const n=this._adjustIndex(e,-1),r=r_(this._lContainer,n);return r&&null!=Gm(e0(this._lContainer),n)?new bf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function cM(t){return t[8]}function e0(t){return t[8]||(t[8]=[])}function lM(t,e){let n;const r=e[t.index];return or(r)?n=r:(n=j1(r,e,null,t),e[t.index]=n,b_(e,n)),dM(n,e,t,r),new uM(n,t,e)}let dM=function hM(t,e,n,r){if(t[Ji])return;let i;i=8&n.type?qt(r):function t6(t,e){const n=t[Ke],r=n.createComment(""),i=On(e,t);return Mu(n,i_(n,i),r,function Aj(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ji]=i};class t0{constructor(e){this.queryList=e,this.matches=null}clone(){return new t0(this.queryList)}setDirty(){this.queryList.setDirty()}}class n0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new n0(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==yM(e,n).matches&&this.queries[n].setDirty()}}class fM{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}}class r0{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new r0(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class o0{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new o0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,n,i6(n,o)),this.matchTNodeWithReadOption(e,n,Ca(n,e,o,!1,!1))}else r===ks?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ca(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===ki||i===bo||i===ks&&4&n.type)this.addMatch(n.index,-2);else{const o=Ca(n,e,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function i6(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function s6(t,e,n,r){return-1===n?function o6(t,e){return 11&t.type?Rl(t,e):4&t.type?q_(t,e):null}(e,t):-2===n?function a6(t,e,n){return n===ki?Rl(e,t):n===ks?q_(e,t):n===bo?lM(e,t):void 0}(t,e,r):Go(t,t[ve],n,e)}function pM(t,e,n,r){const i=e[pi].queries[r];if(null===i.matches){const o=t.data,s=n.matches,a=[];for(let u=0;u<s.length;u+=2){const l=s[u];a.push(l<0?null:s6(e,o[l],s[u+1],n.metadata.read))}i.matches=a}return i.matches}function s0(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=pM(t,e,i,n);for(let a=0;a<o.length;a+=2){const u=o[a];if(u>0)r.push(s[a/2]);else{const l=o[a+1],h=e[-u];for(let g=mr;g<h.length;g++){const m=h[g];m[ws]===m[Jt]&&s0(m[ve],m,l,r)}if(null!==h[fa]){const g=h[fa];for(let m=0;m<g.length;m++){const v=g[m];s0(v[ve],v,l,r)}}}}}return r}function Uf(t){const e=re(),n=Et(),r=xm();Jh(r+1);const i=yM(n,r);if(t.dirty&&function qh(t){return 4==(4&t[Ze])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?s0(n,e,r,[]):pM(n,e,i,r);t.reset(o,A3),t.notifyOnChanges()}return!0}return!1}function W_(t,e,n){const r=Et();r.firstCreatePass&&(function _M(t,e,n){null===t.queries&&(t.queries=new r0),t.queries.track(new o0(e,n))}(r,new fM(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),function mM(t,e,n){const r=new Xw(4==(4&n));(function o4(t,e,n,r){const i=H1(e);i.push(n),t.firstCreatePass&&z1(t).push(r,i.length-1)})(t,e,r,r.destroy),null===e[pi]&&(e[pi]=new n0),e[pi].queries.push(new t0(r))}(r,re(),e)}function Bf(){return function u6(t,e){return t[pi].queries[e].queryList}(re(),xm())}function yM(t,e){return t.queries.getByIndex(e)}const h0=new me("Application Initializer");let f0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Te(h0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Pf(o))n.push(o);else if(CR(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Fs=new me("LocaleId",{providedIn:"root",factory:()=>Te(Fs,st.Optional|st.SkipSelf)||function M6(){return typeof $localize<"u"&&$localize.locale||ql}()});let FM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new I(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class O6{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let VM=(()=>{class t{compileModuleSync(n){return new Kw(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=Ns(Cr(n).declarations).reduce((s,a)=>{const u=ft(a);return u&&s.push(new Tf(u)),s},[]);return new O6(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const jM=new me(""),Q_=new me("");let y0,m0=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,y0||(function n9(t){y0=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(he(Mt),he(_0),he(Q_))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),_0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return y0?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Sa=null;const $M=new me("AllowMultipleToken"),v0=new me("PlatformDestroyListeners"),I0=new me("appBootstrapListener");class zM{constructor(e,n){this.name=e,this.token=n}}function GM(t,e,n=[]){const r=`Platform: ${e}`,i=new me(r);return(o=[])=>{let s=E0();if(!s||s.injector.get($M,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function o9(t){if(Sa&&!Sa.get($M,!1))throw new Z(400,!1);(function HM(){!function qI(t){zI=t}(()=>{throw new Z(600,!1)})})(),Sa=t;const e=t.get(ZM);(function qM(t){t.get(e1,null)?.forEach(n=>n())})(t)}(function WM(t=[],e){return Fr.create({name:e,providers:[{provide:ZE,useValue:"platform"},{provide:v0,useValue:new Set([()=>Sa=null])},...t]})}(a,r))}return function a9(t){const e=E0();if(!e)throw new Z(401,!1);return e}()}}function E0(){return Sa?.get(ZM)??null}let ZM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function u9(t="zone.js",e){return"noop"===t?new j3:"zone.js"===t?new Mt(e):t}(r?.ngZone,function KM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function yH(t,e,n){return new Zw(t,e,n)}(n.moduleType,this.injector,function ex(t){return[{provide:Mt,useFactory:t},{provide:yf,multi:!0,useFactory:()=>{const e=Te(l9,{optional:!0});return()=>e.initialize()}},{provide:XM,useFactory:c9},{provide:_1,useFactory:y1}]}(()=>i)),s=o.injector.get(xs,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{Y_(this._modules,o),a.unsubscribe()})}),function QM(t,e,n){try{const r=n();return Pf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(f0);return a.runInitializers(),a.donePromise.then(()=>(function _P(t){fr(t,"Expected localeId to be defined"),"string"==typeof t&&(mP=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Fs,ql)||ql),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=YM({},r);return function r9(t,e,n){const r=new Kw(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Zl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Z(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(v0,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(he(Fr))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function YM(t,e){return Array.isArray(e)?e.reduce(YM,t):{...t,...e}}let Zl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Te(XM),this.zoneIsStable=Te(_1),this.componentTypes=[],this.components=[],this.isStable=Te(FM).hasPendingTasks.pipe(Ae(n=>n?P(!1):this.zoneIsStable),He(),Y()),this._injector=Te(io)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof o1;if(!this._injector.get(f0).done)throw!i&&function ca(t){const e=ft(t)||rr(t)||ir(t);return null!==e&&e.standalone}(n),new Z(405,!1);let s;s=i?n:this._injector.get(I_).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function i9(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Fu),l=s.create(Fr.NULL,[],r||s.selector,a),h=l.location.nativeElement,g=l.injector.get(jM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Y_(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Z(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Y_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(I0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Y_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Z(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Y_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const XM=new me("",{providedIn:"root",factory:()=>Te(xs).handleError.bind(void 0)});function c9(){const t=Te(Mt),e=Te(xs);return n=>t.runOutsideAngular(()=>e.handleError(n))}let l9=(()=>{class t{constructor(){this.zone=Te(Mt),this.applicationRef=Te(Zl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let J_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=h9}return t})();function h9(t){return function f9(t,e,n){if(bs(t)&&!n){const r=ri(t.index,e);return new bf(r,r)}return 47&t.type?new bf(e[An],e):null}(sr(),re(),16==(16&t))}class ox{constructor(){}supports(e){return S_(e)}create(e){return new v9(e)}}const y9=(t,e)=>e;class v9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||y9}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<ax(r,i,o)?n:r,a=ax(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const v=m<o.length?o[m]:o[m]=0,A=v+m;h<=A&&A<l&&(o[m]=v+1)}o[s.previousIndex]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!S_(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function Y4(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new I9(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new sx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class I9{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class E9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class sx{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new E9,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ax(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ux{constructor(){}supports(e){return e instanceof Map||Sw(e)}create(){return new w9}}class w9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||Sw(e)))throw new Z(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new C9(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class C9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cx(){return new ty([new ox])}let ty=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:cx});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||cx()),deps:[[t,new Zm,new _i]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Z(901,!1)}}return t})();function lx(){return new Hf([new ux])}let Hf=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:lx});constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||lx()),deps:[[t,new Zm,new _i]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Z(901,!1)}}return t})();const D9=GM(null,"core",[]);let A9=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(he(Zl))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({})}return t})();function Kl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let A0=null;function Ra(){return A0}class j9{}const uo=new me("DocumentToken");let S0=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Te(H9)},providedIn:"platform"})}return t})();const $9=new me("Location Initialized");let H9=(()=>{class t extends S0{constructor(){super(),this._doc=Te(uo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ra().getBaseHref(this._doc)}onPopState(n){const r=Ra().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Ra().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function R0(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function vx(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Vs(t){return t&&"?"!==t[0]?"?"+t:t}let Lu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Te(Ex)},providedIn:"root"})}return t})();const Ix=new me("appBaseHref");let Ex=(()=>{class t extends Lu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Te(uo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return R0(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Vs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Vs(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Vs(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(he(S0),he(Ix,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),z9=(()=>{class t extends Lu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=R0(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Vs(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Vs(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(he(S0),he(Ix,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),P0=(()=>{class t{constructor(n){this._subject=new kn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function W9(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(vx(wx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Vs(r))}normalize(n){return t.stripTrailingSlash(function G9(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,wx(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Vs;static#t=this.joinWithSlash=R0;static#n=this.stripTrailingSlash=vx;static#r=this.\u0275fac=function(r){return new(r||t)(he(Lu))};static#i=this.\u0275prov=Pe({token:t,factory:function(){return function q9(){return new P0(he(Lu))}()},providedIn:"root"})}return t})();function wx(t){return t.replace(/\/index.html$/,"")}class Oz{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uu=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Oz(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),Nx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Nx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(G(bo),G(ks),G(ty))};static#t=this.\u0275dir=$e({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function Nx(t,e){t.context.$implicit=e.item}let Do=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new kz,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Ox("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Ox("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(G(bo),G(ks))};static#t=this.\u0275dir=$e({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class kz{constructor(){this.$implicit=null,this.ngIf=null}}function Ox(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${xe(e)}'.`)}let Fx=(()=>{class t{constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){const[i,o]=n.split("."),s=-1===i.indexOf("-")?void 0:Ta.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static#e=this.\u0275fac=function(r){return new(r||t)(G(ki),G(Hf),G(Ms))};static#t=this.\u0275dir=$e({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return t})();class Uz{createSubscription(e,n){return vm(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){vm(()=>e.unsubscribe())}}class Bz{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const jz=new Bz,$z=new Uz;let Vx=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Pf(n))return jz;if(CR(n))return $z;throw function Ao(t,e){return new Z(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(G(J_,16))};static#t=this.\u0275pipe=pr({name:"async",type:t,pure:!1,standalone:!0})}return t})(),sq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({})}return t})();function fy(t){return"server"===t}let lq=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new dq(he(uo),window)})}return t})();class dq{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function hq(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Fq extends j9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class W0 extends Fq{static makeCurrent(){!function B9(t){A0||(A0=t)}(new W0)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Vq(){return Wf=Wf||document.querySelector("base"),Wf?Wf.getAttribute("href"):null}();return null==n?null:function Lq(t){my=my||document.createElement("a"),my.setAttribute("href",t);const e=my.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Wf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Mz(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let my,Wf=null,Bq=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Z0=new me("EventManagerPlugins");let zx=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(he(Z0),he(Mt))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class qx{constructor(e){this._doc=e}}const K0="ng-app-id";let Gx=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=fy(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${K0}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(K0),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(K0,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(he(uo),he(p_),he(t1,8),he(Wo))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Q0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Y0=/%COMP%/g,zq=new me("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Zx(t,e){return e.map(n=>n.replace(Y0,t))}let Kx=(()=>{class t{constructor(n,r,i,o,s,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=fy(a),this.defaultRenderer=new J0(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===xi.ShadowDom&&(r={...r,encapsulation:xi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof Yx?i.applyToHost(n):i instanceof X0&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case xi.Emulated:o=new Yx(u,l,r,this.appId,h,s,a,g);break;case xi.ShadowDom:return new Zq(u,l,n,r,s,a,this.nonce,g);default:o=new X0(u,l,r,h,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(he(zx),he(Gx),he(p_),he(zq),he(uo),he(Wo),he(Mt),he(t1))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class J0{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Q0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Qx(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Qx(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Q0[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Q0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ta.DashCase|Ta.Important)?e.style.setProperty(n,r,i&Ta.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ta.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Ra().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Qx(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Zq extends J0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Zx(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class X0 extends J0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Zx(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Yx extends X0{constructor(e,n,r,i,o,s,a,u){const l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=function qq(t){return"_ngcontent-%COMP%".replace(Y0,t)}(l),this.hostAttr=function Gq(t){return"_nghost-%COMP%".replace(Y0,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let Kq=(()=>{class t extends qx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(he(uo))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Jx=["alt","control","meta","shift"],Qq={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yq={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Jq=(()=>{class t extends qx{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ra().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Jx.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=Qq[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Jx.forEach(s=>{s!==i&&(0,Yq[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(he(uo))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const eN=[{provide:Wo,useValue:"browser"},{provide:e1,useValue:function Xq(){W0.makeCurrent()},multi:!0},{provide:uo,useFactory:function t8(){return function kj(t){UE=t}(document),document},deps:[]}],n8=GM(D9,"browser",eN),r8=new me(""),tN=[{provide:Q_,useClass:class Uq{addToWindow(e){Vt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Z(5103,!1);return o},Vt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Vt.getAllAngularRootElements=()=>e.getAllRootElements(),Vt.frameworkStabilizers||(Vt.frameworkStabilizers=[]),Vt.frameworkStabilizers.push(r=>{const i=Vt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Ra().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:jM,useClass:m0,deps:[Mt,_0,Q_]},{provide:m0,useClass:m0,deps:[Mt,_0,Q_]}],nN=[{provide:ZE,useValue:"root"},{provide:xs,useFactory:function e8(){return new xs},deps:[]},{provide:Z0,useClass:Kq,multi:!0,deps:[uo,Mt,Wo]},{provide:Z0,useClass:Jq,multi:!0,deps:[uo]},Kx,Gx,zx,{provide:a1,useExisting:Kx},{provide:class fq{},useClass:Bq,deps:[]},[]];let i8=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:p_,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(he(r8,12))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({providers:[...nN,...tN],imports:[sq,A9]})}return t})(),rN=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(he(uo))};static#t=this.\u0275prov=Pe({token:t,factory:function(r){let i=null;return i=r?new r:function s8(){return new rN(he(uo))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:h8}=Array,{getPrototypeOf:f8,prototype:p8,keys:g8}=Object;function aN(t){if(1===t.length){const e=t[0];if(h8(e))return{args:e,keys:null};if(function m8(t){return t&&"object"==typeof t&&f8(t)===p8}(e)){const n=g8(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:_8}=Array;function uN(t){return Ee(e=>function y8(t,e){return _8(e)?t(...e):t(e)}(t,e))}function cN(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function tC(...t){const e=Mi(t),n=Zi(t),{args:r,keys:i}=aN(t);if(0===r.length)return w([],e);const o=new Xe(function v8(t,e,n=Cn){return r=>{lN(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)lN(e,()=>{const l=w(t[u],e);let h=!1;l.subscribe(ge(r,g=>{o[u]=g,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>cN(i,s):Cn));return n?o.pipe(uN(n)):o}function lN(t,e,n){t?Zr(n,t,e):e()}const _y=K(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function nC(...t){return function I8(){return Kr(1)}()(w(t,Mi(t)))}function dN(t){return new Xe(e=>{vt(t()).subscribe(e)})}function Zf(t,e){const n=D(t)?t:()=>t,r=i=>i.error(n());return new Xe(e?i=>e.schedule(r,0,i):r)}function rC(){return te((t,e)=>{let n=null;t._refCount++;const r=ge(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class hN extends Xe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ne(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bt;const n=this.getSubject();e.add(this.source.subscribe(ge(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bt.EMPTY)}return e}refCount(){return rC()(this)}}function Yl(t){return t<=0?()=>bn:te((e,n)=>{let r=0;e.subscribe(ge(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function yy(...t){const e=Mi(t);return te((n,r)=>{(e?nC(t,n,e):nC(t,n)).subscribe(r)})}function So(t,e){return te((n,r)=>{let i=0;n.subscribe(ge(r,o=>t.call(e,o,i++)&&r.next(o)))})}function vy(t){return te((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function fN(t=E8){return te((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function E8(){return new _y}function Ma(t,e){const n=arguments.length>=2;return r=>r.pipe(t?So((i,o)=>t(i,o,r)):Cn,Yl(1),n?vy(e):fN(()=>new _y))}function Kf(t,e){return D(e)?Nt(t,e,1):Nt(t,1)}function Ar(t,e,n){const r=D(t)||e||n?{next:t,error:e,complete:n}:t;return r?te((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(ge(o,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),o.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Cn}function Bu(t){return te((e,n)=>{let o,r=null,i=!1;r=e.subscribe(ge(n,void 0,void 0,s=>{o=vt(t(s,Bu(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Iy(t,e){return te(function w8(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ge(s,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function iC(t){return t<=0?()=>bn:te((e,n)=>{let r=[];e.subscribe(ge(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function oC(t){return te((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const nt="primary",Qf=Symbol("RouteTitle");class D8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Jl(t){return new D8(t)}function A8(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Xo(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!pN(t[i],e[i]))return!1;return!0}function pN(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function gN(t){return t.length>0?t[t.length-1]:null}function xa(t){return function d8(t){return!!t&&(t instanceof Xe||D(t.lift)&&D(t.subscribe))}(t)?t:Pf(t)?w(Promise.resolve(t)):P(t)}const R8={exact:function yN(t,e,n){if(!ju(t.segments,e.segments)||!Ey(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!yN(t.children[r],e.children[r],n))return!1;return!0},subset:vN},mN={exact:function P8(t,e){return Xo(t,e)},subset:function M8(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>pN(t[n],e[n]))},ignored:()=>!0};function _N(t,e,n){return R8[n.paths](t.root,e.root,n.matrixParams)&&mN[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function vN(t,e,n){return IN(t,e,e.segments,n)}function IN(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!ju(i,n)||e.hasChildren()||!Ey(i,n,r))}if(t.segments.length===n.length){if(!ju(t.segments,n)||!Ey(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!vN(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(ju(t.segments,i)&&Ey(t.segments,i,r)&&t.children[nt])&&IN(t.children[nt],e,o,r)}}function Ey(t,e,n){return e.every((r,i)=>mN[n](t[i].parameters,r.parameters))}class Xl{constructor(e=new jt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jl(this.queryParams)),this._queryParamMap}toString(){return O8.serialize(this)}}class jt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wy(this)}}class Yf{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Jl(this.parameters)),this._parameterMap}toString(){return CN(this)}}function ju(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Jf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new sC},providedIn:"root"})}return t})();class sC{parse(e){const n=new q8(e);return new Xl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Xf(e.root,!0)}`,r=function V8(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Cy(n)}=${Cy(i)}`).join("&"):`${Cy(n)}=${Cy(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function k8(t){return encodeURI(t)}(e.fragment)}`:""}`}}const O8=new sC;function wy(t){return t.segments.map(e=>CN(e)).join("/")}function Xf(t,e){if(!t.hasChildren())return wy(t);if(e){const n=t.children[nt]?Xf(t.children[nt],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==nt&&r.push(`${i}:${Xf(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function N8(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===nt&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==nt&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===nt?[Xf(t.children[nt],!1)]:[`${i}:${Xf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[nt]?`${wy(t)}/${n[0]}`:`${wy(t)}/(${n.join("//")})`}}function EN(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cy(t){return EN(t).replace(/%3B/gi,";")}function aC(t){return EN(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function by(t){return decodeURIComponent(t)}function wN(t){return by(t.replace(/\+/g,"%20"))}function CN(t){return`${aC(t.path)}${function F8(t){return Object.keys(t).map(e=>`;${aC(e)}=${aC(t[e])}`).join("")}(t.parameters)}`}const L8=/^[^\/()?;#]+/;function uC(t){const e=t.match(L8);return e?e[0]:""}const U8=/^[^\/()?;=#]+/,j8=/^[^=?&#]+/,H8=/^[^&#]+/;class q8{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[nt]=new jt(e,n)),r}parseSegment(){const e=uC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new Yf(by(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function B8(t){const e=t.match(U8);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=uC(this.remaining);i&&(r=i,this.capture(r))}e[by(n)]=by(r)}parseQueryParam(e){const n=function $8(t){const e=t.match(j8);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function z8(t){const e=t.match(H8);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=wN(n),o=wN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=uC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=nt);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[nt]:new jt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}}function bN(t){return t.segments.length>0?new jt([],{[nt]:t}):t}function TN(t){const e={};for(const r of Object.keys(t.children)){const o=TN(t.children[r]);if(r===nt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function G8(t){if(1===t.numberOfChildren&&t.children[nt]){const e=t.children[nt];return new jt(t.segments.concat(e.segments),e.children)}return t}(new jt(t.segments,e))}function $u(t){return t instanceof Xl}function DN(t){let e;const i=bN(function n(o){const s={};for(const u of o.children){const l=n(u);s[u.outlet]=l}const a=new jt(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function AN(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return cC(i,i,i,n,r);const o=function Z8(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new RN(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new RN(n,e,r)}(e);if(o.toRoot())return cC(i,i,new jt([],{}),n,r);const s=function K8(t,e,n){if(t.isAbsolute)return new Dy(e,!0,0);if(!n)return new Dy(e,!1,NaN);if(null===n.parent)return new Dy(n,!0,0);const r=Ty(t.commands[0])?0:1;return function Q8(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Dy(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?tp(s.segmentGroup,s.index,o.commands):PN(s.segmentGroup,s.index,o.commands);return cC(i,s.segmentGroup,a,n,r)}function Ty(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ep(t){return"object"==typeof t&&null!=t&&t.outlets}function cC(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),s=t===e?n:SN(t,e,n);const a=bN(TN(s));return new Xl(a,o,i)}function SN(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:SN(o,e,n)}),new jt(t.segments,r)}class RN{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ty(r[0]))throw new Z(4003,!1);const i=r.find(ep);if(i&&i!==gN(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dy{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function PN(t,e,n){if(t||(t=new jt([],{})),0===t.segments.length&&t.hasChildren())return tp(t,e,n);const r=function J8(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(ep(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!xN(u,l,s))return o;r+=2}else{if(!xN(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new jt(t.segments.slice(0,r.pathIndex),{});return o.children[nt]=new jt(t.segments.slice(r.pathIndex),t.children),tp(o,0,i)}return r.match&&0===i.length?new jt(t.segments,{}):r.match&&!t.hasChildren()?lC(t,e,n):r.match?tp(t,0,i):lC(t,e,n)}function tp(t,e,n){if(0===n.length)return new jt(t.segments,{});{const r=function Y8(t){return ep(t[0])?t[0].outlets:{[nt]:t}}(n),i={};if(Object.keys(r).some(o=>o!==nt)&&t.children[nt]&&1===t.numberOfChildren&&0===t.children[nt].segments.length){const o=tp(t.children[nt],e,n);return new jt(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=PN(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new jt(t.segments,i)}}function lC(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(ep(o)){const u=X8(o.outlets);return new jt(r,u)}if(0===i&&Ty(n[0])){r.push(new Yf(t.segments[e].path,MN(n[0]))),i++;continue}const s=ep(o)?o.outlets[nt]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ty(a)?(r.push(new Yf(s,MN(a))),i+=2):(r.push(new Yf(s,{})),i++)}return new jt(r,{})}function X8(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=lC(new jt([],{}),0,r))}),e}function MN(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function xN(t,e,n){return t==n.path&&Xo(e,n.parameters)}const np="imperative";class es{constructor(e,n){this.id=e,this.url=n}}class Ay extends es{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Na extends es{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rp extends es{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ed extends es{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class Sy extends es{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class NN extends es{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eG extends es{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tG extends es{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nG extends es{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rG extends es{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iG{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oG{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sG{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aG{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uG{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cG{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ON{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class dC{}class hC{constructor(e){this.url=e}}class lG{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ip,this.attachRef=null}}let ip=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new lG,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=fC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=fC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=pC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pC(e,this._root).map(n=>n.value)}}function fC(t,e){if(t===e.value)return e;for(const n of e.children){const r=fC(t,n);if(r)return r}return null}function pC(t,e){if(t===e.value)return[e];for(const n of e.children){const r=pC(t,n);if(r.length)return r.unshift(e),r}return[]}class Bs{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function td(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class FN extends kN{constructor(e,n){super(e),this.snapshot=n,gC(this,e)}toString(){return this.snapshot.toString()}}function VN(t,e){const n=function dG(t,e){const s=new Ry([],{},{},"",{},nt,e,null,{});return new UN("",new Bs(s,[]))}(0,e),r=new I([new Yf("",{})]),i=new I({}),o=new I({}),s=new I({}),a=new I(""),u=new Hu(r,i,s,a,o,nt,e,n.root);return u.snapshot=n.root,new FN(new Bs(u,[]),n)}class Hu{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ee(l=>l[Qf]))??P(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ee(e=>Jl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ee(e=>Jl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LN(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function hG(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ry{get title(){return this.data?.[Qf]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class UN extends kN{constructor(e,n){super(n),this.url=e,gC(this,n)}toString(){return BN(this._root)}}function gC(t,e){e.value._routerState=t,e.children.forEach(n=>gC(t,n))}function BN(t){const e=t.children.length>0?` { ${t.children.map(BN).join(", ")} } `:"";return`${t.value}${e}`}function mC(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Xo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Xo(e.params,n.params)||t.paramsSubject.next(n.params),function S8(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xo(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Xo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function _C(t,e){const n=Xo(t.params,e.params)&&function x8(t,e){return ju(t,e)&&t.every((n,r)=>Xo(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||_C(t.parent,e.parent))}let Py=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=nt,this.activateEvents=new kn,this.deactivateEvents=new kn,this.attachEvents=new kn,this.detachEvents=new kn,this.parentContexts=Te(ip),this.location=Te(bo),this.changeDetector=Te(J_),this.environmentInjector=Te(io),this.inputBinder=Te(My,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new fG(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=$e({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[gi]})}return t})();class fG{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Hu?this.route:e===ip?this.childContexts:this.parent.get(e,n)}}const My=new me("");let jN=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=tC([r.queryParams,r.params,r.data]).pipe(Ae(([o,s,a],u)=>(a={...o,...s,...a},0===u?P(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function U9(t){const e=ft(t);if(!e)return null;const n=new Tf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function op(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function gG(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return op(t,r,i);return op(t,r)})}(t,e,n);return new Bs(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>op(t,a)),s}}const r=function mG(t){return new Hu(new I(t.url),new I(t.params),new I(t.queryParams),new I(t.fragment),new I(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>op(t,o));return new Bs(r,i)}}const yC="ngNavigationCancelingError";function $N(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=$u(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HN(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function HN(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[yC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function zN(t){return t&&t[yC]}let qN=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["ng-component"]],standalone:!0,features:[zP],decls:1,vars:0,template:function(r,i){1&r&&J(0,"router-outlet")},dependencies:[Py],encapsulation:2})}return t})();function vC(t){const e=t.children&&t.children.map(vC),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==nt&&(n.component=qN),n}function Ro(t){return t.outlet||nt}function sp(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class bG{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),mC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=td(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=td(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=td(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=td(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cG(o.value.snapshot))}),e.children.length&&this.forwardEvent(new aG(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(mC(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),mC(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=sp(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class GN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xy{constructor(e,n){this.component=e,this.route=n}}function TG(t,e,n){const r=t._root;return ap(r,e?e._root:null,n,[r.value])}function nd(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Wg(t){return null!==Tc(t)}(t)?e.get(t):t:r}function ap(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=td(e);return t.children.forEach(s=>{(function AG(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function SG(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ju(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ju(t.url,e.url)||!Xo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_C(t,e)||!Xo(t.queryParams,e.queryParams);default:return!_C(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new GN(r)):(o.data=s.data,o._resolvedData=s._resolvedData),ap(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xy(a.outlet.component,s))}else s&&up(e,a,i),i.canActivateChecks.push(new GN(r)),ap(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>up(a,n.getContext(s),i)),i}function up(t,e,n){const r=td(t),i=t.value;Object.entries(r).forEach(([o,s])=>{up(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new xy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function cp(t){return"function"==typeof t}function WN(t){return t instanceof _y||"EmptyError"===t?.name}const Ny=Symbol("INITIAL_VALUE");function rd(){return Ae(t=>tC(t.map(e=>e.pipe(Yl(1),yy(Ny)))).pipe(Ee(e=>{for(const n of e)if(!0!==n){if(n===Ny)return Ny;if(!1===n||n instanceof Xl)return n}return!0}),So(e=>e!==Ny),Yl(1)))}function ZN(t){return function Di(...t){return Ai(t)}(Ar(e=>{if($u(e))throw $N(0,e)}),Ee(e=>!0===e))}class Oy{constructor(e){this.segmentGroup=e||null}}class KN{constructor(e){this.urlTree=e}}function id(t){return Zf(new Oy(t))}function QN(t){return Zf(new KN(t))}class ZG{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new Z(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return P(r);if(i.numberOfChildren>1||!i.children[nt])return Zf(new Z(4e3,!1));i=i.children[nt]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Xl(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new jt(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const IC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KG(t,e,n,r,i){const o=EC(t,e,n);return o.matched?(r=function yG(t,e){return t.providers&&!t._injector&&(t._injector=Qw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function qG(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?P(i.map(s=>{const a=nd(s,t);return xa(function OG(t){return t&&cp(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(rd(),ZN()):P(!0)}(r,e,n).pipe(Ee(s=>!0===s?o:{...IC}))):P(o)}function EC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...IC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||A8)(n,t,e);if(!i)return{...IC};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function YN(t,e,n,r){return n.length>0&&function JG(t,e,n){return n.some(r=>ky(t,e,r)&&Ro(r)!==nt)}(t,n,r)?{segmentGroup:new jt(e,YG(r,new jt(n,t.children))),slicedSegments:[]}:0===n.length&&function XG(t,e,n){return n.some(r=>ky(t,e,r))}(t,n,r)?{segmentGroup:new jt(t.segments,QG(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new jt(t.segments,t.children),slicedSegments:n}}function QG(t,e,n,r,i){const o={};for(const s of r)if(ky(t,n,s)&&!i[Ro(s)]){const a=new jt([],{});o[Ro(s)]=a}return{...i,...o}}function YG(t,e){const n={};n[nt]=e;for(const r of t)if(""===r.path&&Ro(r)!==nt){const i=new jt([],{});n[Ro(r)]=i}return n}function ky(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class rW{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new ZG(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,!1)}recognize(){const e=YN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,nt).pipe(Bu(n=>{if(n instanceof KN)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Oy?this.noMatchError(n):n}),Ee(n=>{const r=new Ry([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nt,this.rootComponentType,null,{}),i=new Bs(r,n),o=new UN("",i),s=function W8(t,e,n=null,r=null){return AN(DN(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,nt).pipe(Bu(r=>{throw r instanceof Oy?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=LN(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return w(i).pipe(Kf(o=>{const s=r.children[o],a=function wG(t,e){const n=t.filter(r=>Ro(r)===e);return n.push(...t.filter(r=>Ro(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),Iy((o,s)=>(o.push(...s),o)),vy(null),function C8(t,e){const n=arguments.length>=2;return r=>r.pipe(t?So((i,o)=>t(i,o,r)):Cn,iC(1),n?vy(e):fN(()=>new _y))}(),Nt(o=>{if(null===o)return id(r);const s=JN(o);return function iW(t){t.sort((e,n)=>e.value.outlet===nt?-1:n.value.outlet===nt?1:e.value.outlet.localeCompare(n.value.outlet))}(s),P(s)}))}processSegment(e,n,r,i,o,s){return w(n).pipe(Kf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Bu(u=>{if(u instanceof Oy)return P(null);throw u}))),Ma(a=>!!a),Bu(a=>{if(WN(a))return function tW(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?P([]):id(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function eW(t,e,n,r){return!!(Ro(t)===r||r!==nt&&ky(e,n,t))&&("**"===t.path||EC(e,t,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):id(i):id(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?QN(o):this.applyRedirects.lineralizeSegments(r,o).pipe(Nt(s=>{const a=new jt(s,{});return this.processSegment(e,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=EC(n,i,o);if(!a)return id(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?QN(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Nt(m=>this.processSegment(e,r,n,m.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?gN(i).parameters:{};a=P({snapshot:new Ry(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XN(r),Ro(r),r.component??r._loadedComponent??null,r,eO(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=KG(n,r,i,e).pipe(Ee(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new Ry(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XN(r),Ro(r),r.component??r._loadedComponent??null,r,eO(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(Ae(u=>null===u?id(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Ae(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:v}=u,{segmentGroup:A,slicedSegments:R}=YN(n,m,v,l);if(0===R.length&&A.hasChildren())return this.processChildren(h,l,A).pipe(Ee(U=>null===U?null:[new Bs(g,U)]));if(0===l.length&&0===R.length)return P([new Bs(g,[])]);const x=Ro(r)===o;return this.processSegment(h,l,A,R,x?nt:o,!0).pipe(Ee(U=>[new Bs(g,U)]))}))))}getChildConfig(e,n,r){return n.children?P({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?P({routes:n._loadedRoutes,injector:n._loadedInjector}):function zG(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?P(!0):P(i.map(s=>{const a=nd(s,t);return xa(function PG(t){return t&&cp(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(rd(),ZN())}(e,n,r).pipe(Nt(i=>i?this.configLoader.loadChildren(e,n).pipe(Ar(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function WG(t){return Zf(HN(!1,3))}())):P({routes:[],injector:e})}}function oW(t){const e=t.value.routeConfig;return e&&""===e.path}function JN(t){const e=[],n=new Set;for(const r of t){if(!oW(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=JN(r.children);e.push(new Bs(r.value,i))}return e.filter(r=>!n.has(r))}function XN(t){return t.data||{}}function eO(t){return t.resolve||{}}function tO(t){return"string"==typeof t.title||null===t.title}function wC(t){return Ae(e=>{const n=t(e);return n?w(n).pipe(Ee(()=>e)):P(e)})}const od=new me("ROUTES");let CC=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Te(VM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return P(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=xa(n.loadComponent()).pipe(Ee(nO),Ar(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),oC(()=>{this.componentLoaders.delete(n)})),i=new hN(r,()=>new W).pipe(rC());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return P({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function hW(t,e,n,r){return xa(t.loadChildren()).pipe(Ee(nO),Nt(i=>i instanceof $P||Array.isArray(i)?P(i):w(e.compileModuleAsync(i))),Ee(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(od,[],{optional:!0,self:!0}).flat()),{routes:s.map(vC),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(oC(()=>{this.childrenLoaders.delete(r)})),s=new hN(o,()=>new W).pipe(rC());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nO(t){return function fW(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Fy=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new W,this.transitionAbortSubject=new W,this.configLoader=Te(CC),this.environmentInjector=Te(io),this.urlSerializer=Te(Jf),this.rootContexts=Te(ip),this.inputBindingEnabled=null!==Te(My,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>P(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new oG(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new iG(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new I({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:np,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(So(o=>0!==o.id),Ee(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),Ae(o=>{this.currentTransition=o;let s=!1,a=!1;return P(o).pipe(Ar(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ae(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new ed(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),bn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return P(u).pipe(Ae(m=>{const v=this.transitions?.getValue();return this.events.next(new Ay(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?bn:Promise.resolve(m)}),function sW(t,e,n,r,i,o){return Nt(s=>function nW(t,e,n,r,i,o,s="emptyOnly"){return new rW(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Ee(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Ar(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const v=new NN(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:v,source:A,restoredState:R,extras:x}=u,U=new Ay(m,this.urlSerializer.serialize(v),A,R);this.events.next(U);const k=VN(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:k,urlAfterRedirects:v,extras:{...x,skipLocationChange:!1,replaceUrl:!1}},P(o)}{const m="";return this.events.next(new ed(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),bn}}),Ar(u=>{const l=new eG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Ee(u=>(this.currentTransition=o={...u,guards:TG(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function FG(t,e){return Nt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?P({...n,guardsResult:!0}):function VG(t,e,n,r){return w(t).pipe(Nt(i=>function HG(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?P(o.map(a=>{const u=sp(e)??i,l=nd(a,u);return xa(function NG(t){return t&&cp(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(Ma())})).pipe(rd()):P(!0)}(i.component,i.route,n,e,r)),Ma(i=>!0!==i,!0))}(s,r,i,t).pipe(Nt(a=>a&&function RG(t){return"boolean"==typeof t}(a)?function LG(t,e,n,r){return w(e).pipe(Kf(i=>nC(function BG(t,e){return null!==t&&e&&e(new sG(t)),P(!0)}(i.route.parent,r),function UG(t,e){return null!==t&&e&&e(new uG(t)),P(!0)}(i.route,r),function $G(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function DG(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>dN(()=>P(s.guards.map(u=>{const l=sp(s.node)??n,h=nd(u,l);return xa(function xG(t){return t&&cp(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(Ma())})).pipe(rd())));return P(o).pipe(rd())}(t,i.path,n),function jG(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return P(!0);const i=r.map(o=>dN(()=>{const s=sp(e)??n,a=nd(o,s);return xa(function MG(t){return t&&cp(t.canActivate)}(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t))).pipe(Ma())}));return P(i).pipe(rd())}(t,i.route,n))),Ma(i=>!0!==i,!0))}(r,o,t,e):P(a)),Ee(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Ar(u=>{if(o.guardsResult=u.guardsResult,$u(u.guardsResult))throw $N(0,u.guardsResult);const l=new tG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),So(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),wC(u=>{if(u.guards.canActivateChecks.length)return P(u).pipe(Ar(l=>{const h=new nG(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ae(l=>{let h=!1;return P(l).pipe(function aW(t,e){return Nt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return P(n);let o=0;return w(i).pipe(Kf(s=>function uW(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!tO(i)&&(o[Qf]=i.title),function cW(t,e,n,r){const i=function lW(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return P({});const o={};return w(i).pipe(Nt(s=>function dW(t,e,n,r){const i=sp(e)??r,o=nd(t,i);return xa(o.resolve?o.resolve(e,n):i.runInContext(()=>o(e,n)))}(t[s],e,n,r).pipe(Ma(),Ar(a=>{o[s]=a}))),iC(1),function b8(t){return Ee(()=>t)}(o),Bu(s=>WN(s)?bn:Zf(s)))}(o,t,e,r).pipe(Ee(s=>(t._resolvedData=s,t.data=LN(t,n).resolve,i&&tO(i)&&(t.data[Qf]=i.title),null)))}(s.route,r,t,e)),Ar(()=>o++),iC(1),Nt(s=>o===i.length?P(n):bn))})}(n.paramsInheritanceStrategy,this.environmentInjector),Ar({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),Ar(l=>{const h=new rG(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),wC(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ar(m=>{h.component=m}),Ee(()=>{})));for(const m of h.children)g.push(...l(m));return g};return tC(l(u.targetSnapshot.root)).pipe(vy(),Yl(1))}),wC(()=>this.afterPreactivation()),Ee(u=>{const l=function pG(t,e,n){const r=op(t,e._root,n?n._root:void 0);return new FN(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:l},o}),Ar(()=>{this.events.next(new dC)}),((t,e,n,r)=>Ee(i=>(new bG(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Yl(1),Ar({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Na(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function T8(t){return te((e,n)=>{vt(t).subscribe(ge(n,()=>n.complete(),Re)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(Ar(u=>{throw u}))),oC(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Bu(u=>{if(a=!0,zN(u))this.events.next(new rp(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function _G(t){return zN(t)&&$u(t.url)}(u)?this.events.next(new hC(u.url)):o.resolve(!1);else{this.events.next(new Sy(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(l){o.reject(l)}}return bn}))}))}cancelNavigationTransition(n,r,i){const o=new rp(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rO(t){return t!==np}let iO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===nt);return r}getResolvedTitleForRoute(n){return n.data[Qf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Te(pW)},providedIn:"root"})}return t})(),pW=(()=>{class t extends iO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(he(rN))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gW=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Te(_W)},providedIn:"root"})}return t})();class mW{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let _W=(()=>{class t extends mW{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Vy=new me("",{providedIn:"root",factory:()=>({})});let yW=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Te(vW)},providedIn:"root"})}return t})(),vW=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var lp=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(lp||{});function oO(t,e){t.events.pipe(So(n=>n instanceof Na||n instanceof rp||n instanceof Sy||n instanceof ed),Ee(n=>n instanceof Na||n instanceof ed?lp.COMPLETE:n instanceof rp&&(0===n.code||1===n.code)?lp.REDIRECTING:lp.FAILED),So(n=>n!==lp.REDIRECTING),Yl(1)).subscribe(()=>{e()})}function IW(t){throw t}function EW(t,e,n){return e.parse("/")}const wW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xn=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Te(kM),this.isNgZoneEnabled=!1,this._events=new W,this.options=Te(Vy,{optional:!0})||{},this.pendingTasks=Te(FM),this.errorHandler=this.options.errorHandler||IW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||EW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Te(yW),this.routeReuseStrategy=Te(gW),this.titleStrategy=Te(iO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Te(od,{optional:!0})?.flat()??[],this.navigationTransitions=Te(Fy),this.urlSerializer=Te(Jf),this.location=Te(P0),this.componentInputBindingEnabled=!!Te(My,{optional:!0}),this.eventsSubscription=new bt,this.isNgZoneEnabled=Te(Mt)instanceof Mt&&Mt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Xl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=VN(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(sO(r)&&this._events.next(r));if(r instanceof Ay)rO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof ed)this.rawUrlTree=i.rawUrl;else if(r instanceof NN){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof dC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof rp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof hC){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||rO(i.source)};this.scheduleNavigation(o,np,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Sy&&this.restoreHistory(i,!0),r instanceof Na&&(this.navigated=!0),sO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),np,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(vC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{g=DN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return AN(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=$u(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,np,null,r)}navigate(n,r={skipLocationChange:!1}){return function bW(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new Z(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...wW}:!1===r?{...CW}:r,$u(n))return _N(this.currentUrlTree,n,i);const o=this.parseUrl(n);return _N(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return oO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sO(t){return!(t instanceof dC||t instanceof hC)}let ho=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new W,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof Na&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function qS(t,e,n){return function r3(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?zS:l_}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(G(Xn),G(Hu),function qm(t){return function Ve(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(kc(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(sr(),t)}("tabindex"),G(Ms),G(ki),G(Lu))};static#t=this.\u0275dir=$e({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Le("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Qo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Kl],skipLocationChange:["skipLocationChange","skipLocationChange",Kl],replaceUrl:["replaceUrl","replaceUrl",Kl],routerLink:"routerLink"},standalone:!0,features:[oR,gi]})}return t})();class aO{}let AW=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(So(n=>n instanceof Na),Kf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Qw(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return w(i).pipe(Kr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):P(null);const o=i.pipe(Nt(s=>null===s?P(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?w([o,this.loader.loadComponent(r)]).pipe(Kr()):o})}static#e=this.\u0275fac=function(r){return new(r||t)(he(Xn),he(VM),he(io),he(aO),he(CC))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const bC=new me("");let uO=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ay?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Na?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof ed&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ON&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ON(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function x1(){throw new Error("invalid")}()};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function js(t,e){return{\u0275kind:t,\u0275providers:e}}function lO(){const t=Te(Fr);return e=>{const n=t.get(Zl);if(e!==n.components[0])return;const r=t.get(Xn),i=t.get(dO);1===t.get(TC)&&r.initialNavigation(),t.get(hO,null,st.Optional)?.setUpPreloading(),t.get(bC,null,st.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const dO=new me("",{factory:()=>new W}),TC=new me("",{providedIn:"root",factory:()=>1}),hO=new me("");function MW(t){return js(0,[{provide:hO,useExisting:AW},{provide:aO,useExisting:t}])}const fO=new me("ROUTER_FORROOT_GUARD"),NW=[P0,{provide:Jf,useClass:sC},Xn,ip,{provide:Hu,useFactory:function cO(t){return t.routerState.root},deps:[Xn]},CC,[]];function OW(){return new zM("Router",Xn)}let pO=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[NW,[],{provide:od,multi:!0,useValue:n},{provide:fO,useFactory:LW,deps:[[Xn,new _i,new Zm]]},{provide:Vy,useValue:r||{}},r?.useHash?{provide:Lu,useClass:z9}:{provide:Lu,useClass:Ex},{provide:bC,useFactory:()=>{const t=Te(lq),e=Te(Mt),n=Te(Vy),r=Te(Fy),i=Te(Jf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new uO(i,r,t,e,n)}},r?.preloadingStrategy?MW(r.preloadingStrategy).\u0275providers:[],{provide:zM,multi:!0,useFactory:OW},r?.initialNavigation?UW(r):[],r?.bindToComponentInputs?js(8,[jN,{provide:My,useExisting:jN}]).\u0275providers:[],[{provide:gO,useFactory:lO},{provide:I0,multi:!0,useExisting:gO}]]}}static forChild(n){return{ngModule:t,providers:[{provide:od,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(he(fO,8))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({})}return t})();function LW(t){return"guarded"}function UW(t){return["disabled"===t.initialNavigation?js(3,[{provide:h0,multi:!0,useFactory:()=>{const e=Te(Xn);return()=>{e.setUpLocationChangeListener()}}},{provide:TC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?js(2,[{provide:TC,useValue:0},{provide:h0,multi:!0,deps:[Fr],useFactory:e=>{const n=e.get($9,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Xn),o=e.get(dO);oO(i,()=>{r(!0)}),e.get(Fy).afterPreactivation=()=>(r(!0),o.closed?P(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const gO=new me("");var Q=Ue(861),Rn=(Ue(365),Ue(534));(0,Rn.registerVersion)("firebase","10.7.1","app");class HW extends bt{constructor(e,n){super()}schedule(e,n=0){return this}}const Ly={setInterval(t,e,...n){const{delegate:r}=Ly;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Ly;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class mO extends HW{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ly.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Ly.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Me(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const DC={now:()=>(DC.delegate||Date).now(),delegate:void 0};class dp{constructor(e,n=dp.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}dp.now=DC.now;class _O extends dp{constructor(e,n=dp.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const GW=new class qW extends _O{}(class zW extends mO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),yO=new _O(mO),zu=new Pl("ANGULARFIRE2_VERSION");function vO(t,e,n){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}const AC=(t,e)=>{const n=e?[e]:(0,Rn.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};class Uy{constructor(){return AC(WW)}}const WW="app-check";function sd(){}class IO{zone;delegate;constructor(e,n=GW){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class ZW{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sd,{},sd,sd)),n.pipe(Ar({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hp=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new IO(Zone.current)),this.insideAngular=n.run(()=>new IO(Zone.current,yO)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(he(Mt))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ad(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function qu(t){return ad().ngZone.run(()=>t())}function Li(t){return function QW(t){return function(n){return(n=n.lift(new ZW(t.ngZone))).pipe(hr(t.outsideAngular),xn(t.insideAngular))}}(ad())(t)}const YW=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),qu(()=>t.apply(void 0,r))},Gu=(t,e)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(n||=qu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sd,{},sd,sd))),r[o]=YW(r[o],n));const i=function KW(t){return ad().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof Xe){const o=ad();return i.pipe(hr(o.outsideAngular),xn(o.insideAngular))}return qu(()=>i)}return i instanceof Xe?i.pipe(Li):i instanceof Promise?qu(()=>new Promise((o,s)=>i.then(a=>qu(()=>o(a)),a=>qu(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:qu(()=>i)};var Oa=Ue(106);Oa.Z.registerVersion("firebase","10.7.1","app-compat");const e7=["ngOnDestroy"];class EO{constructor(e){return e}}const By=new me("angularfire2.app.options"),jy=new me("angularfire2.app.name");function SC(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Oa.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Oa.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;r7("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new EO(s)}const r7=(t,...e)=>{},i7={provide:EO,useFactory:SC,deps:[By,Mt,[new _i,jy]]};let o7=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:By,useValue:n},{provide:jy,useValue:r}]}}constructor(n){Oa.Z.registerVersion("angularfire",zu.full,"core"),Oa.Z.registerVersion("angularfire",zu.full,"app-compat"),Oa.Z.registerVersion("angular",uw.full,n.toString())}static \u0275fac=function(r){return new(r||t)(he(Wo))};static \u0275mod=Nn({type:t});static \u0275inj=Yn({providers:[i7]})}return t})();function wO(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function s7(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(CO("error",`${e} was already initialized on the ${n} Firebase App with different settings.${a7?" You may need to reload as Firebase is not HMR aware.":""}`),CO("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const a7=typeof module<"u"&&!!module.hot,CO=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class u7 extends W{constructor(e=1/0,n=1/0,r=DC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function bO(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Y({connector:()=>new u7(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function TO(t,e){return D(e)?Ae(()=>t,e):Ae(()=>t)}const DO=new me("angularfire2.auth.use-emulator"),AO=new me("angularfire2.auth.settings"),SO=new me("angularfire2.auth.tenant-id"),RO=new me("angularfire2.auth.langugage-code"),PO=new me("angularfire2.auth.use-device-language"),MO=new me("angularfire.auth.persistence"),xO=(t,e,n,r,i,o,s,a)=>wO(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let fp=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,h,g,m,v){const A=new W,R=P(void 0).pipe(xn(s.outsideAngular),Ae(()=>o.runOutsideAngular(()=>Promise.resolve().then(Ue.bind(Ue,365)))),Ee(()=>SC(n,o,r)),Ee(x=>xO(x,o,a,l,h,g,u,m)),bO({bufferSize:1,refCount:!1}));if(fy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=P(null);else{R.pipe(Ma()).subscribe();const x=R.pipe(Ae(B=>B.getRedirectResult().then(ee=>ee,()=>null)),Li,bO({bufferSize:1,refCount:!1})),U=R.pipe(Ae(B=>new Xe(ee=>({unsubscribe:o.runOutsideAngular(()=>B.onAuthStateChanged(fe=>ee.next(fe),fe=>ee.error(fe),()=>ee.complete()))})))),k=R.pipe(Ae(B=>new Xe(ee=>({unsubscribe:o.runOutsideAngular(()=>B.onIdTokenChanged(fe=>ee.next(fe),fe=>ee.error(fe),()=>ee.complete()))}))));this.authState=x.pipe(TO(U),hr(s.outsideAngular),xn(s.insideAngular)),this.user=x.pipe(TO(k),hr(s.outsideAngular),xn(s.insideAngular)),this.idToken=this.user.pipe(Ae(B=>B?w(B.getIdToken()):P(null))),this.idTokenResult=this.user.pipe(Ae(B=>B?w(B.getIdTokenResult()):P(null))),this.credential=b(x,A,this.authState.pipe(So(B=>!B))).pipe(Ee(B=>B?.user?B:null),hr(s.outsideAngular),xn(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(e7.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,g),g})})})}))(this,R,o,{spy:{apply:(x,U,k)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&k.then(B=>A.next(B))}}})}static \u0275fac=function(r){return new(r||t)(he(By),he(jy,8),he(Wo),he(Mt),he(hp),he(DO,8),he(AO,8),he(SO,8),he(RO,8),he(PO,8),he(MO,8),he(Uy,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Ei=function(t){return t.EmailAlreadyInUse="auth/email-already-in-use",t.InvalidEmail="auth/invalid-email",t.OperationNotAllowed="auth/operation-not-allowed",t.WeakPassword="auth/weak-password",t.UserDisabled="auth/user-disabled",t.UserNotFound="auth/user-not-found",t.WrongPassword="auth/wrong-password",t.PopupClosedByUser="auth/popup-closed-by-user",t.ProviderAlreadyLinked="auth/provider-already-linked",t.RequiresRecentLogin="auth/requires-recent-login",t.CredentialAlreadyInUse="auth/credential-already-in-use",t.MissingEmail="auth/missing-email",t.MissingPassword="auth/missing-password",t}(Ei||{});let pp=(()=>{class t{constructor(){}firebaseError(n){switch(n){case Ei.EmailAlreadyInUse:return"La direcci\xf3n de correo electr\xf3nico ya est\xe1 en uso.";case Ei.InvalidEmail:return"La direcci\xf3n de correo electr\xf3nico no es v\xe1lida.";case Ei.OperationNotAllowed:return"Esta operaci\xf3n no est\xe1 permitida.";case Ei.WeakPassword:return"La contrase\xf1a es d\xe9bil. Debe tener al menos 6 caracteres.";case Ei.UserDisabled:return"La cuenta de usuario ha sido deshabilitada por un administrador.";case Ei.UserNotFound:return"No se encontr\xf3 ning\xfan usuario con la direcci\xf3n de correo electr\xf3nico proporcionada.";case Ei.WrongPassword:return"La contrase\xf1a proporcionada es incorrecta.";case Ei.PopupClosedByUser:return"El usuario cerr\xf3 la ventana emergente de autenticaci\xf3n.";case Ei.ProviderAlreadyLinked:return"Esta cuenta ya est\xe1 vinculada a otro proveedor de autenticaci\xf3n.";case Ei.RequiresRecentLogin:return"Esta operaci\xf3n requiere que el usuario vuelva a autenticarse.";case Ei.CredentialAlreadyInUse:return"Las credenciales ya est\xe1n en uso por otro usuario.";case Ei.MissingEmail:return"Falta el campo de correo electr\xf3nico.";case Ei.MissingPassword:return"Falta el campo de contrase\xf1a.";default:return`Se produjo un error durante la autenticaci\xf3n: ${n}`}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ka=(()=>{class t{constructor(){}saveDataToLocalStorage(n,r){localStorage.setItem(n,JSON.stringify(r))}removeDataFromLocalStorage(n){localStorage.removeItem(n)}loadDataFromLocalStorage(n){const r=localStorage.getItem(n);return r?JSON.parse(r):null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ud=(()=>{class t{constructor(n,r,i,o){this.afAuth=n,this.router=r,this.fireError=i,this.localStorage=o,this.loading=!1}getRoles(){return this.dataUser=this.localStorage.loadDataFromLocalStorage("dataUser"),"matayus54@gmail.com"==this.dataUser.email?["admin"]:["soc"]}stateUser(){return this.afAuth.authState}ObtenerUid(){var n=this;return(0,Q.Z)(function*(){const r=yield n.afAuth.currentUser;return r?r.uid:null})()}Logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}LoginUsuario(n){const r=n.value.username,i=n.value.password;return this.dataUser={email:r,password:i},this.loading=!0,this.afAuth.signInWithEmailAndPassword(r,i).then(o=>{this.loading=!1,o.user?.emailVerified?(this.localStorage.saveDataToLocalStorage("dataUser",this.dataUser),this.router.navigate(["/dashboard"])):this.router.navigate(["/verificar-correo"])}).catch(o=>{this.loading=!1,alert(this.fireError.firebaseError(o.code))})}VerificarUsuarioYRedirigir(){return new Promise((n,r)=>{this.afAuth.currentUser.then(i=>{i?i&&i.emailVerified?(this.dataUser=i,n(this.dataUser)):(this.router.navigate(["/inicio"]),n(!1)):(this.router.navigate(["/login"]),n(!1))}).catch(i=>{alert(this.fireError.firebaseError(i.code)),r(i)})})}RegistrarUsuario(n,r){this.loading=!0,this.afAuth.createUserWithEmailAndPassword(n,r).then(i=>{this.loading=!1,this.localStorage.saveDataToLocalStorage("dataUser",JSON.stringify({email:n,password:r})),this.VerificarCorreo(i.user)}).catch(i=>{this.loading=!1,console.log(i),alert(this.fireError.firebaseError(i.code))})}VerificarCorreo(n){n?n.sendEmailVerification().then(()=>{alert("Usuario registrado con \xe9xito, Correo de verificaci\xf3n enviado correctamente."),this.router.navigate(["/verificar-correo"])}).catch(r=>{alert("Error al enviar el correo de verificaci\xf3n:"+r)}):alert("No hay usuario autenticado para enviar el correo de verificaci\xf3n.")}static#e=this.\u0275fac=function(r){return new(r||t)(he(fp),he(Xn),he(pp),he(ka))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const NO=(t,e)=>{const n=Te(ud),i=(Te(Xn),n.getRoles());return!!(t.data?.allowedRoles).every(a=>i.includes(a))};let l7=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-inicio"]],decls:10,vars:0,consts:[[1,"container"],["src","https://i.imgur.com/h3NYOx2.png","alt","",1,"logo"],["routerLink","/login",1,"btn"],[1,"subT"],[1,"c-Blanco"],["routerLink","/registrar-usuario",1,"c-Rojo"],["src","https://i.imgur.com/6MqFvK0.png","alt","",1,"stars"]],template:function(r,i){1&r&&(y(0,"div",0),J(1,"img",1),y(2,"button",2),T(3,"iniciar sesi\xf3n"),E(),y(4,"div",3)(5,"span",4),T(6,"\xbfno tienes una cuenta? "),E(),y(7,"span",5),T(8,"registrate"),E()(),J(9,"img",6),E())},dependencies:[ho],styles:["*[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;text-shadow:2px 2px 4px rgba(0,0,0,.5);transition:background-color .5s ease-in-out,color .5s ease-in-out,transform .3s ease-in-out;font-size:4vh;align-items:center;justify-content:center;text-align:center;justify-self:center;list-style:none;text-decoration:none;-webkit-user-select:none;user-select:none;overflow:hidden;box-sizing:border-box}.c-Rojo[_ngcontent-%COMP%]{color:red}.c-Blanco[_ngcontent-%COMP%]{color:#fff}.subT[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:6vh;margin-top:2vh}.container[_ngcontent-%COMP%]{height:100vh;width:100vw;background-image:url(https://i.imgur.com/lzJ2u1F.jpeg);background-size:cover;background-position:center;background-repeat:no-repeat;display:grid;grid-template-rows:60vh 20vh 10vh 10vh}.logo[_ngcontent-%COMP%]{height:30vh;justify-self:end}.stars[_ngcontent-%COMP%]{height:10vh;padding-bottom:1vh}.btn[_ngcontent-%COMP%]{font-size:5vh;padding:1vh;border:1px solid black;background:red;border-radius:1vh;font-weight:700;cursor:pointer;align-self:end;justify-self:end;color:#fff}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff;transform:scale(1.3)}a[_ngcontent-%COMP%]{color:#e3d1a3}a[_ngcontent-%COMP%]:hover{color:#000}@media (max-width: 768px){.logo[_ngcontent-%COMP%]{height:25vh}.btn[_ngcontent-%COMP%]{font-size:4vh;margin-right:2vh}.subT[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3vh}.stars[_ngcontent-%COMP%]{height:10vh}}@media (max-width: 480px){.container[_ngcontent-%COMP%]{grid-template-rows:45vh 20vh 10vh 10vh}.logo[_ngcontent-%COMP%]{height:20vh}.btn[_ngcontent-%COMP%]{font-size:3vh;margin-right:2vh}.subT[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2.5vh}}"]})}return t})(),OO=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(Ms),G(ki))};static#t=this.\u0275dir=$e({type:t})}return t})(),Wu=(()=>{class t extends OO{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275dir=$e({type:t,features:[Bt]})}return t})();const ts=new me("NgValueAccessor"),f7={provide:ts,useExisting:L(()=>$s),multi:!0},g7=new me("CompositionEventMode");let $s=(()=>{class t extends OO{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function p7(){const t=Ra()?Ra().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(Ms),G(ki),G(g7,8))};static#t=this.\u0275dir=$e({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Le("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[yn([f7]),Bt]})}return t})();function Fa(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function FO(t){return null!=t&&"number"==typeof t.length}const Lr=new me("NgValidators"),Va=new me("NgAsyncValidators"),m7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Oe{static min(e){return VO(e)}static max(e){return function LO(t){return e=>{if(Fa(e.value)||Fa(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return UO(e)}static requiredTrue(e){return function BO(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function jO(t){return Fa(t.value)||m7.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function $O(t){return e=>Fa(e.value)||!FO(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function HO(t){return e=>FO(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function zO(t){if(!t)return $y;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Fa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return QO(e)}static composeAsync(e){return YO(e)}}function VO(t){return e=>{if(Fa(e.value)||Fa(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function UO(t){return Fa(t.value)?{required:!0}:null}function $y(t){return null}function qO(t){return null!=t}function GO(t){return Pf(t)?w(t):t}function WO(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function ZO(t,e){return e.map(n=>n(t))}function KO(t){return t.map(e=>function _7(t){return!t.validate}(e)?e:n=>e.validate(n))}function QO(t){if(!t)return null;const e=t.filter(qO);return 0==e.length?null:function(n){return WO(ZO(n,e))}}function RC(t){return null!=t?QO(KO(t)):null}function YO(t){if(!t)return null;const e=t.filter(qO);return 0==e.length?null:function(n){return function d7(...t){const e=Zi(t),{args:n,keys:r}=aN(t),i=new Xe(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,l=s;for(let h=0;h<s;h++){let g=!1;vt(n[h]).subscribe(ge(o,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||o.next(r?cN(r,a):a),o.complete())}))}});return e?i.pipe(uN(e)):i}(ZO(n,e).map(GO)).pipe(Ee(WO))}}function PC(t){return null!=t?YO(KO(t)):null}function JO(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function XO(t){return t._rawValidators}function ek(t){return t._rawAsyncValidators}function MC(t){return t?Array.isArray(t)?t:[t]:[]}function Hy(t,e){return Array.isArray(t)?t.includes(e):t===e}function tk(t,e){const n=MC(e);return MC(t).forEach(i=>{Hy(n,i)||n.push(i)}),n}function nk(t,e){return MC(e).filter(n=>!Hy(t,n))}class rk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=RC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ai extends rk{get formDirective(){return null}get path(){return null}}class La extends rk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ik{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zu=(()=>{class t extends ik{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(La,2))};static#t=this.\u0275dir=$e({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&L_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Bt]})}return t})(),cd=(()=>{class t extends ik{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(ai,10))};static#t=this.\u0275dir=$e({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&L_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Bt]})}return t})();const gp="VALID",qy="INVALID",ld="PENDING",mp="DISABLED";function OC(t){return(Gy(t)?t.validators:t)||null}function kC(t,e){return(Gy(e)?e.asyncValidators:t)||null}function Gy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function sk(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[n])throw new Z(1001,"")}function ak(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new Z(1002,"")})}class Wy{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gp}get invalid(){return this.status===qy}get pending(){return this.status==ld}get disabled(){return this.status===mp}get enabled(){return this.status!==mp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nk(e,this._rawAsyncValidators))}hasValidator(e){return Hy(this._rawValidators,e)}hasAsyncValidator(e){return Hy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ld,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=mp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=gp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gp||this.status===ld)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mp:gp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ld,this._hasOwnPendingAsyncValidator=!0;const n=GO(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new kn,this.statusChanges=new kn}_calculateStatus(){return this._allControlsDisabled()?mp:this.errors?qy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ld)?ld:this._anyControlsHaveStatus(qy)?qy:gp}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function E7(t){return Array.isArray(t)?RC(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function w7(t){return Array.isArray(t)?PC(t):t||null}(this._rawAsyncValidators)}}class dd extends Wy{constructor(e,n,r){super(OC(n),kC(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ak(this,0,e),Object.keys(e).forEach(r=>{sk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class uk extends dd{}const Ku=new me("CallSetDisabledState",{providedIn:"root",factory:()=>_p}),_p="always";function Zy(t,e){return[...e.path,t]}function yp(t,e,n=_p){FC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function b7(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ck(t,e)})}(t,e),function D7(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function T7(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ck(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function C7(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Ky(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Yy(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Qy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function FC(t,e){const n=XO(t);null!==e.validator?t.setValidators(JO(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=ek(t);null!==e.asyncValidator?t.setAsyncValidators(JO(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Qy(e._rawValidators,i),Qy(e._rawAsyncValidators,i)}function Yy(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=XO(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const i=ek(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}const r=()=>{};return Qy(e._rawValidators,r),Qy(e._rawAsyncValidators,r),n}function ck(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function LC(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function UC(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===$s?n=o:function R7(t){return Object.getPrototypeOf(t.constructor)===Wu}(o)?r=o:i=o}),i||r||n||null}function hk(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function fk(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Ip=class extends Wy{constructor(e=null,n,r){super(OC(n),kC(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=fk(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){fk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},O7={provide:La,useExisting:L(()=>jC)},mk=(()=>Promise.resolve())();let jC=(()=>{class t extends La{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Ip,this._registered=!1,this.name="",this.update=new kn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=UC(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),LC(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){mk.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Kl(r);mk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Zy(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(G(ai,9),G(Lr,10),G(Va,10),G(ts,10),G(J_,8),G(Ku,8))};static#t=this.\u0275dir=$e({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yn([O7]),Bt,gi]})}return t})(),hd=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=$e({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const k7={provide:ts,useExisting:L(()=>Ep),multi:!0};let Ep=(()=>{class t extends Wu{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275dir=$e({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Le("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[yn([k7]),Bt]})}return t})(),_k=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({})}return t})();const L7={provide:ts,useExisting:L(()=>$C),multi:!0};let $C=(()=>{class t extends Wu{writeValue(n){this.setProperty("value",parseFloat(n))}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275dir=$e({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){1&r&&Le("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[yn([L7]),Bt]})}return t})();const HC=new me("NgModelWithFormControlWarning"),B7={provide:ai,useExisting:L(()=>Ua)};let Ua=(()=>{class t extends ai{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new kn,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return yp(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Ky(n.control||null,n,!1),function P7(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function dk(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(Ky(r||null,n),(t=>t instanceof Ip)(i)&&(yp(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function lk(t,e){FC(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function A7(t,e){return Yy(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){FC(this.form,this),this._oldForm&&Yy(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(G(Lr,10),G(Va,10),G(Ku,8))};static#t=this.\u0275dir=$e({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Le("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yn([B7]),Bt,gi]})}return t})();const H7={provide:La,useExisting:L(()=>Qu)};let Qu=(()=>{class t extends La{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new kn,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=UC(0,o)}ngOnChanges(n){this._added||this._setUpControl(),LC(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return Zy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||t)(G(ai,13),G(Lr,10),G(Va,10),G(ts,10),G(HC,8))};static#n=this.\u0275dir=$e({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[yn([H7]),Bt,gi]})}return t})();const z7={provide:ts,useExisting:L(()=>wp),multi:!0};function Ek(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let wp=(()=>{class t extends Wu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const i=Ek(this._getOptionId(n),n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function q7(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275dir=$e({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Le("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yn([z7]),Bt]})}return t})(),Jy=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(Ek(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||t)(G(ki),G(Ms),G(wp,9))};static#t=this.\u0275dir=$e({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})();const G7={provide:ts,useExisting:L(()=>GC),multi:!0};function wk(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let GC=(()=>{class t extends Wu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const l=this._getOptionValue(s[a].value);i.push(l)}}else{const s=r.options;for(let a=0;a<s.length;a++){const u=s[a];if(u.selected){const l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function W7(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275dir=$e({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Le("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yn([G7]),Bt]})}return t})(),Xy=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(wk(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(wk(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||t)(G(ki),G(Ms),G(GC,9))};static#t=this.\u0275dir=$e({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})();let Yu=(()=>{class t{constructor(){this._validator=$y}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$y,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=$e({type:t,features:[gi]})}return t})();const K7={provide:Lr,useExisting:L(()=>Cp),multi:!0};let Cp=(()=>{class t extends Yu{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>function bk(t){return"number"==typeof t?t:parseFloat(t)}(n),this.createValidator=n=>VO(n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275dir=$e({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Qo("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[yn([K7]),Bt]})}return t})();const Q7={provide:Lr,useExisting:L(()=>Ba),multi:!0};let Ba=(()=>{class t extends Yu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Kl,this.createValidator=n=>UO}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Gn(t)))(i||t)}}();static#t=this.\u0275dir=$e({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Qo("required",i._enabled?"":null)},inputs:{required:"required"},features:[yn([Q7]),Bt]})}return t})(),Mk=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({imports:[_k]})}return t})();class xk extends Wy{constructor(e,n,r){super(OC(n),kC(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){ak(this,0,e),e.forEach((r,i)=>{sk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Nk(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let bp=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let o={};return Nk(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new dd(i,o)}record(n,r=null){const i=this._reduceControls(n);return new uk(i,r)}control(n,r,i){let o={};return this.useNonNullable?(Nk(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ip(n,{...o,nonNullable:!0})):new Ip(n,r,i)}array(n,r,i){const o=n.map(s=>this._createControl(s));return new xk(o,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof Ip||n instanceof Wy?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nZ=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ku,useValue:n.callSetDisabledState??_p}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({imports:[Mk]})}return t})(),rZ=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:HC,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Ku,useValue:n.callSetDisabledState??_p}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({imports:[Mk]})}return t})(),Ju=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-spinner"]],decls:2,vars:0,template:function(r,i){1&r&&(y(0,"p"),T(1,"spinner works!"),E())}})}return t})();function iZ(t,e){if(1&t){const n=Eo();y(0,"div",2),J(1,"img",3),y(2,"div",4),T(3,"login"),E(),y(4,"form",5),Le("ngSubmit",function(){return Zt(n),Ut(dt().LoguearUsuario())}),y(5,"div",6),J(6,"input",7),y(7,"label",8),T(8,"usuario"),E()(),y(9,"div",6),J(10,"input",9),y(11,"label",10),T(12,"contrase\xf1a"),E()(),y(13,"div",11)(14,"button",12),T(15,"ingresar"),E()()(),y(16,"div",13)(17,"p"),T(18,"no tienes cuenta? "),y(19,"a",14),T(20,"registrarse"),E()(),y(21,"p")(22,"a",15),T(23,"recuperar contrase\xf1a"),E()()()()}if(2&t){const n=dt();ce(4),de("formGroup",n.loginUsuario)}}function oZ(t,e){1&t&&J(0,"app-spinner")}let sZ=(()=>{class t{constructor(n,r,i){this.fb=n,this.authService=r,this.localStorage=i,this.loading=!1,this.loginUsuario=this.fb.group({username:["",[Oe.required]],password:["",[Oe.required,Oe.minLength(6)]]},{})}LoguearUsuario(){this.authService.LoginUsuario(this.loginUsuario),this.dataUser=this.localStorage.loadDataFromLocalStorage("dataUser")}static#e=this.\u0275fac=function(r){return new(r||t)(G(bp),G(ud),G(ka))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-login"]],decls:2,vars:2,consts:[["class","wrapper",4,"ngIf"],[4,"ngIf"],[1,"wrapper"],["src","https://i.imgur.com/xtxKQ6t.png","alt","",1,"imgContrasena"],[1,"login"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"input-container"],["type","text","id","username","name","username","placeholder","","required","","autocomplete","off","formControlName","username",1,"input-field"],["for","username",1,"placeholder"],["type","password","id","password","name","password","placeholder","","required","","formControlName","password",1,"input-field"],["for","password",1,"placeholder"],[1,"button-container"],["type","submit"],[1,"additional-links"],["routerLink","/registrar-usuario"],["routerLink","/restablecer-password"]],template:function(r,i){1&r&&(We(0,iZ,24,1,"div",0),We(1,oZ,1,0,"app-spinner",1)),2&r&&(de("ngIf",!i.loading),ce(1),de("ngIf",i.loading))},dependencies:[Do,ho,hd,$s,Zu,cd,Ba,Ua,Qu,Ju],styles:[".wrapper[_ngcontent-%COMP%]{background:#f5f5f5;height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column}.login[_ngcontent-%COMP%]{padding:2vh;font-size:10vh}.imgContrasena[_ngcontent-%COMP%]{width:20vh;height:auto;cursor:pointer}.input-container[_ngcontent-%COMP%]{position:relative;margin-bottom:5vh}.input-field[_ngcontent-%COMP%]{width:100%;padding:3vh;border:1px solid #ccc;border-radius:4px;font-size:3vh;text-transform:none}.placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:1vw;transform:translateY(-50%);pointer-events:none;transition:.3s;font-size:5vh;color:#999;z-index:1}.input-field[_ngcontent-%COMP%]:focus + .placeholder[_ngcontent-%COMP%], .input-field[_ngcontent-%COMP%]:not(:placeholder-shown) + .placeholder[_ngcontent-%COMP%]{top:2vh;font-size:4vh;color:#666;transform:translateY(-100%) scale(.8);padding:0 1vh;background-color:#fff}.input-field[_ngcontent-%COMP%]:invalid + .placeholder[_ngcontent-%COMP%]{color:#410a0a}.input-field[_ngcontent-%COMP%]:invalid:focus + .placeholder[_ngcontent-%COMP%]{color:red}.button-container[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:1vh}button[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#65a0df,#2d6bae);color:#fff;padding:1vh;border:none;border-radius:.5vh;cursor:pointer;transition:transform .3s,box-shadow .3s}button[_ngcontent-%COMP%]:focus{background-color:#007bff;outline:none;box-shadow:0 0 5px #007bff80}button[_ngcontent-%COMP%]:hover{transform:scale(1.5);background-image:radial-gradient(circle,#007bff,#0056b3)}.additional-links[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a88ca;text-decoration:none;transition:transform .3s;display:inline-block}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff;margin:0 2vh;text-decoration:underline;transform:scale(1.5)}"]})}return t})(),WC=(()=>{class t{constructor(){}getErrorMessage(n,r){const i=r.get(n);return i?.hasError("required")?"Este campo es obligatorio":i?.hasError("email")?"Ingrese un correo electr\xf3nico v\xe1lido":i?.hasError("minlength")?`La contrase\xf1a debe tener al menos ${i.getError("minlength")?.requiredLength} caracteres`:i?.hasError("passwordMismatch")?"Las contrase\xf1as no coinciden":""}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZC=(()=>{class t{constructor(){this.mostrarPassword=!1}ObtenerFechaActual(){const n=new Date;return new Intl.DateTimeFormat("es",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"America/Lima"}).format(n)}GenerarUsuarioID(){const n=new Date;return`SOC\\${n.getDate().toString().padStart(2,"0")}\\${(n.getMonth()+1).toString().padStart(2,"0")}\\${n.getFullYear().toString()}-${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}`}ValidarEdad(n){const r=new Date(n.value),o=(new Date).getFullYear()-r.getFullYear();return o<18||o>100?{edadInvalida:!0}:null}CalcularFechaMinima(){const n=new Date;return n.setFullYear(n.getFullYear()-100),n.toISOString().split("T")[0]}CalcularFechaMaxima(){const n=new Date;return n.setFullYear(n.getFullYear()-18),n.toISOString().split("T")[0]}TogglePasswordVisibility(n){this.mostrarPassword=!this.mostrarPassword,document.getElementById("togglePassword").src=this.mostrarPassword?"../../../assets/img/ocultar.png":"../../../assets/img/mostrar.png",n&&(n.type=this.mostrarPassword?"text":"password",n.focus())}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aZ(t,e){if(1&t&&(y(0,"div",22),T(1),E()),2&t){const n=dt(2);ce(1),ao(" ",n.getErrorMessage("email")," ")}}function uZ(t,e){if(1&t&&(y(0,"div",22),T(1),E()),2&t){const n=dt(2);ce(1),ao(" ",n.getErrorMessage("password")," ")}}function cZ(t,e){if(1&t&&(y(0,"div",22),T(1),E()),2&t){const n=dt(2);ce(1),ao(" ",n.getErrorMessage("repeatPassword")," ")}}function lZ(t,e){1&t&&(y(0,"div",23),T(1," Rellene todos los campos correctamente. "),E())}function dZ(t,e){if(1&t){const n=Eo();y(0,"div",2),J(1,"img",3),y(2,"div",4),T(3,"Registrarse"),E(),y(4,"form",5),Le("ngSubmit",function(){return Zt(n),Ut(dt().RegistrarUsuario())}),y(5,"div",6),J(6,"input",7),y(7,"label",8),T(8,"Correo Electr\xf3nico"),E(),We(9,aZ,2,1,"div",9),E(),y(10,"div",6),J(11,"input",10,11),y(13,"label",12),T(14,"Contrase\xf1a"),E(),y(15,"img",13),Le("click",function(){Zt(n);const i=N_(12);return Ut(dt().TogglePasswordVisibility(i))}),E(),We(16,uZ,2,1,"div",9),E(),y(17,"div",6),J(18,"input",14),y(19,"label",15),T(20,"Repetir Contrase\xf1a"),E(),We(21,cZ,2,1,"div",9),E(),We(22,lZ,2,0,"div",16),y(23,"div",17)(24,"button",18),T(25," aceptar "),E()()(),y(26,"div",19)(27,"p"),T(28," al registrarse confirma haber leido los "),y(29,"a",20),T(30,"terminos y condiciones "),E(),T(31," \xbflos acepta? "),E(),y(32,"p")(33,"a",21),T(34,"ya tengo una cuenta"),E()()()()}if(2&t){const n=dt();let r,i,o;ce(4),de("formGroup",n.registrarUsuario),ce(5),de("ngIf",(null==(r=n.registrarUsuario.get("email"))?null:r.invalid)&&(null==(r=n.registrarUsuario.get("email"))?null:r.dirty)),ce(7),de("ngIf",(null==(i=n.registrarUsuario.get("password"))?null:i.invalid)&&(null==(i=n.registrarUsuario.get("password"))?null:i.dirty)),ce(5),de("ngIf",(null==(o=n.registrarUsuario.get("repeatPassword"))?null:o.invalid)&&(null==(o=n.registrarUsuario.get("repeatPassword"))?null:o.dirty)),ce(1),de("ngIf",!n.registrarUsuario.valid),ce(2),de("disabled",!n.registrarUsuario.valid)}}function hZ(t,e){1&t&&J(0,"app-spinner")}let fZ=(()=>{class t{constructor(n,r,i,o,s,a,u,l){this.fb=n,this.afAuth=r,this.router=i,this.fireError=o,this.errorMessageService=s,this.localStorage=a,this.datosForm=u,this.authServ=l,this.mostrarPassword=!1,this.loading=!1,this.registrarUsuario=this.fb.group({email:["",[Oe.required,Oe.email]],password:["",[Oe.required,Oe.minLength(6)]],repeatPassword:["",[Oe.required]]},{validators:this.passwordMatchValidator.bind(this)})}ngOnInit(){}RegistrarUsuario(){this.authServ.RegistrarUsuario(this.registrarUsuario.value.email,this.registrarUsuario.value.password)}TogglePasswordVisibility(n){this.datosForm.TogglePasswordVisibility(n)}passwordMatchValidator(n){const r=n.get("password")?.value,i=n.get("repeatPassword")?.value;return r!==i?n.get("repeatPassword")?.setErrors({passwordMismatch:!0}):n.get("repeatPassword")?.setErrors(null),r===i?null:{passwordMismatch:!0}}getErrorMessage(n){return this.errorMessageService.getErrorMessage(n,this.registrarUsuario)}static#e=this.\u0275fac=function(r){return new(r||t)(G(bp),G(fp),G(Xn),G(pp),G(WC),G(ka),G(ZC),G(ud))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-registrar-usuario"]],decls:2,vars:2,consts:[["class","wrapper",4,"ngIf"],[4,"ngIf"],[1,"wrapper"],["src","https://i.imgur.com/mhgnghB.png","alt","",1,"imgContrasena"],[1,"login"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"input-container"],["type","email","id","email","name","email","placeholder","","autocomplete","off","formControlName","email","required","",1,"input-field"],["for","email",1,"placeholder"],["class","error-General",4,"ngIf"],["type","password","id","password","name","password","placeholder","","formControlName","password","required","",1,"input-field"],["passwordInput",""],["for","password",1,"placeholder"],["src","https://i.imgur.com/oQbFS9n.png","id","togglePassword","alt","Mostrar contrase\xf1a",1,"mostrarOcultar",3,"click"],["type","password","id","repeatPassword","name","repeatPassword","placeholder","","formControlName","repeatPassword","required","",1,"input-field"],["for","repeatPassword",1,"placeholder"],["class","error-message",4,"ngIf"],[1,"button-container"],["type","submit",3,"disabled"],[1,"additional-links"],["routerLink","/iniciar-sesion"],["routerLink","/login"],[1,"error-General"],[1,"error-message"]],template:function(r,i){1&r&&(We(0,dZ,35,6,"div",0),We(1,hZ,1,0,"app-spinner",1)),2&r&&(de("ngIf",!i.loading),ce(1),de("ngIf",i.loading))},dependencies:[Do,ho,hd,$s,Zu,cd,Ba,Ua,Qu,Ju],styles:[".wrapper[_ngcontent-%COMP%]{background:#f5f5f5;height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column}.login[_ngcontent-%COMP%]{padding:2vh;font-size:10vh}.imgContrasena[_ngcontent-%COMP%]{width:20vh;height:auto;cursor:pointer}.input-container[_ngcontent-%COMP%]{position:relative;margin-bottom:3vh}.input-field[_ngcontent-%COMP%]{width:100%;padding:3vh;border:1px solid #ccc;border-radius:4px;font-size:3vh;text-transform:none}.placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:1vw;transform:translateY(-50%);pointer-events:none;transition:.3s;font-size:5vh;color:#999;z-index:1}.input-field[_ngcontent-%COMP%]:focus + .placeholder[_ngcontent-%COMP%], .input-field[_ngcontent-%COMP%]:not(:placeholder-shown) + .placeholder[_ngcontent-%COMP%]{top:2vh;font-size:4vh;color:#666;transform:translateY(-100%) scale(.8);padding:0 1vh;background-color:#fff}.input-field[_ngcontent-%COMP%]:invalid + .placeholder[_ngcontent-%COMP%]{color:#410a0a}.input-field[_ngcontent-%COMP%]:invalid:focus + .placeholder[_ngcontent-%COMP%]{color:red}.error-General[_ngcontent-%COMP%]{position:absolute;top:0;left:110%;margin-top:5vh;font-size:2vh;color:red;margin-top:1vh;width:100%;text-align:left;text-shadow:0 0 5px rgba(0,123,255,.5)}.error-message[_ngcontent-%COMP%]{color:red;margin-top:1vh;width:100%;text-align:center;text-shadow:0 0 5px rgba(0,123,255,.5)}.mostrarOcultar[_ngcontent-%COMP%]{position:absolute;top:50%;right:2vh;cursor:pointer;width:4vh;transform:translateY(-50%);transition:transform .3s,box-shadow .3s}.mostrarOcultar[_ngcontent-%COMP%]:hover{transform:scale(1.2)}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.button-container[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:1vh}button[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#65a0df,#2d6bae);color:#fff;padding:1vh;border:none;border-radius:.5vh;cursor:pointer;transition:transform .3s,box-shadow .3s}button[_ngcontent-%COMP%]:focus{background-color:#007bff;outline:none;box-shadow:0 0 5px #007bff80}button[_ngcontent-%COMP%]:hover{transform:scale(1.5);background-image:radial-gradient(circle,#007bff,#0056b3)}.additional-links[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a88ca;text-decoration:none;transition:transform .3s;display:inline-block}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff;text-decoration:underline;margin:0 5vh;transform:scale(1.5)}"]})}return t})();function pZ(t,e){if(1&t){const n=Eo();y(0,"div",2),J(1,"img",3),y(2,"div",4),T(3,"recuperar"),E(),y(4,"form",5),Le("ngSubmit",function(){return Zt(n),Ut(dt().RestablecerUsuario())}),y(5,"div",6),J(6,"input",7),y(7,"label",8),T(8,"Correo Electr\xf3nico"),E()(),y(9,"div",9)(10,"button",10),T(11,"aceptar"),E()()(),y(12,"div",11)(13,"p")(14,"a",12),T(15,"ya tengo una cuenta "),E()(),y(16,"p")(17,"a",13),T(18,"volver a la p\xe1gina principal"),E()()()()}if(2&t){const n=dt();ce(4),de("formGroup",n.restablecerUsuario)}}function gZ(t,e){1&t&&J(0,"app-spinner")}let mZ=(()=>{class t{constructor(n,r,i,o){this.fb=n,this.afAuth=r,this.router=i,this.fireError=o,this.loading=!1,this.restablecerUsuario=this.fb.group({email:["",[Oe.required,Oe.email]]},{})}RestablecerUsuario(){console.log(this.restablecerUsuario);const n=this.restablecerUsuario.value.email;this.loading=!0,this.afAuth.sendPasswordResetEmail(n).then(()=>{this.loading=!1,this.router.navigate(["/login"]),alert("Se ha enviado un correo para restablecer la contrase\xf1a")}).catch(r=>{this.loading=!1,console.log(r),alert(this.fireError.firebaseError(r.code))})}static#e=this.\u0275fac=function(r){return new(r||t)(G(bp),G(fp),G(Xn),G(pp))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-restablecer-password"]],decls:2,vars:2,consts:[["class","wrapper",4,"ngIf"],[4,"ngIf"],[1,"wrapper"],["src","https://i.imgur.com/Xkf3H1n.png","alt","",1,"imgContrasena"],[1,"login"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"input-container"],["type","email","id","email","name","email","placeholder","","autocomplete","off","formControlName","email","required","",1,"input-field"],["for","email",1,"placeholder"],[1,"button-container"],["type","submit"],[1,"additional-links"],["routerLink","/login"],["routerLink","/"]],template:function(r,i){1&r&&(We(0,pZ,19,1,"div",0),We(1,gZ,1,0,"app-spinner",1)),2&r&&(de("ngIf",!i.loading),ce(1),de("ngIf",i.loading))},dependencies:[Do,ho,hd,$s,Zu,cd,Ba,Ua,Qu,Ju],styles:[".wrapper[_ngcontent-%COMP%]{background:#f5f5f5;height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column}.login[_ngcontent-%COMP%]{padding:2vh;font-size:10vh}.imgContrasena[_ngcontent-%COMP%]{width:20vh;height:auto;cursor:pointer}.input-container[_ngcontent-%COMP%]{position:relative;margin-bottom:3vh}.input-field[_ngcontent-%COMP%]{width:100%;padding:3vh;border:1px solid #ccc;border-radius:4px;font-size:3vh;text-transform:none}.placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:1vw;transform:translateY(-50%);pointer-events:none;transition:.3s;font-size:5vh;color:#999;z-index:1}.input-field[_ngcontent-%COMP%]:focus + .placeholder[_ngcontent-%COMP%], .input-field[_ngcontent-%COMP%]:not(:placeholder-shown) + .placeholder[_ngcontent-%COMP%]{top:2vh;font-size:4vh;color:#666;transform:translateY(-100%) scale(.8);padding:0 1vh;background-color:#fff}.input-field[_ngcontent-%COMP%]:invalid + .placeholder[_ngcontent-%COMP%]{color:#410a0a}.input-field[_ngcontent-%COMP%]:invalid:focus + .placeholder[_ngcontent-%COMP%]{color:red}.button-container[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:1vh}button[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#65a0df,#2d6bae);color:#fff;padding:1vh;border:none;border-radius:.5vh;cursor:pointer;transition:transform .3s,box-shadow .3s}button[_ngcontent-%COMP%]:focus{background-color:#007bff;outline:none;box-shadow:0 0 5px #007bff80}button[_ngcontent-%COMP%]:hover{transform:scale(1.5);background-image:radial-gradient(circle,#007bff,#0056b3)}.additional-links[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a88ca;text-decoration:none;transition:transform .3s;display:inline-block}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff;margin:0 2vh;text-decoration:underline;transform:scale(1.5)}"]})}return t})(),_Z=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-verificar-correo"]],decls:12,vars:0,consts:[[1,"container"],[1,"verification-icon"],[1,"titulo"],[1,"button-container"],["routerLink","/login",1,"verify-button"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1),T(2,"\u2714"),E(),y(3,"p",2),T(4,"\xa1Verifica tu Correo!"),E(),y(5,"p"),T(6," Se ha enviado un enlace de verificaci\xf3n a tu direcci\xf3n de correo electr\xf3nico. Por favor, "),J(7,"br"),T(8,"verifica tu correo para completar el proceso de registro. "),E(),y(9,"div",3)(10,"button",4),T(11," ir a login "),E()()())},dependencies:[ho],styles:["*[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0;align-items:center;justify-content:center;font-size:3vh}body[_ngcontent-%COMP%]{background-color:#1a1a1a;color:#fff;display:flex;height:100vh;margin:0}.container[_ngcontent-%COMP%]{flex-direction:column;height:100%;text-align:center;padding:3vh;background-color:#222;box-shadow:0 0 10px #00000080}.titulo[_ngcontent-%COMP%]{font-size:10vh;margin:2vh;color:#60a8c2}.verification-icon[_ngcontent-%COMP%]{margin-top:10vh;font-size:5em;color:#53d2b9;margin-bottom:20px}.button-container[_ngcontent-%COMP%]{margin-top:10vh;display:flex;justify-content:center;font-size:8vh}.verify-button[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#1a3644,#273d4a);color:#fff;padding:2vh;border:none;border-radius:1vh;cursor:pointer;transition:transform .3s,box-shadow .3s}.verify-button[_ngcontent-%COMP%]:focus{background-color:#007bff;outline:none;box-shadow:0 0 5px #007bff80}.verify-button[_ngcontent-%COMP%]:hover{transform:scale(3);background-image:radial-gradient(circle,#125870,#124b67)}"]})}return t})(),KC=(()=>{class t{constructor(){this.isNavbarBlockedSubject=new I(!1),this.isNavbarBlocked$=this.isNavbarBlockedSubject.asObservable(),this.sidebarWidthSubject=new I("20vw"),this.sidebarWidth$=this.sidebarWidthSubject.asObservable()}toggleNavbarBlockedStatus(n){this.isNavbarBlockedSubject.next(n)}updateSidebarWidth(n){this.sidebarWidthSubject.next(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yZ(t,e){1&t&&(y(0,"div",18),J(1,"img",19),E())}function vZ(t,e){1&t&&(y(0,"p",20),T(1,"administrar Usuarios"),E())}function IZ(t,e){1&t&&(y(0,"p",20),T(1,"visualizacion de segmentos"),E())}function EZ(t,e){1&t&&(y(0,"p",20),T(1,"administrar Documentos"),E())}function wZ(t,e){1&t&&(y(0,"p",20),T(1,"Ahorros"),E())}function CZ(t,e){1&t&&(y(0,"p",20),T(1,"Saldos y Movimientos"),E())}function bZ(t,e){1&t&&(y(0,"p",20),T(1,"Reclamos"),E())}const TZ=function(t){return{width:t}};let DZ=(()=>{class t{constructor(n){this.sharedService=n,this.showText=!0,this.sidebarWidth="20vw"}toggleTextVisibility(){this.showText=!this.showText,this.sidebarWidth=this.showText?"20vw":"auto",this.sharedService.updateSidebarWidth(this.sidebarWidth)}showContent(n,r){r}static#e=this.\u0275fac=function(r){return new(r||t)(G(KC))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-sidebar"]],decls:26,vars:10,consts:[[1,"sidebar",3,"ngStyle"],[1,"logo-toggle-container"],["class","logo-container",4,"ngIf"],["type","button",1,"toggle-btn",3,"click"],[1,"fas","fa-align-justify"],[1,"text-container"],[1,"button-container"],["routerLink","admin",3,"click"],[1,"fas","fa-user-edit"],["class","text",4,"ngIf"],["routerLink","filtrar",3,"click"],[1,"fa-solid","fa-chart-line"],["routerLink","adminDocs",3,"click"],[1,"far","fa-pen-to-square"],[3,"click"],[1,"fas","fa-piggy-bank"],[1,"fas","fa-coins"],[1,"fas","fa-truck"],[1,"logo-container"],["src","../../../assets/img/logotipo.png","alt","Logo",1,"logo"],[1,"text"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1),We(2,yZ,2,0,"div",2),y(3,"button",3),Le("click",function(){return i.toggleTextVisibility()}),J(4,"i",4),E()(),y(5,"div",5),J(6,"hr"),y(7,"div",6)(8,"button",7),Le("click",function(){return i.showContent("img1","btn1")}),J(9,"i",8),We(10,vZ,2,0,"p",9),E(),y(11,"button",10),Le("click",function(){return i.showContent("img5","btn5")}),J(12,"i",11),We(13,IZ,2,0,"p",9),E(),y(14,"button",12),Le("click",function(){return i.showContent("img5","btn5")}),J(15,"i",13),We(16,EZ,2,0,"p",9),E(),y(17,"button",14),Le("click",function(){return i.showContent("img2","btn2")}),J(18,"i",15),We(19,wZ,2,0,"p",9),E(),y(20,"button",14),Le("click",function(){return i.showContent("img3","btn3")}),J(21,"i",16),We(22,CZ,2,0,"p",9),E(),y(23,"button",14),Le("click",function(){return i.showContent("img4","btn4")}),J(24,"i",17),We(25,bZ,2,0,"p",9),E()()()()),2&r&&(de("ngStyle",Jw(8,TZ,i.sidebarWidth)),ce(2),de("ngIf",i.showText),ce(8),de("ngIf",i.showText),ce(3),de("ngIf",i.showText),ce(3),de("ngIf",i.showText),ce(3),de("ngIf",i.showText),ce(3),de("ngIf",i.showText),ce(3),de("ngIf",i.showText))},dependencies:[Do,Fx,ho],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}.sidebar[_ngcontent-%COMP%]{height:100vh;background:linear-gradient(to right,#0a1e3f,#086788);color:#fff;padding:20px;position:fixed;display:flex;flex-direction:column;transition:width .3s;align-items:center}.text-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.logo-toggle-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:4fr .5fr;margin-bottom:2vh}.logo-container[_ngcontent-%COMP%]{margin-right:4vh}.logo[_ngcontent-%COMP%]{width:100%}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:20px;cursor:pointer}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:3vh 0;background:none;border:none;color:#fff;font-size:2vh;display:flex;align-items:center}i[_ngcontent-%COMP%]{font-size:4vh}.text[_ngcontent-%COMP%]{margin-left:3vh}"]})}return t})();function QC(){return te((t,e)=>{let n,r=!1;t.subscribe(ge(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}var Ie,YC=Ue(537),ns=Ue(879),wt=Ue(58),AZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Po={},JC=JC||{},Je=AZ||self;function ev(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Tp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var XC="closure_uid_"+(1e9*Math.random()>>>0),RZ=0;function PZ(t,e,n){return t.call.apply(t.bind,arguments)}function MZ(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ur(t,e,n){return(Ur=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?PZ:MZ).apply(null,arguments)}function tv(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function yr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function ja(){this.s=this.s,this.o=this.o}ja.prototype.s=!1,ja.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function SZ(t){Object.prototype.hasOwnProperty.call(t,XC)&&t[XC]||(t[XC]=++RZ)}(this)},ja.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ok=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function eb(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function kk(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ev(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Br(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Br.prototype.h=function(){this.defaultPrevented=!0};var NZ=function(){if(!Je.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Je.addEventListener("test",n,e),Je.removeEventListener("test",n,e)}catch{}return t}();function Dp(t){return/^[\s\xa0]*$/.test(t)}function nv(){var t=Je.navigator;return t&&(t=t.userAgent)?t:""}function rs(t){return-1!=nv().indexOf(t)}function tb(t){return tb[" "](t),t}tb[" "]=function(){};var rb,t,kZ=rs("Opera"),fd=rs("Trident")||rs("MSIE"),Fk=rs("Edge"),nb=Fk||fd,Vk=rs("Gecko")&&!(-1!=nv().toLowerCase().indexOf("webkit")&&!rs("Edge"))&&!(rs("Trident")||rs("MSIE"))&&!rs("Edge"),FZ=-1!=nv().toLowerCase().indexOf("webkit")&&!rs("Edge");function Lk(){var t=Je.document;return t?t.documentMode:void 0}e:{var ib="",ob=(t=nv(),Vk?/rv:([^\);]+)(\)|;)/.exec(t):Fk?/Edge\/([\d\.]+)/.exec(t):fd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):FZ?/WebKit\/(\S+)/.exec(t):kZ?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(ob&&(ib=ob?ob[1]:""),fd){var sb=Lk();if(null!=sb&&sb>parseFloat(ib)){rb=String(sb);break e}}rb=ib}var VZ=Je.document&&fd&&(Lk()||parseInt(rb,10))||void 0;function Ap(t,e){if(Br.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Vk){e:{try{tb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:LZ[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ap.$.h.call(this)}}yr(Ap,Br);var LZ={2:"touch",3:"pen",4:"mouse"};Ap.prototype.h=function(){Ap.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Sp="closure_listenable_"+(1e6*Math.random()|0),UZ=0;function BZ(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++UZ,this.fa=this.ia=!1}function rv(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ub(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Bk(t){const e={};for(const n in t)e[n]=t[n];return e}const jk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $k(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<jk.length;o++)n=jk[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function iv(t){this.src=t,this.g={},this.h=0}function cb(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=Ok(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(rv(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function lb(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}iv.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=lb(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new BZ(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var db="closure_lm_"+(1e6*Math.random()|0),hb={};function Hk(t,e,n,r,i){if(r&&r.once)return qk(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Hk(t,e[o],n,r,i);return null}return n=mb(n),t&&t[Sp]?t.O(e,n,Tp(r)?!!r.capture:!!r,i):zk(t,e,n,!1,r,i)}function zk(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Tp(i)?!!i.capture:!!i,a=pb(t);if(a||(t[db]=a=new iv(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function $Z(){const e=HZ;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)NZ||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Wk(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function qk(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)qk(t,e[o],n,r,i);return null}return n=mb(n),t&&t[Sp]?t.P(e,n,Tp(r)?!!r.capture:!!r,i):zk(t,e,n,!0,r,i)}function Gk(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Gk(t,e[o],n,r,i);else r=Tp(r)?!!r.capture:!!r,n=mb(n),t&&t[Sp]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=lb(o=t.g[e],n,r,i))&&(rv(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=pb(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lb(e,n,r,i)),(n=-1<t?e[t]:null)&&fb(n))}function fb(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Sp])cb(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Wk(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=pb(e))?(cb(n,t),0==n.h&&(n.src=null,e[db]=null)):rv(t)}}}function Wk(t){return t in hb?hb[t]:hb[t]="on"+t}function HZ(t,e){if(t.fa)t=!0;else{e=new Ap(e,this);var n=t.listener,r=t.la||t.src;t.ia&&fb(t),t=n.call(r,e)}return t}function pb(t){return(t=t[db])instanceof iv?t:null}var gb="__closure_events_fn_"+(1e9*Math.random()>>>0);function mb(t){return"function"==typeof t?t:(t[gb]||(t[gb]=function(e){return t.handleEvent(e)}),t[gb])}function vr(){ja.call(this),this.i=new iv(this),this.S=this,this.J=null}function Sr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Br(e,t);else if(e instanceof Br)e.target=e.target||t;else{var i=e;$k(e=new Br(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=ov(s,r,!0,e)&&i}if(i=ov(s=e.g=t,r,!0,e)&&i,i=ov(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ov(s=e.g=n[o],r,!1,e)&&i}function ov(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&cb(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}yr(vr,ja),vr.prototype[Sp]=!0,vr.prototype.removeEventListener=function(t,e,n,r){Gk(this,t,e,n,r)},vr.prototype.N=function(){if(vr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rv(n[r]);delete t.g[e],t.h--}}this.J=null},vr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},vr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var _b=Je.JSON.stringify;function qZ(){var t=yb;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Zk=new class zZ{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new WZ,t=>t.reset());class WZ{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ZZ(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function KZ(t){Je.setTimeout(()=>{throw t},0)}let Rp,Pp=!1,yb=new class GZ{constructor(){this.h=this.g=null}add(e,n){const r=Zk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Kk=()=>{const t=Je.Promise.resolve(void 0);Rp=()=>{t.then(QZ)}};var QZ=()=>{for(var t;t=qZ();){try{t.h.call(t.g)}catch(n){KZ(n)}var e=Zk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pp=!1};function sv(t,e){vr.call(this),this.h=t||1,this.g=e||Je,this.j=Ur(this.qb,this),this.l=Date.now()}function vb(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Ib(t,e,n){if("function"==typeof t)n&&(t=Ur(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ur(t.handleEvent,t)}return 2147483647<Number(e)?-1:Je.setTimeout(t,e||0)}function Qk(t){t.g=Ib(()=>{t.g=null,t.i&&(t.i=!1,Qk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}yr(sv,vr),(Ie=sv.prototype).ga=!1,Ie.T=null,Ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Sr(this,"tick"),this.ga&&(vb(this),this.start()))}},Ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ie.N=function(){sv.$.N.call(this),vb(this),delete this.g};class YZ extends ja{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qk(this)}N(){super.N(),this.g&&(Je.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mp(t){ja.call(this),this.h=t,this.g={}}yr(Mp,ja);var Yk=[];function Jk(t,e,n,r){Array.isArray(n)||(n&&(Yk[0]=n.toString()),n=Yk);for(var i=0;i<n.length;i++){var o=Hk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Xk(t){ub(t.g,function(e,n){this.g.hasOwnProperty(n)&&fb(e)},t),t.g={}}function av(){this.g=!0}function pd(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tK(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return _b(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Mp.prototype.N=function(){Mp.$.N.call(this),Xk(this)},Mp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},av.prototype.Ea=function(){this.g=!1},av.prototype.info=function(){};var Xu={},eF=null;function uv(){return eF=eF||new vr}function tF(t){Br.call(this,Xu.Ta,t)}function xp(t){const e=uv();Sr(e,new tF(e))}function nF(t,e){Br.call(this,Xu.STAT_EVENT,t),this.stat=e}function ui(t){const e=uv();Sr(e,new nF(e,t))}function rF(t,e){Br.call(this,Xu.Ua,t),this.size=e}function Np(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Je.setTimeout(function(){t()},e)}Xu.Ta="serverreachability",yr(tF,Br),Xu.STAT_EVENT="statevent",yr(nF,Br),Xu.Ua="timingevent",yr(rF,Br);var cv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},iF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Eb(){}function sF(){}Eb.prototype.h=null;var bb,Op={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function wb(){Br.call(this,"d")}function Cb(){Br.call(this,"c")}function lv(){}function kp(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Mp(this),this.P=nK,this.V=new sv(t=nb?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new aF}function aF(){this.i=null,this.g="",this.h=!1}yr(wb,Br),yr(Cb,Br),yr(lv,Eb),lv.prototype.g=function(){return new XMLHttpRequest},lv.prototype.i=function(){return{}},bb=new lv;var nK=45e3,uF={},Tb={};function Db(t,e,n){t.L=1,t.A=pv(Hs(e)),t.u=n,t.S=!0,cF(t,null)}function cF(t,e){t.G=Date.now(),Fp(t),t.B=Hs(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),vF(n.i,"t",r),t.o=0,n=t.l.J,t.h=new aF,t.g=HF(t.l,n?e:null,!t.u),0<t.O&&(t.M=new YZ(Ur(t.Pa,t,t.g),t.O)),Jk(t.U,t.g,"readystatechange",t.nb),e=t.I?Bk(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),xp(),function JZ(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");s=2<=g.length&&"type"==g[1]?s+(h+"=")+l+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function lF(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function dF(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=rK(t,n),i==Tb){4==e&&(t.s=4,ui(14),r=!1),pd(t.j,t.m,null,"[Incomplete Response]");break}if(i==uF){t.s=4,ui(15),pd(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}pd(t.j,t.m,i,null),Ab(t,i)}lF(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,ui(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ob(e),e.M=!0,ui(11))):(pd(t.j,t.m,n,"[Invalid Chunked Response]"),ec(t),Vp(t))}function rK(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?Tb:(n=Number(e.substring(n,r)),isNaN(n)?uF:(r+=1)+n>e.length?Tb:(e=e.slice(r,r+n),t.o=r+n,e))}function Fp(t){t.Y=Date.now()+t.P,hF(t,t.P)}function hF(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Np(Ur(t.lb,t),e)}function dv(t){t.C&&(Je.clearTimeout(t.C),t.C=null)}function Vp(t){0==t.l.H||t.J||UF(t.l,t)}function ec(t){dv(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,vb(t.V),Xk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ab(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Sb(n.i,t)))if(!t.K&&Sb(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Iv(n),yv(n)}Nb(n),ui(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Np(Ur(n.ib,n),6e3));if(1>=wF(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else nc(n,11)}else if((t.K||n.g==t)&&Iv(n),!Dp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const A=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var o=r.i;o.g||-1==A.indexOf("spdy")&&-1==A.indexOf("quic")&&-1==A.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Rb(o,o.h),o.h=null))}if(r.F){const R=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(r.Da=R,hn(r.I,r.F,R))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=$F(r,r.J?r.pa:null,r.Y),s.K){CF(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(dv(a),Fp(a)),r.g=s}else VF(r);0<n.j.length&&vv(n)}else"stop"!=l[0]&&"close"!=l[0]||nc(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nc(n,7):xb(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}xp()}catch{}}function fF(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ev(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function oK(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ev(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function iK(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ev(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(Ie=kp.prototype).setTimeout=function(t){this.P=t},Ie.nb=function(t){t=t.target;const e=this.M;e&&3==is(t)?e.l():this.Pa(t)},Ie.Pa=function(t){try{if(t==this.g)e:{const h=is(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||nb||this.g&&(this.h.h||this.g.ja()||MF(this.g)))){this.J||4!=h||7==e||xp(),dv(this);var n=this.g.da();this.ca=n;t:if(lF(this)){var r=MF(this.g);t="";var i=r.length,o=4==is(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ec(this),Vp(this);var s="";break t}this.h.i=new Je.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function XZ(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dp(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,ui(12),ec(this),Vp(this);break e}pd(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ab(this,n)}this.S?(dF(this,h,s),nb&&this.i&&3==h&&(Jk(this.U,this.V,"tick",this.mb),this.V.start())):(pd(this.j,this.m,s,null),Ab(this,s)),4==h&&ec(this),this.i&&!this.J&&(4==h?UF(this.l,this):(this.i=!1,Fp(this)))}else(function CK(t){const e={};t=(t.g&&2<=is(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Dp(t[r]))continue;var n=ZZ(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function jZ(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,ui(12)):(this.s=0,ui(13)),ec(this),Vp(this)}}}catch{}},Ie.mb=function(){if(this.g){var t=is(this.g),e=this.g.ja();this.o<e.length&&(dv(this),dF(this,t,e),this.i&&4!=t&&Fp(this))}},Ie.cancel=function(){this.J=!0,ec(this)},Ie.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function eK(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(xp(),ui(17)),ec(this),this.s=2,Vp(this)):hF(this,this.Y-t)};var pF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof tc){this.h=t.h,hv(this,t.j),this.s=t.s,this.g=t.g,fv(this,t.m),this.l=t.l;var e=t.i,n=new Bp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),gF(this,n),this.o=t.o}else t&&(e=String(t).match(pF))?(this.h=!1,hv(this,e[1]||"",!0),this.s=Lp(e[2]||""),this.g=Lp(e[3]||"",!0),fv(this,e[4]),this.l=Lp(e[5]||"",!0),gF(this,e[6]||"",!0),this.o=Lp(e[7]||"")):(this.h=!1,this.i=new Bp(null,this.h))}function Hs(t){return new tc(t)}function hv(t,e,n){t.j=n?Lp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function fv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function gF(t,e,n){e instanceof Bp?(t.i=e,function hK(t,e){e&&!t.j&&($a(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(_F(this,r),vF(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Up(e,lK)),t.i=new Bp(e,t.h))}function hn(t,e,n){t.i.set(e,n)}function pv(t){return hn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Lp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Up(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,aK),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function aK(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}tc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Up(e,mF,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Up(e,mF,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Up(n,"/"==n.charAt(0)?cK:uK,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Up(n,dK)),t.join("")};var mF=/[#\/\?@]/g,uK=/[#\?:]/g,cK=/[#\?]/g,lK=/[#\?@]/g,dK=/#/g;function Bp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $a(t){t.g||(t.g=new Map,t.h=0,t.i&&function sK(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function _F(t,e){$a(t),e=gd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function yF(t,e){return $a(t),e=gd(t,e),t.g.has(e)}function vF(t,e,n){_F(t,e),0<n.length&&(t.i=null,t.g.set(gd(t,e),eb(n)),t.h+=n.length)}function gd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function IF(t){this.l=t||pK,t=Je.PerformanceNavigationTiming?0<(t=Je.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Je.g&&Je.g.Ka&&Je.g.Ka()&&Je.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ie=Bp.prototype).add=function(t,e){$a(this),this.i=null,t=gd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ie.forEach=function(t,e){$a(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},Ie.ta=function(){$a(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},Ie.Z=function(t){$a(this);let e=[];if("string"==typeof t)yF(this,t)&&(e=e.concat(this.g.get(gd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Ie.set=function(t,e){return $a(this),this.i=null,yF(this,t=gd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ie.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var pK=10;function EF(t){return!!t.h||!!t.g&&t.g.size>=t.j}function wF(t){return t.h?1:t.g?t.g.size:0}function Sb(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Rb(t,e){t.g?t.g.add(e):t.h=e}function CF(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function bF(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return eb(t.i)}IF.prototype.cancel=function(){if(this.i=bF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var gK=class{stringify(t){return Je.JSON.stringify(t,void 0)}parse(t){return Je.JSON.parse(t,void 0)}};function mK(){this.g=new gK}function _K(t,e,n){const r=n||"";try{fF(t,function(i,o){let s=i;Tp(i)&&(s=_b(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function jp(t){this.l=t.ec||null,this.j=t.ob||!1}function mv(t,e){vr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Pb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yr(jp,Eb),jp.prototype.g=function(){return new mv(this.l,this.j)},jp.prototype.i=function(t){return function(){return t}}({}),yr(mv,vr);var Pb=0;function TF(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function $p(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Hp(t)}function Hp(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ie=mv.prototype).open=function(t,e){if(this.readyState!=Pb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Hp(this)},Ie.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Je).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$p(this)),this.readyState=Pb},Ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Hp(this)),this.g&&(this.readyState=3,Hp(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Je.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;TF(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?$p(this):Hp(this),3==this.readyState&&TF(this)}},Ie.Za=function(t){this.g&&(this.response=this.responseText=t,$p(this))},Ie.Ya=function(t){this.g&&(this.response=t,$p(this))},Ie.ka=function(){this.g&&$p(this)},Ie.setRequestHeader=function(t,e){this.v.append(t,e)},Ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(mv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var vK=Je.JSON.parse;function Vn(t){vr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=DF,this.L=this.M=!1}yr(Vn,vr);var DF="",IK=/^https?$/i,EK=["POST","PUT"];function AF(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,SF(t),_v(t)}function SF(t){t.F||(t.F=!0,Sr(t,"complete"),Sr(t,"error"))}function RF(t){if(t.h&&typeof JC<"u"&&(!t.C[1]||4!=is(t)||2!=t.da()))if(t.v&&4==is(t))Ib(t.La,0,t);else if(Sr(t,"readystatechange"),4==is(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(pF)[1]||null;!i&&Je.self&&Je.self.location&&(i=Je.self.location.protocol.slice(0,-1)),r=!IK.test(i?i.toLowerCase():"")}n=r}if(n)Sr(t,"complete"),Sr(t,"success");else{t.m=6;try{var o=2<is(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",SF(t)}}finally{_v(t)}}}function _v(t,e){if(t.g){PF(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Sr(t,"ready");try{n.onreadystatechange=r}catch{}}}function PF(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Je.clearTimeout(t.A),t.A=null)}function is(t){return t.g?t.g.readyState:0}function MF(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case DF:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function xF(t){let e="";return ub(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function Mb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=xF(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):hn(t,e,n))}function zp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function NF(t){this.Ga=0,this.j=[],this.l=new av,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=zp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=zp("baseRetryDelayMs",5e3,t),this.hb=zp("retryDelaySeedMs",1e4,t),this.eb=zp("forwardChannelMaxRetries",2,t),this.xa=zp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new IF(t&&t.concurrentRequestLimit),this.Ja=new mK,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function xb(t){if(OF(t),3==t.H){var e=t.W++,n=Hs(t.I);if(hn(n,"SID",t.K),hn(n,"RID",e),hn(n,"TYPE","terminate"),qp(t,n),(e=new kp(t,t.l,e)).L=2,e.A=pv(Hs(n)),n=!1,Je.navigator&&Je.navigator.sendBeacon)try{n=Je.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Je.Image&&((new Image).src=e.A,n=!0),n||(e.g=HF(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Fp(e)}jF(t)}function yv(t){t.g&&(Ob(t),t.g.cancel(),t.g=null)}function OF(t){yv(t),t.u&&(Je.clearTimeout(t.u),t.u=null),Iv(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Je.clearTimeout(t.m),t.m=null)}function vv(t){if(!EF(t.i)&&!t.m){t.m=!0;var e=t.Na;Rp||Kk(),Pp||(Rp(),Pp=!0),yb.add(e,t),t.C=0}}function kF(t,e){var n;n=e?e.m:t.W++;const r=Hs(t.I);hn(r,"SID",t.K),hn(r,"RID",n),hn(r,"AID",t.V),qp(t,r),t.o&&t.s&&Mb(r,t.o,t.s),n=new kp(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=FF(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Rb(t.i,n),Db(n,r,e)}function qp(t,e){t.na&&ub(t.na,function(n,r){hn(e,r,n)}),t.h&&fF({},function(n,r){hn(e,r,n)})}function FF(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ur(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=o,0>l)o=Math.max(0,i[u].g-100),a=!1;else try{_K(h,s,"req"+l+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function VF(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Rp||Kk(),Pp||(Rp(),Pp=!0),yb.add(e,t),t.A=0}}function Nb(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Np(Ur(t.Ma,t),BF(t,t.A)),t.A++,0))}function Ob(t){null!=t.B&&(Je.clearTimeout(t.B),t.B=null)}function LF(t){t.g=new kp(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Hs(t.wa);hn(e,"RID","rpc"),hn(e,"SID",t.K),hn(e,"AID",t.V),hn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&hn(e,"TO",t.qa),hn(e,"TYPE","xmlhttp"),qp(t,e),t.o&&t.s&&Mb(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=pv(Hs(e)),n.u=null,n.S=!0,cF(n,t)}function Iv(t){null!=t.v&&(Je.clearTimeout(t.v),t.v=null)}function UF(t,e){var n=null;if(t.g==e){Iv(t),Ob(t),t.g=null;var r=2}else{if(!Sb(t.i,e))return;n=e.F,CF(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Sr(r=uv(),new rF(r,n)),vv(t)}else VF(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function bK(t,e){return!(wF(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Np(Ur(t.Na,t,e),BF(t,t.C)),t.C++,0)))}(t,e)||2==r&&Nb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:nc(t,5);break;case 4:nc(t,10);break;case 3:nc(t,6);break;default:nc(t,2)}}function BF(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function nc(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Ur(t.pb,t);n||(n=new tc("//www.google.com/images/cleardot.gif"),Je.location&&"http"==Je.location.protocol||hv(n,"https"),pv(n)),function yK(t,e){const n=new av;if(Je.Image){const r=new Image;r.onload=tv(gv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=tv(gv,n,r,"TestLoadImage: error",!1,e),r.onabort=tv(gv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=tv(gv,n,r,"TestLoadImage: timeout",!1,e),Je.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ui(2);t.H=0,t.h&&t.h.za(e),jF(t),OF(t)}function jF(t){if(t.H=0,t.ma=[],t.h){const e=bF(t.i);(0!=e.length||0!=t.j.length)&&(kk(t.ma,e),kk(t.ma,t.j),t.i.i.length=0,eb(t.j),t.j.length=0),t.h.ya()}}function $F(t,e,n){var r=n instanceof tc?Hs(n):new tc(n);if(""!=r.g)e&&(r.g=e+"."+r.g),fv(r,r.m);else{var i=Je.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new tc(null);r&&hv(o,r),e&&(o.g=e),i&&fv(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&hn(r,n,e),hn(r,"VER",t.ra),qp(t,r),r}function HF(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vn(t.Ha&&!t.va?new jp({ob:n}):t.va)).Oa(t.J),e}function zF(){}function Ev(){if(fd&&!(10<=Number(VZ)))throw Error("Environmental error: no available transport.")}function Ui(t,e){vr.call(this),this.g=new NF(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Dp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new md(this)}function qF(t){wb.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function GF(){Cb.call(this),this.status=1}function md(t){this.g=t}function Mo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function kb(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function $t(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(Ie=Vn.prototype).Oa=function(t){this.M=t},Ie.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bb.g(),this.C=function oF(t){return t.h||(t.h=t.i())}(this.u?this.u:bb),this.g.onreadystatechange=Ur(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void AF(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=Je.FormData&&t instanceof Je.FormData,!(0<=Ok(EK,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{PF(this),0<this.B&&((this.L=function wK(t){return fd&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ur(this.ua,this)):this.A=Ib(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){AF(this,o)}},Ie.ua=function(){typeof JC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sr(this,"timeout"),this.abort(8))},Ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Sr(this,"complete"),Sr(this,"abort"),_v(this))},Ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_v(this,!0)),Vn.$.N.call(this)},Ie.La=function(){this.s||(this.G||this.v||this.l?RF(this):this.kb())},Ie.kb=function(){RF(this)},Ie.isActive=function(){return!!this.g},Ie.da=function(){try{return 2<is(this)?this.g.status:-1}catch{return-1}},Ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vK(e)}},Ie.Ia=function(){return this.m},Ie.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ie=NF.prototype).ra=8,Ie.H=1,Ie.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new kp(this,this.l,t);let o=this.s;if(this.U&&(o?(o=Bk(o),$k(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=FF(this,i,e),hn(n=Hs(this.I),"RID",t),hn(n,"CVER",22),this.F&&hn(n,"X-HTTP-Session-Id",this.F),qp(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(xF(o)))+"&"+e:this.o&&Mb(n,this.o,o)),Rb(this.i,i),this.bb&&hn(n,"TYPE","init"),this.P?(hn(n,"$req",e),hn(n,"SID","null"),i.aa=!0,Db(i,n,null)):Db(i,n,e),this.H=2}}else 3==this.H&&(t?kF(this,t):0==this.j.length||EF(this.i)||kF(this))},Ie.Ma=function(){if(this.u=null,LF(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Np(Ur(this.jb,this),t)}},Ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ui(10),yv(this),LF(this))},Ie.ib=function(){null!=this.v&&(this.v=null,yv(this),Nb(this),ui(19))},Ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ui(2)):(this.l.info("Failed to ping google.com"),ui(1))},Ie.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ie=zF.prototype).Ba=function(){},Ie.Aa=function(){},Ie.za=function(){},Ie.ya=function(){},Ie.isActive=function(){return!0},Ie.Va=function(){},Ev.prototype.g=function(t,e){return new Ui(t,e)},yr(Ui,vr),Ui.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ui(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=$F(t,null,t.Y),vv(t)},Ui.prototype.close=function(){xb(this.g)},Ui.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=_b(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&vv(e)},Ui.prototype.N=function(){this.g.h=null,delete this.j,xb(this.g),delete this.g,Ui.$.N.call(this)},yr(qF,wb),yr(GF,Cb),yr(md,zF),md.prototype.Ba=function(){Sr(this.g,"a")},md.prototype.Aa=function(t){Sr(this.g,new qF(t))},md.prototype.za=function(t){Sr(this.g,new GF)},md.prototype.ya=function(){Sr(this.g,"b")},yr(Mo,function TK(){this.blockSize=-1}),Mo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Mo.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)kb(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){kb(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){kb(this,r),i=0;break}}this.h=i,this.i+=e},Mo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var DK={};function Fb(t){return-128<=t&&128>t?function OZ(t,e){var n=DK;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new $t([0|e],0>e?-1:0)}):new $t([0|t],0>t?-1:0)}function os(t){if(isNaN(t)||!isFinite(t))return _d;if(0>t)return Rr(os(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Vb;return new $t(e,0)}var Vb=4294967296,_d=Fb(0),Lb=Fb(1),ZF=Fb(16777216);function zs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function fo(t){return-1==t.h}function Rr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new $t(n,~t.h).add(Lb)}function wv(t,e){return t.add(Rr(e))}function Cv(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Gp(t,e){this.g=t,this.h=e}function bv(t,e){if(zs(e))throw Error("division by zero");if(zs(t))return new Gp(_d,_d);if(fo(t))return e=bv(Rr(t),e),new Gp(Rr(e.g),Rr(e.h));if(fo(e))return e=bv(t,Rr(e)),new Gp(Rr(e.g),e.h);if(30<t.g.length){if(fo(t)||fo(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Lb,r=e;0>=r.X(t);)n=KF(n),r=KF(r);var i=yd(n,1),o=yd(r,1);for(r=yd(r,2),n=yd(n,2);!zs(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=yd(r,1),n=yd(n,1)}return e=wv(t,i.R(e)),new Gp(i,e)}for(i=_d;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=os(n)).R(e);fo(s)||0<s.X(t);)s=(o=os(n-=r)).R(e);zs(o)&&(o=Lb),i=i.add(o),t=wv(t,s)}return new Gp(i,t)}function KF(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new $t(n,t.h)}function yd(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new $t(i,t.h)}(Ie=$t.prototype).ea=function(){if(fo(this))return-Rr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Vb+r)*e,e*=Vb}return t},Ie.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(zs(this))return"0";if(fo(this))return"-"+Rr(this).toString(t);for(var e=os(Math.pow(t,6)),n=this,r="";;){var i=bv(n,e).g,o=((0<(n=wv(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(zs(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Ie.X=function(t){return fo(t=wv(this,t))?-1:zs(t)?0:1},Ie.abs=function(){return fo(this)?Rr(this):this},Ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new $t(n,-2147483648&n[n.length-1]?-1:0)},Ie.R=function(t){if(zs(this)||zs(t))return _d;if(fo(this))return fo(t)?Rr(this).R(Rr(t)):Rr(Rr(this).R(t));if(fo(t))return Rr(this.R(Rr(t)));if(0>this.X(ZF)&&0>t.X(ZF))return os(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,Cv(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Cv(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Cv(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Cv(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new $t(n,0)},Ie.gb=function(t){return bv(this,t).h},Ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new $t(n,this.h&t.h)},Ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new $t(n,this.h|t.h)},Ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new $t(n,this.h^t.h)},Ev.prototype.createWebChannel=Ev.prototype.g,Ui.prototype.send=Ui.prototype.u,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,cv.NO_ERROR=0,cv.TIMEOUT=8,cv.HTTP_ERROR=6,iF.COMPLETE="complete",sF.EventType=Op,Op.OPEN="a",Op.CLOSE="b",Op.ERROR="c",Op.MESSAGE="d",vr.prototype.listen=vr.prototype.O,Vn.prototype.listenOnce=Vn.prototype.P,Vn.prototype.getLastError=Vn.prototype.Sa,Vn.prototype.getLastErrorCode=Vn.prototype.Ia,Vn.prototype.getStatus=Vn.prototype.da,Vn.prototype.getResponseJson=Vn.prototype.Wa,Vn.prototype.getResponseText=Vn.prototype.ja,Vn.prototype.send=Vn.prototype.ha,Vn.prototype.setWithCredentials=Vn.prototype.Oa,Mo.prototype.digest=Mo.prototype.l,Mo.prototype.reset=Mo.prototype.reset,Mo.prototype.update=Mo.prototype.j,$t.prototype.add=$t.prototype.add,$t.prototype.multiply=$t.prototype.R,$t.prototype.modulo=$t.prototype.gb,$t.prototype.compare=$t.prototype.X,$t.prototype.toNumber=$t.prototype.ea,$t.prototype.toString=$t.prototype.toString,$t.prototype.getBits=$t.prototype.D,$t.fromNumber=os,$t.fromString=function WF(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Rr(WF(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=os(Math.pow(e,8)),r=_d,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=os(Math.pow(e,o)),r=r.R(o).add(os(s))):r=(r=r.R(n)).add(os(s))}return r};var AK=Po.createWebChannelTransport=function(){return new Ev},SK=Po.getStatEventTarget=function(){return uv()},Ub=Po.ErrorCode=cv,RK=Po.EventType=iF,PK=Po.Event=Xu,QF=Po.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Tv=(Po.FetchXmlHttpFactory=jp,Po.WebChannel=sF),MK=Po.XhrIo=Vn,xK=Po.Md5=Mo,vd=Po.Integer=$t;const YF="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let Id="10.7.0";const Ha=new ns.Yd("@firebase/firestore");function Ed(){return Ha.logLevel}function ue(t,...e){if(Ha.logLevel<=ns.in.DEBUG){const n=e.map(Bb);Ha.debug(`Firestore (${Id}): ${t}`,...n)}}function Zn(t,...e){if(Ha.logLevel<=ns.in.ERROR){const n=e.map(Bb);Ha.error(`Firestore (${Id}): ${t}`,...n)}}function wi(t,...e){if(Ha.logLevel<=ns.in.WARN){const n=e.map(Bb);Ha.warn(`Firestore (${Id}): ${t}`,...n)}}function Bb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function De(t="Unexpected state"){const e=`FIRESTORE (${Id}) INTERNAL ASSERTION FAILED: `+t;throw Zn(e),new Error(e)}function Ne(t,e){t||De()}function pe(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends wt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class JF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ir.UNAUTHENTICATED))}shutdown(){}}class FK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VK{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cr,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,Q.Z)(function*(){yield l.promise,yield o(r.currentUser)}))},u=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne("string"==typeof r.accessToken),new JF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ne(null===e||"string"==typeof e),new Ir(e)}}class LK{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UK{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new LK(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne("string"==typeof n.token),this.R=n.token,new XF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function jK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class eV{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=jK(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Qe(t,e){return t<e?-1:t>e?1:0}function wd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function tV(t){return t+"\0"}class vn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new vn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new vn(0,0))}static max(){return new ke(new vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wp{constructor(e,n,r){void 0===n?n=0:n>e.length&&De(),void 0===r?r=e.length-n:r>e.length-n&&De(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Wp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class St extends Wp{construct(e,n,r){return new St(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new St(n)}static emptyPath(){return new St([])}}const $K=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Wp{construct(e,n,r){return new fn(e,n,r)}static isValidIdentifier(e){return $K.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ie(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ie(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ie(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ie(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(St.fromString(e))}static fromName(e){return new _e(St.fromString(e).popFirst(5))}static empty(){return new _e(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===St.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new St(e.slice()))}}class Cd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function jb(t){return t.fields.find(e=>2===e.kind)}function rc(t){return t.fields.filter(e=>2!==e.kind)}Cd.UNKNOWN_ID=-1;class ic{constructor(e,n){this.fieldPath=e,this.kind=n}}class bd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new bd(0,Bi.min())}}function nV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(1e9===r?new vn(n+1,0):new vn(n,r));return new Bi(i,_e.empty(),e)}function rV(t){return new Bi(t.readTime,t.key,-1)}class Bi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bi(ke.min(),_e.empty(),-1)}static max(){return new Bi(ke.max(),_e.empty(),-1)}}function $b(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=_e.comparator(t.documentKey,e.documentKey),0!==n?n:Qe(t.largestBatchId,e.largestBatchId))}const iV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function za(t){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,Q.Z)(function*(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==iV)throw t;ue("LocalStore","Unexpectedly lost primary lease")}),Hb.apply(this,arguments)}class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new V((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Dv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new cr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Zp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=zb(r.target.error);this.V.reject(new Zp(e,i))}}static open(e,n,r,i){try{return new Dv(n,e.transaction(i,r))}catch(o){throw new Zp(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new GK(n)}}class xo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===xo.S((0,wt.z$)())&&Zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,wt.hl)())return!1;if(xo.C())return!0;const e=(0,wt.z$)(),n=xo.S(e),r=0<n&&n<10,i=xo.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,Q.Z)(function*(){return n.db||(ue("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Zp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new ie(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ie(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Zp(e,a))},o.onupgradeneeded=s=>{ue("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{ue("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,Q.Z)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=Dv.open(o.db,e,s?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),V.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(ue("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),o.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qK{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return oc(this.k.delete())}}class Zp extends ie{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function qa(t){return"IndexedDbTransactionError"===t.name}class GK{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ue("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oc(r)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(n=>(void 0===n&&(n=null),ue("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),oc(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(r.range);return new V((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new V((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new V((r,i)=>{n.onerror=o=>{const s=zb(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new V((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new qK(a),l=n(a.primaryKey,a.value,u);if(l instanceof V){const h=l.catch(g=>(u.done(),V.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>V.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function oc(t){return new V((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=zb(r.target.error);n(i)}})}let sV=!1;function zb(t){const e=xo.S((0,wt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sV||(sV=!0,setTimeout(()=>{throw r},0)),r}}return t}class WK{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Q.Z)(function*(){n.task=null;try{ue("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){qa(r)?ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield za(r)}yield n.ee(6e4)}))}}class ZK{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Q.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return V.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ue("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(ue("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=rV(o);$b(s,r)>0&&(r=s)}),new Bi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let ji=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Kp(t){return null==t}function Qp(t){return 0===t&&1/t==-1/0}function aV(t){return"number"==typeof t&&Number.isInteger(t)&&!Qp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function jr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uV(e)),e=KK(t.get(n),e);return uV(e)}function KK(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function uV(t){return t+"\x01\x01"}function ss(t){const e=t.length;if(Ne(e>=2),2===e)return Ne("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),St.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&De(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:De()}o=s+2}return new St(r)}const cV=["userId","batchId"];function Av(t,e){return[t,jr(e)]}function lV(t,e,n){return[t,jr(e),n]}const QK={},YK=["prefixPath","collectionGroup","readTime","documentId"],JK=["prefixPath","collectionGroup","documentId"],XK=["collectionGroup","readTime","prefixPath","documentId"],eQ=["canonicalId","targetId"],tQ=["targetId","path"],nQ=["path","targetId"],rQ=["collectionId","parent"],iQ=["indexId","uid"],oQ=["uid","sequenceNumber"],sQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aQ=["indexId","uid","orderedDocumentKey"],uQ=["userId","collectionPath","documentId"],cQ=["userId","collectionPath","largestBatchId"],lQ=["userId","collectionGroup","largestBatchId"],dV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dQ=[...dV,"documentOverlays"],hV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fV=hV,hQ=[...fV,"indexConfiguration","indexState","indexEntries"];class qb extends oV{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Er(t,e){const n=pe(t);return xo.M(n.ae,e)}function pV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ga(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class tn{constructor(e,n){this.comparator=e,this.root=n||Pr.EMPTY}insert(e,n){return new tn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sv(this.root,e,this.comparator,!0)}}class Sv{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Pr.RED,this.left=i??Pr.EMPTY,this.right=o??Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Pr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1,Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mV(this.data.getIterator())}getIteratorFrom(e){return new mV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Gt(this.comparator);return n.data=e,n}}class mV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Td(t){return t.hasNext()?t.getNext():void 0}class Ci{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Ci([])}unionWith(e){let n=new Gt(fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class _V extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _V("Invalid base64 string: "+o):o}}(e);return new lr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new lr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const pQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wa(t){if(Ne(!!t),"string"==typeof t){let e=0;const n=pQ.exec(t);if(Ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ln(t.seconds),nanos:Ln(t.nanos)}}function Ln(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function qs(t){return"string"==typeof t?lr.fromBase64String(t):lr.fromUint8Array(t)}function Rv(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pv(t){const e=t.mapValue.fields.__previous_value__;return Rv(e)?Pv(e):e}function Yp(t){const e=Wa(t.mapValue.fields.__local_write_time__.timestampValue);return new vn(e.seconds,e.nanos)}class gQ{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}const Ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mv={nullValue:"NULL_VALUE"};function Qa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rv(t)?4:EV(t)?9007199254740991:10:De()}function as(t,e){if(t===e)return!0;const n=Qa(t);if(n!==Qa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yp(t).isEqual(Yp(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Wa(i.timestampValue),a=Wa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,qs(t.bytesValue).isEqual(qs(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ln(i.geoPointValue.latitude)===Ln(o.geoPointValue.latitude)&&Ln(i.geoPointValue.longitude)===Ln(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ln(i.integerValue)===Ln(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ln(i.doubleValue),a=Ln(o.doubleValue);return s===a?Qp(s)===Qp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return wd(t.arrayValue.values||[],e.arrayValue.values||[],as);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(pV(s)!==pV(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!as(s[u],a[u])))return!1;return!0}(t,e);default:return De()}var o}function Jp(t,e){return void 0!==(t.values||[]).find(n=>as(n,e))}function Ya(t,e){if(t===e)return 0;const n=Qa(t),r=Qa(e);if(n!==r)return Qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Ln(o.integerValue||o.doubleValue),u=Ln(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return yV(t.timestampValue,e.timestampValue);case 4:return yV(Yp(t),Yp(e));case 5:return Qe(t.stringValue,e.stringValue);case 6:return function(o,s){const a=qs(o),u=qs(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=Qe(a[l],u[l]);if(0!==h)return h}return Qe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Qe(Ln(o.latitude),Ln(s.latitude));return 0!==a?a:Qe(Ln(o.longitude),Ln(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Ya(a[l],u[l]);if(h)return h}return Qe(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ka.mapValue&&s===Ka.mapValue)return 0;if(o===Ka.mapValue)return 1;if(s===Ka.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=Qe(u[g],h[g]);if(0!==m)return m;const v=Ya(a[u[g]],l[h[g]]);if(0!==v)return v}return Qe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw De()}}function yV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Qe(t,e);const n=Wa(t),r=Wa(e),i=Qe(n.seconds,r.seconds);return 0!==i?i:Qe(n.nanos,r.nanos)}function Dd(t){return Gb(t)}function Gb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?qs(t.bytesValue).toBase64():"referenceValue"in t?_e.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Gb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Gb(n.fields[s])}`;return i+"}"}(t.mapValue):De()}function sc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wb(t){return!!t&&"integerValue"in t}function Xp(t){return!!t&&"arrayValue"in t}function vV(t){return!!t&&"nullValue"in t}function IV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nv(t){return!!t&&"mapValue"in t}function eg(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ga(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eg(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EV(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function mQ(t){return"nullValue"in t?Mv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?sc(Za.empty(),_e.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:De()}function _Q(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?sc(Za.empty(),_e.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ka:De()}function wV(t,e){const n=Ya(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function CV(t,e){const n=Ya(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Mr{constructor(e){this.value=e}static empty(){return new Mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eg(n)}setAll(e){let n=fn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=eg(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Nv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ga(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Mr(eg(this.value))}}function bV(t){const e=[];return Ga(t.fields,(n,r)=>{const i=new fn([n]);if(Nv(r)){const o=bV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ci(e)}class pn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new pn(e,0,ke.min(),ke.min(),ke.min(),Mr.empty(),0)}static newFoundDocument(e,n,r,i){return new pn(e,1,n,ke.min(),r,i,0)}static newNoDocument(e,n){return new pn(e,2,n,ke.min(),ke.min(),Mr.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,ke.min(),ke.min(),Mr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ja{constructor(e,n){this.position=e,this.inclusive=n}}function TV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?_e.comparator(_e.fromName(s.referenceValue),n.key):Ya(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function DV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!as(t.position[n],e.position[n]))return!1;return!0}class tg{constructor(e,n="asc"){this.field=e,this.dir=n}}function yQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class AV{}class Ct extends AV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new vQ(e,n,r):"array-contains"===n?new wQ(e,r):"in"===n?new NV(e,r):"not-in"===n?new CQ(e,r):"array-contains-any"===n?new bQ(e,r):new Ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new IQ(e,r):new EQ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ya(n,this.value)):null!==n&&Qa(this.value)===Qa(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends AV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ht(e,n)}matches(e){return Ad(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ad(t){return"and"===t.op}function Zb(t){return"or"===t.op}function Kb(t){return SV(t)&&Ad(t)}function SV(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function Qb(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+Dd(t.value);if(Kb(t))return t.filters.map(e=>Qb(e)).join(",");{const e=t.filters.map(n=>Qb(n)).join(",");return`${t.op}(${e})`}}function RV(t,e){return t instanceof Ct?(r=t,(i=e)instanceof Ct&&r.op===i.op&&r.field.isEqual(i.field)&&as(r.value,i.value)):t instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&RV(s,i.filters[a]),!0)}(t,e):void De();var r,i}function PV(t,e){const n=t.filters.concat(e);return Ht.create(n,t.op)}function MV(t){return t instanceof Ct?`${(n=t).field.canonicalString()} ${n.op} ${Dd(n.value)}`:t instanceof Ht?function(n){return n.op.toString()+" {"+n.getFilters().map(MV).join(" ,")+"}"}(t):"Filter";var n}class vQ extends Ct{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class IQ extends Ct{constructor(e,n){super(e,"in",n),this.keys=xV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EQ extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=xV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>_e.fromName(r.referenceValue))}class wQ extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&Jp(n.arrayValue,this.value)}}class NV extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Jp(this.value.arrayValue,n)}}class CQ extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Jp(this.value.arrayValue,n)}}class bQ extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jp(this.value.arrayValue,r))}}class TQ{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function Yb(t,e=null,n=[],r=[],i=null,o=null,s=null){return new TQ(t,e,n,r,i,o,s)}function ac(t){const e=pe(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Kp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dd(r)).join(",")),e.ce=n}return e.ce}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!DV(t.startAt,e.startAt)&&DV(t.endAt,e.endAt)}function Ov(t){return _e.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function kv(t,e){return t.filters.filter(n=>n instanceof Ct&&n.field.isEqual(e))}function OV(t,e,n){let r=Mv,i=!0;for(const o of kv(t,e)){let s=Mv,a=!0;switch(o.op){case"<":case"<=":s=mQ(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Mv}wV({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];wV({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function kV(t,e,n){let r=Ka,i=!0;for(const o of kv(t,e)){let s=Ka,a=!0;switch(o.op){case">=":case">":s=_Q(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ka}CV({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];CV({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class Gs{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function FV(t,e,n,r,i,o,s,a){return new Gs(t,e,n,r,i,o,s,a)}function Sd(t){return new Gs(t)}function VV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Jb(t){return null!==t.collectionGroup}function Rd(t){const e=pe(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Gt(fn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new tg(o,r))}),n.has(fn.keyField().canonicalString())||e.le.push(new tg(fn.keyField(),r))}return e.le}function ci(t){const e=pe(t);return e.he||(e.he=function LV(t,e){if("F"===t.limitType)return Yb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new tg(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ja(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ja(t.startAt.position,t.startAt.inclusive):null;return Yb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Rd(t))),e.he}function Xb(t,e){const n=t.filters.concat([e]);return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fv(t,e,n){return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rg(t,e){return ng(ci(t),ci(e))&&t.limitType===e.limitType}function UV(t){return`${ac(ci(t))}|lt:${t.limitType}`}function Pd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>MV(i)).join(", ")}]`),Kp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Dd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Dd(i)).join(",")),`Target(${r})`}(ci(t))}; limitType=${t.limitType})`}function ig(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Rd(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const l=TV(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Rd(r),i)||r.endAt&&!function(s,a,u){const l=TV(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Rd(r),i)));var r,i}function BV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jV(t){return(e,n)=>{let r=!1;for(const i of Rd(t)){const o=DQ(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function DQ(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return null!==u&&null!==l?Ya(u,l):De()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ga(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return gV(this.inner)}size(){return this.innerSize}}const AQ=new tn(_e.comparator);function bi(){return AQ}const $V=new tn(_e.comparator);function og(...t){let e=$V;for(const n of t)e=e.insert(n.key,n);return e}function HV(t){let e=$V;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function us(){return sg()}function zV(){return sg()}function sg(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const SQ=new tn(_e.comparator),RQ=new Gt(_e.comparator);function rt(...t){let e=RQ;for(const n of t)e=e.add(n);return e}const PQ=new Gt(Qe);function eT(){return PQ}function qV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qp(e)?"-0":e}}function GV(t){return{integerValue:""+t}}function WV(t,e){return aV(e)?GV(e):qV(t,e)}class Vv{constructor(){this._=void 0}}function MQ(t,e,n){return t instanceof Md?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Rv(o)&&(o=Pv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof uc?KV(t,e):t instanceof cc?QV(t,e):function(i,o){const s=ZV(i,o),a=YV(s)+YV(i.Ie);return Wb(s)&&Wb(i.Ie)?GV(a):qV(i.serializer,a)}(t,e)}function xQ(t,e,n){return t instanceof uc?KV(t,e):t instanceof cc?QV(t,e):n}function ZV(t,e){return t instanceof xd?Wb(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Md extends Vv{}class uc extends Vv{constructor(e){super(),this.elements=e}}function KV(t,e){const n=JV(e);for(const r of t.elements)n.some(i=>as(i,r))||n.push(r);return{arrayValue:{values:n}}}class cc extends Vv{constructor(e){super(),this.elements=e}}function QV(t,e){let n=JV(e);for(const r of t.elements)n=n.filter(i=>!as(i,r));return{arrayValue:{values:n}}}class xd extends Vv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function YV(t){return Ln(t.integerValue||t.doubleValue)}function JV(t){return Xp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ag{constructor(e,n){this.field=e,this.transform=n}}class OQ{constructor(e,n){this.version=e,this.transformResults=n}}class In{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Uv{}function XV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Od(t.key,In.none()):new Nd(t.key,t.data,In.none());{const n=t.data,r=Mr.empty();let i=new Gt(fn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Zs(t.key,r,new Ci(i.toArray()),In.none())}}function kQ(t,e,n){t instanceof Nd?function(i,o,s){const a=i.value.clone(),u=n2(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zs?function(i,o,s){if(!Lv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=n2(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(t2(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ug(t,e,n,r){return t instanceof Nd?function(o,s,a,u){if(!Lv(o.precondition,s))return a;const l=o.value.clone(),h=r2(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zs?function(o,s,a,u){if(!Lv(o.precondition,s))return a;const l=r2(o.fieldTransforms,u,s),h=s.data;return h.setAll(t2(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,Lv(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function FQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=ZV(r.transform,i||null);null!=o&&(null===n&&(n=Mr.empty()),n.set(r.field,o))}return n||null}function e2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&wd(r,i,(o,s)=>function NQ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof uc&&i instanceof uc||r instanceof cc&&i instanceof cc?wd(r.elements,i.elements,as):r instanceof xd&&i instanceof xd?as(r.Ie,i.Ie):r instanceof Md&&i instanceof Md);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Nd extends Uv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zs extends Uv{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function t2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function n2(t,e,n){const r=new Map;Ne(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,xQ(s,a,n[i]))}return r}function r2(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,MQ(o,s,e))}return r}class Od extends Uv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tT extends Uv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&kQ(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ug(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ug(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zV();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=XV(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),rt())}isEqual(e){return this.batchId===e.batchId&&wd(this.mutations,e.mutations,(n,r)=>e2(n,r))&&wd(this.baseMutations,e.baseMutations,(n,r)=>e2(n,r))}}class rT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ne(e.mutations.length===r.length);let i=SQ;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new rT(e,n,r,i)}}class iT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class LQ{constructor(e,n){this.count=e,this.unchangedNames=n}}var er,Rt;function i2(t){switch(t){default:return De();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function o2(t){if(void 0===t)return Zn("GRPC error has no .code"),z.UNKNOWN;switch(t){case er.OK:return z.OK;case er.CANCELLED:return z.CANCELLED;case er.UNKNOWN:return z.UNKNOWN;case er.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case er.INTERNAL:return z.INTERNAL;case er.UNAVAILABLE:return z.UNAVAILABLE;case er.UNAUTHENTICATED:return z.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case er.NOT_FOUND:return z.NOT_FOUND;case er.ALREADY_EXISTS:return z.ALREADY_EXISTS;case er.PERMISSION_DENIED:return z.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case er.ABORTED:return z.ABORTED;case er.OUT_OF_RANGE:return z.OUT_OF_RANGE;case er.UNIMPLEMENTED:return z.UNIMPLEMENTED;case er.DATA_LOSS:return z.DATA_LOSS;default:return De()}}(Rt=er||(er={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";function s2(){return new TextEncoder}const UQ=new vd([4294967295,4294967295],0);function a2(t){const e=s2().encode(t),n=new xK;return n.update(e),new Uint8Array(n.digest())}function u2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vd([n,r],0),new vd([i,o],0)]}class oT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cg(`Invalid padding: ${n}`);if(r<0)throw new cg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new cg(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new cg(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=vd.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(vd.fromNumber(r)));return 1===i.compare(UQ)&&(i=new vd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=a2(e),[r,i]=u2(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new oT(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=a2(e),[r,i]=u2(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class cg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lg{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,dg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lg(ke.min(),i,new tn(Qe),bi(),rt())}}class dg{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new dg(r,n,rt(),rt(),rt())}}class jv{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class c2{constructor(e,n){this.targetId=e,this.fe=n}}class l2{constructor(e,n,r=lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class d2{constructor(){this.ge=0,this.pe=f2(),this.ye=lr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=rt(),n=rt(),r=rt();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:De()}}),new dg(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=f2()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ne(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class BQ{constructor(e){this.Le=e,this.ke=new Map,this.qe=bi(),this.Qe=h2(),this.Ke=new tn(Qe)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Ov(o))if(0===r){const s=new _e(o.path);this.We(n,s,pn.newNoDocument(s,ke.min()))}else Ne(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=qs(r).toUint8Array()}catch(u){if(u instanceof _V)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new oT(s,i,o)}catch(u){return wi(u instanceof cg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Ov(a.target)){const u=new _e(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,pn.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=rt();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new lg(e,n,this.Ke,this.qe,r);return this.qe=bi(),this.Qe=h2(),this.Ke=new tn(Qe),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new d2,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Gt(Qe),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new d2),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function h2(){return new tn(_e.comparator)}function f2(){return new tn(_e.comparator)}const jQ={asc:"ASCENDING",desc:"DESCENDING"},$Q={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HQ={and:"AND",or:"OR"};class zQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sT(t,e){return t.useProto3Json||Kp(e)?e:{value:e}}function kd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qQ(t,e){return kd(t,e.toTimestamp())}function Kn(t){return Ne(!!t),ke.fromTimestamp(function(n){const r=Wa(n);return new vn(r.seconds,r.nanos)}(t))}function aT(t,e){return(r=t,new St(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function g2(t){const e=St.fromString(t);return Ne(b2(e)),e}function hg(t,e){return aT(t.databaseId,e.path)}function cs(t,e){const n=g2(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(_2(n))}function uT(t,e){return aT(t.databaseId,e)}function m2(t){const e=g2(t);return 4===e.length?St.emptyPath():_2(e)}function fg(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _2(t){return Ne(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function y2(t,e,n){return{name:hg(t,e),fields:n.value.mapValue.fields}}function v2(t,e,n){const r=cs(t,e.name),i=Kn(e.updateTime),o=e.createTime?Kn(e.createTime):ke.min(),s=new Mr({mapValue:{fields:e.fields}}),a=pn.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function pg(t,e){let n;if(e instanceof Nd)n={update:y2(t,e.key,e.value)};else if(e instanceof Od)n={delete:hg(t,e.key)};else if(e instanceof Zs)n={update:y2(t,e.key,e.data),updateMask:XQ(e.fieldMask)};else{if(!(e instanceof tT))return De();n={verify:hg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Md)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xd)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw De()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:qQ(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:De()),n;var o}function cT(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?In.updateTime(Kn(o.updateTime)):void 0!==o.exists?In.exists(o.exists):In.none():In.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(Ne("REQUEST_TIME"===a.setToServerValue),u=new Md):"appendMissingElements"in a?u=new uc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new cc(a.removeAllFromArray.values||[]):"increment"in a?u=new xd(s,a.increment):De();const l=fn.fromServerFormat(a.fieldPath);return new ag(l,u)}(t,i)):[];var o;if(e.update){const i=cs(t,e.update.name),o=new Mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Ci((e.updateMask.fieldPaths||[]).map(h=>fn.fromServerFormat(h)));return new Zs(i,o,s,n,r)}return new Nd(i,o,n,r)}if(e.delete){const i=cs(t,e.delete);return new Od(i,n)}if(e.verify){const i=cs(t,e.verify);return new tT(i,n)}return De()}function I2(t,e){return{documents:[uT(t,e.path)]}}function lT(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=uT(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=uT(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return C2(Ht.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(0!==u.length)return u.map(l=>{return{field:Xa((g=l).field),direction:QQ(g.dir)};var g})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=sT(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function E2(t){let e=m2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ne(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(g){const m=w2(g);return m instanceof Ht&&Kb(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(m=>{return new tg(Fd((A=m).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,Kp(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new Ja((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new Ja(g.values||[],!g.before)}(n.endAt)),FV(e,i,s,o,a,"F",u,l)}function w2(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fd(n.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fd(n.unaryFilter.field);return Ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Fd(n.unaryFilter.field);return Ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fd(n.unaryFilter.field);return Ct.create(s,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):void 0!==t.fieldFilter?Ct.create(Fd((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Ht.create(n.compositeFilter.filters.map(r=>w2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De();var n}function QQ(t){return jQ[t]}function YQ(t){return $Q[t]}function JQ(t){return HQ[t]}function Xa(t){return{fieldPath:t.canonicalString()}}function Fd(t){return fn.fromServerFormat(t.fieldPath)}function C2(t){return t instanceof Ct?function(n){if("=="===n.op){if(IV(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NAN"}};if(vV(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(IV(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NAN"}};if(vV(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(n.field),op:YQ(n.op),value:n.value}}}(t):t instanceof Ht?function(n){const r=n.getFilters().map(i=>C2(i));return 1===r.length?r[0]:{compositeFilter:{op:JQ(n.op),filters:r}}}(t):De()}function XQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function b2(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ks{constructor(e,n,r,i,o=ke.min(),s=ke.min(),a=lr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class T2{constructor(e){this.ut=e}}function D2(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$v(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:hg(o=t.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:kd(o,s.version.toTimestamp()),createTime:kd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:lc(e.version)};else{if(!e.isUnknownDocument())return De();r.unknownDocument={path:n.path.toArray(),version:lc(e.version)}}var o,s;return r}function $v(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function lc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function dc(t){const e=new vn(t.seconds,t.nanoseconds);return ke.fromTimestamp(e)}function hc(t,e){const n=(e.baseMutations||[]).map(o=>cT(t.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>cT(t.ut,o)),i=vn.fromMillis(e.localWriteTimeMs);return new nT(e.batchId,i,n,r)}function gg(t){const e=dc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?dc(t.lastLimboFreeSnapshotVersion):ke.min();let r;return r=void 0!==t.query.documents?(Ne(1===(o=t.query).documents.length),ci(Sd(m2(o.documents[0])))):function(o){return ci(E2(o))}(t.query),new Ks(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,lr.fromBase64String(t.resumeToken));var o}function A2(t,e){const n=lc(e.snapshotVersion),r=lc(e.lastLimboFreeSnapshotVersion);let i;i=Ov(e.target)?I2(t.ut,e.target):lT(t.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ac(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dT(t){const e=E2({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Fv(e,e.limit,"L"):e}function hT(t,e){return new iT(e.largestBatchId,cT(t.ut,e.overlayMutation))}function S2(t,e){const n=e.path.lastSegment();return[t,jr(e.path.popLast()),n]}function R2(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:lc(r.readTime),documentKey:jr(r.documentKey.path),largestBatchId:r.largestBatchId}}class tY{getBundleMetadata(e,n){return P2(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:dc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return P2(e).put({bundleId:(i=n).id,createTime:lc(Kn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return M2(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:dT(o.bundledQuery),readTime:dc(o.readTime)};var o})}saveNamedQuery(e,n){return M2(e).put({name:(i=n).name,readTime:lc(Kn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function P2(t){return Er(t,"bundles")}function M2(t){return Er(t,"namedQueries")}class Hv{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Hv(e,n.uid||"")}getOverlay(e,n){return mg(e).get(S2(this.userId,n)).next(r=>r?hT(this.serializer,r):null)}getOverlays(e,n){const r=us();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new iT(n,s);i.push(this.lt(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(jr(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(mg(e).H("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(e,n,r){const i=us(),o=jr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return mg(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const l=hT(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=us();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mg(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=hT(this.serializer,l);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}lt(e,n){return mg(e).put(function(i,o,s){const[a,u,l]=S2(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pg(i.ut,s.mutation)}}(this.serializer,this.userId,n))}}function mg(t){return Er(t,"documentOverlays")}class fc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ln(e.integerValue));else if("doubleValue"in e){const r=Ln(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Qp(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(qs(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?EV(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):De()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),_e.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function nY(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function x2(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=nY(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}fc.St=new fc;class rY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=x2(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=x2(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class iY{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class oY{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class _g{constructor(){this.Wt=new rY,this.Gt=new iY(this.Wt),this.zt=new oY(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class pc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pc(this.indexId,this.documentKey,this.arrayValue,r)}}function eu(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=N2(t.arrayValue,e.arrayValue),0!==n?n:(n=N2(t.directionalValue,e.directionalValue),0!==n?n:_e.comparator(t.documentKey,e.documentKey)))}function N2(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class O2{constructor(e){this.Jt=new Gt((n,r)=>fn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ne(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=jb(e);if(void 0!==n&&!this.tn(n))return!1;const r=rc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],r[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Gt(fn.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new ic(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ic(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ic(r.field,"asc"===r.dir?0:1)));return new Cd(Cd.UNKNOWN_ID,this.collectionId,n,bd.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function k2(t){var e,n;if(Ne(t instanceof Ct||t instanceof Ht),t instanceof Ct){if(t instanceof NV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>Ct.create(t.field,"==",o)))||[];return Ht.create(i,"or")}return t}const r=t.filters.map(i=>k2(i));return Ht.create(r,t.op)}function sY(t){if(0===t.getFilters().length)return[];const e=gT(k2(t));return Ne(F2(e)),fT(e)||pT(e)?[e]:e.getFilters()}function fT(t){return t instanceof Ct}function pT(t){return t instanceof Ht&&Kb(t)}function F2(t){return fT(t)||pT(t)||function(n){if(n instanceof Ht&&Zb(n)){for(const r of n.getFilters())if(!fT(r)&&!pT(r))return!1;return!0}return!1}(t)}function gT(t){if(Ne(t instanceof Ct||t instanceof Ht),t instanceof Ct)return t;if(1===t.filters.length)return gT(t.filters[0]);const e=t.filters.map(r=>gT(r));let n=Ht.create(e,t.op);return n=zv(n),F2(n)?n:(Ne(n instanceof Ht),Ne(Ad(n)),Ne(n.filters.length>1),n.filters.reduce((r,i)=>mT(r,i)))}function mT(t,e){let n;return Ne(t instanceof Ct||t instanceof Ht),Ne(e instanceof Ct||e instanceof Ht),n=t instanceof Ct?e instanceof Ct?Ht.create([t,e],"and"):V2(t,e):e instanceof Ct?V2(e,t):function(i,o){if(Ne(i.filters.length>0&&o.filters.length>0),Ad(i)&&Ad(o))return PV(i,o.getFilters());const s=Zb(i)?i:o,a=Zb(i)?o:i,u=s.filters.map(l=>mT(l,a));return Ht.create(u,"or")}(t,e),zv(n)}function V2(t,e){if(Ad(e))return PV(e,t.getFilters());{const n=e.filters.map(r=>mT(t,r));return Ht.create(n,"or")}}function zv(t){if(Ne(t instanceof Ct||t instanceof Ht),t instanceof Ct)return t;const e=t.getFilters();if(1===e.length)return zv(e[0]);if(SV(t))return t;const n=e.map(i=>zv(i)),r=[];return n.forEach(i=>{i instanceof Ct?r.push(i):i instanceof Ht&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Ht.create(r,t.op)}class aY{constructor(){this.on=new _T}addToCollectionParentIndex(e,n){return this.on.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Bi.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class _T{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gt(St.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(St.comparator)).toArray()}}const qv=new Uint8Array(0);class uY{constructor(e,n){this.user=e,this.databaseId=n,this._n=new _T,this.an=new Ws(r=>ac(r),(r,i)=>ng(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const o={collectionId:r,parent:jr(i)};return L2(e).put(o)}return V.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[tV(n),""],!1,!0);return L2(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(ss(s.parent))}return r})}addFieldIndex(e,n){const r=yg(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=Ld(e);return o.next(a=>{s.put(R2(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=yg(e),i=Ld(e),o=Vd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=yg(e),r=Vd(e),i=Ld(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return V.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new O2(r).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Vd(e);let i=!0;const o=new Map;return V.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=rt();const a=[];return V.forEach(o,(u,l)=>{var B;ue("IndexedDbIndexManager",`Using index ${B=u,`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`} to execute ${ac(n)}`);const h=function(B,ee){const fe=jb(ee);if(void 0===fe)return null;for(const Be of kv(B,fe.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(l,u),g=function(B,ee){const fe=new Map;for(const Be of rc(ee))for(const Dt of kv(B,Be.fieldPath))switch(Dt.op){case"==":case"in":fe.set(Be.fieldPath.canonicalString(),Dt.value);break;case"not-in":case"!=":return fe.set(Be.fieldPath.canonicalString(),Dt.value),Array.from(fe.values())}return null}(l,u),m=function(B,ee){const fe=[];let Be=!0;for(const Dt of rc(ee)){const mn=0===Dt.kind?OV(B,Dt.fieldPath,B.startAt):kV(B,Dt.fieldPath,B.startAt);fe.push(mn.value),Be&&(Be=mn.inclusive)}return new Ja(fe,Be)}(l,u),v=function(B,ee){const fe=[];let Be=!0;for(const Dt of rc(ee)){const mn=0===Dt.kind?kV(B,Dt.fieldPath,B.endAt):OV(B,Dt.fieldPath,B.endAt);fe.push(mn.value),Be&&(Be=mn.inclusive)}return new Ja(fe,Be)}(l,u),A=this.ln(u,l,m),R=this.ln(u,l,v),x=this.hn(u,l,g),U=this.Pn(u.indexId,h,A,m.inclusive,R,v.inclusive,x);return V.forEach(U,k=>r.j(k,n.limit).next(B=>{B.forEach(ee=>{const fe=_e.fromSegments(ee.documentKey);s.has(fe)||(s=s.add(fe),a.push(fe))})}))}).next(()=>a)}return V.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:sY(Ht.create(e.filters,"and")).map(r=>Yb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.In(n[g/l]):qv,v=this.Tn(e,m,r[g%l],i),A=this.En(e,m,o[g%l],s),R=a.map(x=>this.Tn(e,m,x,!0));h.push(...this.createRange(v,A,R))}return h}Tn(e,n,r,i){const o=new pc(e,_e.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){const o=new pc(e,_e.empty(),n,r);return i?o.Ht():o}cn(e,n){const r=new O2(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.un(n);return V.forEach(i,o=>this.cn(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let l=new Gt(fn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new _g;for(const i of rc(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.jt(i.kind);fc.St.ht(o,s)}return r.Ut()}In(e){const n=new _g;return fc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new _g;return fc.St.ht(sc(this.databaseId,n),r.jt(function(o){const s=rc(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new _g);let o=0;for(const s of rc(e)){const a=r[o++];for(const u of i)if(this.Rn(n,s.fieldPath)&&Xp(a))i=this.Vn(i,s,a);else{const l=u.jt(s.kind);fc.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new _g;u.seed(a.Ut()),fc.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof Ct&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=yg(e),i=Ld(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return V.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,g){const m=g?new bd(g.sequenceNumber,new Bi(dc(g.readTime),new _e(ss(g.documentKey)),g.largestBatchId)):bd.empty(),v=h.fields.map(([A,R])=>new ic(fn.fromServerFormat(A),R));return new Cd(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Qe(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=yg(e),o=Ld(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,u=>o.put(R2(u.indexId,this.user,s,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,u=>this.gn(e,i,u).next(l=>{const h=this.pn(o,u);return l.isEqual(h)?V.resolve():this.yn(e,o,u,l,h)}))))})}wn(e,n,r,i){return Vd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Vd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Vd(e);let o=new Gt(eu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new pc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new Gt(eu);const i=this.dn(n,e);if(null==i)return r;const o=jb(n);if(null!=o){const s=e.data.field(o.fieldPath);if(Xp(s))for(const a of s.arrayValue.values||[])r=r.add(new pc(n.indexId,e.key,this.In(a),i))}else r=r.add(new pc(n.indexId,e.key,qv,i));return r}yn(e,n,r,i,o){ue("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,l,h,g,m){const v=u.getIterator(),A=l.getIterator();let R=Td(v),x=Td(A);for(;R||x;){let U=!1,k=!1;if(R&&x){const B=h(R,x);B<0?k=!0:B>0&&(U=!0)}else null!=R?k=!0:U=!0;U?(g(x),x=Td(A)):k?(m(R),R=Td(v)):(R=Td(v),x=Td(A))}}(i,o,eu,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),V.waitFor(s)}fn(e){let n=1;return Ld(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>eu(s,a)).filter((s,a,u)=>!a||0!==eu(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=eu(s,e),u=eu(s,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,qv,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,qv,[]]))}return o}bn(e,n){return eu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(U2)}getMinOffset(e,n){return V.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||De())).next(U2)}}function L2(t){return Er(t,"collectionParents")}function Vd(t){return Er(t,"indexEntries")}function yg(t){return Er(t,"indexConfiguration")}function Ld(t){return Er(t,"indexState")}function U2(t){Ne(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;$b(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bi(e.readTime,e.documentKey,n)}const B2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $r{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $r(e,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function j2(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(h,g,m)=>(a++,m.delete()));o.push(u.next(()=>{Ne(1===a)}));const l=[];for(const h of n.mutations){const g=lV(e,h.key.path,n.batchId);o.push(i.delete(g)),l.push(h.key)}return V.waitFor(o).next(()=>l)}function Gv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw De();e=t.noDocument}return JSON.stringify(e).length}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(41943040,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Wv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ne(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Wv(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=Ud(e),s=tu(e);return s.add({}).next(a=>{Ne("number"==typeof a);const u=new nT(a,n,r,i),l=function(v,A,R){const x=R.baseMutations.map(k=>pg(v.ut,k)),U=R.mutations.map(k=>pg(v.ut,k));return{userId:A,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:x,mutations:U}}(this.serializer,this.userId,u),h=[];let g=new Gt((m,v)=>Qe(m.canonicalString(),v.canonicalString()));for(const m of i){const v=lV(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,QK))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),V.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return tu(e).get(n).next(r=>r?(Ne(r.userId===this.userId),hc(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?V.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return tu(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Ne(a.batchId>=r),o=hc(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return tu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).W("userMutationsIndex",n).next(r=>r.map(i=>hc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Av(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Ud(e).Y({range:i},(s,a,u)=>{const[l,h,g]=s,m=ss(h);if(l===this.userId&&n.path.isEqual(m))return tu(e).get(g).next(v=>{if(!v)throw De();Ne(v.userId===this.userId),o.push(hc(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(Qe);const i=[];return n.forEach(o=>{const s=Av(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ud(e).Y({range:a},(l,h,g)=>{const[m,v,A]=l,R=ss(v);m===this.userId&&o.path.isEqual(R)?r=r.add(A):g.done()});i.push(u)}),V.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Av(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Gt(Qe);return Ud(e).Y({range:s},(u,l,h)=>{const[g,m,v]=u,A=ss(m);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(a=a.add(v)):h.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(tu(e).get(o).next(s=>{if(null===s)throw De();Ne(s.userId===this.userId),r.push(hc(this.serializer,s))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return j2(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ud(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=ss(o[1]);i.push(u)}else a.done()}).next(()=>{Ne(0===i.length)})})}containsKey(e,n){return $2(e,this.userId,n)}Mn(e){return H2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $2(t,e,n){const r=Av(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Ud(t).Y({range:o,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(s=!0),l.done()}).next(()=>s)}function tu(t){return Er(t,"mutations")}function Ud(t){return Er(t,"documentMutations")}function H2(t){return Er(t,"mutationQueues")}class gc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new gc(0)}static Nn(){return new gc(-1)}}class cY{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new gc(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ke.fromTimestamp(new vn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Bd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ne(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Bd(e).Y((s,a)=>{const u=gg(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>V.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Bd(e).Y((r,i)=>{const o=gg(i);n(o)})}Bn(e){return z2(e).get("targetGlobalKey").next(n=>(Ne(null!==n),n))}Ln(e,n){return z2(e).put("targetGlobalKey",n)}kn(e,n){return Bd(e).put(A2(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ac(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Bd(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const l=gg(a);ng(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=nu(e);return n.forEach(s=>{const a=jr(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),V.waitFor(i)}removeMatchingKeys(e,n,r){const i=nu(e);return V.forEach(n,o=>{const s=jr(o.path);return V.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=nu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=nu(e);let o=rt();return i.Y({range:r,J:!0},(s,a,u)=>{const l=ss(s[1]),h=new _e(l);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=jr(n.path),i=IDBKeyRange.bound([r],[tV(r)],!1,!0);let o=0;return nu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return Bd(e).get(n).next(r=>r?gg(r):null)}}function Bd(t){return Er(t,"targets")}function z2(t){return Er(t,"targetGlobal")}function nu(t){return Er(t,"targetDocuments")}function q2([t,e],[n,r]){const i=Qe(t,n);return 0===i?Qe(e,r):i}class lY{constructor(e){this.Qn=e,this.buffer=new Gt(q2),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();q2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Q.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){qa(r)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield za(r)}yield n.Gn(3e5)}))}}class dY{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return V.resolve(ji._e);const r=new lY(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(B2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),B2):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Ed()<=ns.in.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class hY{constructor(e,n){this.db=e,this.garbageCollector=function W2(t,e){return new dY(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Zv(e,r)}removeReference(e,n,r){return Zv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Zv(e,n)}Xn(e,n){return function(i,o){let s=!1;return H2(i).Z(a=>$2(i,a,o).next(u=>(u&&(s=!0),V.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=n){const u=this.Xn(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ke.min()),nu(e).delete([0,jr(s.path)])))});i.push(u)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Zv(e,n)}Zn(e,n){const r=nu(e);let i,o=ji._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{0===s?(o!==ji._e&&n(new _e(ss(i)),o),o=l,i=u):o=ji._e}).next(()=>{o!==ji._e&&n(new _e(ss(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zv(t,e){return nu(t).put((i=t.currentSequenceNumber,{targetId:0,path:jr(e.path),sequenceNumber:i}));var i}class Z2{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mc(e).put(r)}removeEntry(e,n,r){return mc(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],$v(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=pn.newInvalidDocument(n);return mc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(vg(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:pn.newInvalidDocument(n)};return mc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(vg(n))},(i,o)=>{r={document:this.tr(n,o),size:Gv(o)}}).next(()=>r)}getEntries(e,n){let r=bi();return this.rr(e,n,(i,o)=>{const s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=bi(),i=new tn(_e.comparator);return this.rr(e,n,(o,s)=>{const a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,Gv(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return V.resolve();let i=new Gt(J2);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(vg(i.first()),vg(i.last())),s=i.getIterator();let a=s.getNext();return mc(e).Y({index:"documentKeyIndex",range:o},(u,l,h)=>{const g=_e.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&J2(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.U(vg(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),$v(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mc(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=bi();for(const g of l){const m=this.tr(_e.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(ig(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=bi();const s=Y2(n,r),a=Y2(n,Bi.max());return mc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{const g=this.tr(_e.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new pY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Q2(e).get("remoteDocumentGlobalKey").next(n=>(Ne(!!n),n))}er(e,n){return Q2(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function eY(t,e){let n;if(e.document)n=v2(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),i=dc(e.noDocument.readTime);n=pn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const r=_e.fromSegments(e.unknownDocument.path),i=dc(e.unknownDocument.version);n=pn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new vn(i[0],i[1]);return ke.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(ke.min()))return r}return pn.newInvalidDocument(e)}}function K2(t){return new fY(t)}class pY extends Z2{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ws(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Gt((o,s)=>Qe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=D2(this._r.serializer,s);i=i.add(o.path.popLast());const l=Gv(u);r+=l-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=D2(this._r.serializer,s.convertToNoDocument(ke.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function Q2(t){return Er(t,"remoteDocumentGlobal")}function mc(t){return Er(t,"remoteDocumentsV14")}function vg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y2(t,e){const n=e.documentKey.path.toArray();return[t,$v(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function J2(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Qe(n[o],r[o]),i)return i;return i=Qe(n.length,r.length),i||(i=Qe(n[n.length-2],r[r.length-2]),i||Qe(n[n.length-1],r[r.length-1]))}class gY{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class X2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&ug(r.mutation,i,Ci.empty(),vn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=rt()){const i=us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=og();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,rt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=bi();const s=sg(),a=sg();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Zs)?o=o.insert(l.key,l):void 0!==h?(s.set(l.key,h.mutation.getFieldMask()),ug(h.mutation,l,h.mutation.getFieldMask(),vn.now())):s.set(l.key,Ci.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new gY(h,null!==(g=s.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sg();let i=new tn((s,a)=>s-a),o=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||Ci.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||rt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=zV();h.forEach(m=>{if(!o.has(m)){const v=XV(n.get(m),r.get(m));null!==v&&g.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return _e.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Jb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(us());let a=-1,u=o;return s.next(l=>V.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,rt())).next(h=>({batchId:a,changes:HV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let i=og();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=og();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{const l=(g=n,m=u.child(o),new Gs(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const h=l.getKey();null===s.get(h)&&(s=s.insert(h,pn.newInvalidDocument(h)))});let a=og();return s.forEach((u,l)=>{const h=o.get(u);void 0!==h&&ug(h.mutation,l,Ci.empty(),vn.now()),ig(n,l)&&(a=a.insert(u,l))}),a})}}class mY{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return V.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:Kn(i.createTime)}),V.resolve();var i}getNamedQuery(e,n){return V.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:dT(i.bundledQuery),readTime:Kn(i.readTime)}),V.resolve();var i}}class _Y{constructor(){this.overlays=new tn(_e.comparator),this.lr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=us();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=us(),o=n.length+1,s=new _e(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new tn((l,h)=>l-h);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);null===h&&(h=us(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=us(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new iT(n,r));let o=this.lr.get(n);void 0===o&&(o=rt(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}}class yT{constructor(){this.hr=new Gt(wr.Pr),this.Ir=new Gt(wr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new wr(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new wr(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new _e(new St([])),r=new wr(n,e),i=new wr(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new _e(new St([])),r=new wr(n,e),i=new wr(n,e+1);let o=rt();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new wr(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class wr{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return _e.comparator(e.key,n.key)||Qe(e.gr,n.gr)}static Tr(e,n){return Qe(e.gr,n.gr)||_e.comparator(e.key,n.key)}}class yY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Gt(wr.Pr)}checkEmpty(e){return V.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.pr;this.pr++;const s=new nT(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new wr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wr(n,0),i=new wr(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{const a=this.wr(s.gr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(Qe);return n.forEach(i=>{const o=new wr(i,0),s=new wr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),V.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const s=new wr(new _e(o),0);let a=new Gt(Qe);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},s),V.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ne(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return V.forEach(n.mutations,i=>{const o=new wr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new wr(n,0),i=this.yr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return V.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class vY{constructor(e){this.Cr=e,this.docs=new tn(_e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=bi();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=bi();const s=n.path,a=new _e(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||$b(rV(h),r)<=0||(i.has(h.key)||ig(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){De()}vr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IY(this)}getSize(e){return V.resolve(this.size)}}class IY extends Z2{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class EY{constructor(e){this.persistence=e,this.Fr=new Ws(n=>ac(n),ng),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Mr=0,this.Or=new yT,this.targetCount=0,this.Nr=gc.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),V.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new gc(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.kn(n),V.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Or.containsKey(n))}}class vT{constructor(e,n){this.Br={},this.overlays={},this.Lr=new ji(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new EY(this),this.indexManager=new aY,this.remoteDocumentCache=new vY(r=>this.referenceDelegate.Qr(r)),this.serializer=new T2(n),this.Kr=new mY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _Y,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new yY(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const i=new wY(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class wY extends oV{constructor(e){super(),this.currentSequenceNumber=e}}class Kv{constructor(e){this.persistence=e,this.Gr=new yT,this.zr=null}static jr(e){return new Kv(e)}get Hr(){if(this.zr)return this.zr;throw De()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Hr,r=>{const i=_e.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,ke.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return V.or([()=>V.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class CY{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Dv("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cV,{unique:!0}),u.createObjectStore("documentMutations"),eL(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=V.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),eL(e)),s=s.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cV,{unique:!0});const g=l.store("mutations"),m=h.map(v=>g.put(v));return V.waitFor(m)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:uQ});l.createIndex("collectionPathOverlayIndex",cQ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",lQ,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:YK});l.createIndex("documentKeyIndex",JK),l.createIndex("collectionGroupIndex",XK)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:iQ}).createIndex("sequenceNumberIndex",oQ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:sQ}).createIndex("documentKeyIndex",aQ,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Gv(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>V.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>V.forEach(a,u=>{Ne(u.userId===o.userId);const l=hc(this.serializer,u);return j2(e,o.userId,l).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new St(s),l=[0,jr(u)];o.push(n.get(l).next(h=>h?V.resolve():n.put({targetId:0,path:jr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>V.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:rQ});const r=n.store("collectionParents"),i=new _T,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:jr(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new St(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],l)=>{const h=ss(a);return o(h.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const o=gg(i),s=A2(this.serializer,o);return n.put(s)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(g=s,g.document?new _e(St.fromString(g.document.name).popFirst(5)):g.noDocument?_e.fromSegments(g.noDocument.path):g.unknownDocument?_e.fromSegments(g.unknownDocument.path):De()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>V.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=K2(this.serializer),o=new vT(Kv.jr,this.serializer.ut);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:rt();hc(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),V.forEach(a,(u,l)=>{const h=new Ir(l),g=Hv.ct(this.serializer,h),m=o.getIndexManager(h),v=Wv.ct(h,this.serializer,m,o.referenceDelegate);return new X2(i,v,g,m).recalculateAndSaveOverlaysForDocumentKeys(new qb(n,ji._e),u).next()})})}}function eL(t){t.createObjectStore("targetDocuments",{keyPath:tQ}).createIndex("documentTargetsIndex",nQ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eQ,{unique:!0}),t.createObjectStore("targetGlobal")}const IT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ET{constructor(e,n,r,i,o,s,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=l,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!ET.D())throw new ie(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hY(this,i),this.Ii=n+"main",this.serializer=new T2(u),this.Ti=new xo(this.Ii,this.ai,new CY(this.serializer)),this.qr=new cY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=K2(this.serializer),this.Kr=new tY,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&Zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(z.FAILED_PRECONDITION,IT);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new ji(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,Q.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Q.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(qa(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Ig(e).get("owner").next(n=>V.resolve(this.wi(n)))}Si(e){return Yv(e).delete(this.clientId)}bi(){var e=this;return(0,Q.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Er(r,"clientMetadata");return i.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return V.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?V.resolve(!0):Ig(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new ie(z.FAILED_PRECONDITION,IT);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yv(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ue("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Q.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new qb(n,ji._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Yv(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Wv.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new uY(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Hv.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(u=this.ai)?hQ:14===u?fV:13===u?hV:12===u?dQ:11===u?dV:void De();var u;let s;return this.Ti.runTransaction(e,i,o,a=>(s=new qb(a,this.Lr?this.Lr.next():ji._e),"readwrite-primary"===n?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw Zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new ie(z.FAILED_PRECONDITION,iV);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Ig(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ie(z.FAILED_PRECONDITION,IT)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ig(e).put("owner",n)}static D(){return xo.D()}pi(e){const n=Ig(e);return n.get("owner").next(r=>this.wi(r)?(ue("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Zn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,wt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Zn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Zn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ig(t){return Er(t,"owner")}function Yv(t){return Er(t,"clientMetadata")}function wT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class CT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=rt(),i=rt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new CT(e,n.fromCache,r,i)}}class bY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tL{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new bY;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Ed()<=ns.in.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Pd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),V.resolve()):(Ed()<=ns.in.DEBUG&&ue("QueryEngine","Query:",Pd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Ed()<=ns.in.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Pd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(n))):V.resolve())}zi(e,n){if(VV(n))return V.resolve(null);let r=ci(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Fv(n,null,"F"),r=ci(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=rt(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,s,u.readTime)?this.zi(e,Fv(n,null,"F")):this.Xi(e,l,n,u)}))})))}ji(e,n,r,i){return VV(n)||i.isEqual(ke.min())?V.resolve(null):this.Gi.getDocuments(e,r).next(o=>{const s=this.Yi(n,o);return this.Zi(n,s,r,i)?V.resolve(null):(Ed()<=ns.in.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pd(n)),this.Xi(e,s,n,nV(i,-1)).next(a=>a))})}Yi(e,n){let r=new Gt(jV(e));return n.forEach((i,o)=>{ig(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return Ed()<=ns.in.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Pd(n)),this.Gi.getDocumentsMatchingQuery(e,n,Bi.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class TY{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new tn(Qe),this.ns=new Ws(o=>ac(o),ng),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X2(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function nL(t,e,n,r){return new TY(t,e,n,r)}function rL(t,e){return bT.apply(this,arguments)}function bT(){return bT=(0,Q.Z)(function*(t,e){const n=pe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=rt();for(const l of i){s.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of o){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:s,addedBatchIds:a}))})})}),bT.apply(this,arguments)}function iL(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function oL(t,e,n){let r=rt(),i=rt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=bi();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ke.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:s,cs:i}})}function SY(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jd(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Ks(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function $d(t,e,n){return TT.apply(this,arguments)}function TT(){return TT=(0,Q.Z)(function*(t,e,n){const r=pe(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!qa(s))throw s;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),TT.apply(this,arguments)}function Jv(t,e,n){const r=pe(t);let i=ke.min(),o=rt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){const g=pe(u),m=g.ns.get(h);return void 0!==m?V.resolve(g.ts.get(m)):g.qr.getTargetData(l,h)}(r,s,ci(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:ke.min(),n?o:rt())).next(a=>(uL(r,BV(e),a),{documents:a,ls:o})))}function sL(t,e){const n=pe(t),r=pe(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function aL(t,e){const n=pe(t),r=n.rs.get(e)||ke.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,nV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(uL(n,e,i),i))}function uL(t,e,n){let r=t.rs.get(e)||ke.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function DT(){return DT=(0,Q.Z)(function*(t,e,n,r){const i=pe(t);let o=rt(),s=bi();for(const l of n){const h=e.hs(l.metadata.name);l.document&&(o=o.add(h));const g=e.Ps(l);g.setReadTime(e.Is(l.metadata.readTime)),s=s.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield jd(i,(h=r,ci(Sd(St.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>oL(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.us,h.cs)).next(()=>h.us)))}),DT.apply(this,arguments)}function PY(t,e){return AT.apply(this,arguments)}function AT(){return AT=(0,Q.Z)(function*(t,e,n=rt()){const r=yield jd(t,ci(dT(e.bundledQuery))),i=pe(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Kn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(o,e);const a=r.withResumeToken(lr.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(o,a).next(()=>i.qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(o,e))})}),AT.apply(this,arguments)}function cL(t,e){return`firestore_clients_${t}_${e}`}function lL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ST(t,e){return`firestore_targets_${t}_${e}`}class Xv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new ie(i.error.code,i.error.message))),s?new Xv(e,n,i.state,o):(Zn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eg{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ie(r.error.code,r.error.message))),o?new Eg(e,r.state,i):(Zn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eI{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=eT();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=aV(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new eI(e,o):(Zn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class RT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new RT(n.clientId,n.onlineState):(Zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class PT{constructor(){this.activeTargetIds=eT()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MT{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new tn(Qe),this.started=!1,this.ps=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=cL(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new PT),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Q.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const o=e.getItem(cL(e.persistenceKey,i));if(o){const s=eI.Ts(i,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ST(this.persistenceKey,e));if(r){const i=Eg.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ST(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ue("SharedClientState","READ",e,n),n}setItem(e,n){ue("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Q.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(s){let a=ji._e;if(null!=s)try{const u=JSON.parse(s);Ne("number"==typeof u),a=u}catch(u){Zn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==ji._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Js(o)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new Xv(this.currentUser,e,n,r),o=lL(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){const n=lL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=ST(this.persistenceKey,e),o=new Eg(e,n,r);this.setItem(i,o.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return eI.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return Xv.Ts(new Ir(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Eg.Ts(i,n)}Ms(e){return RT.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Q.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=eT();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class dL{constructor(){this.eo=new PT,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new PT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MY{ro(e){}shutdown(){}}class hL{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tI=null;function xT(){return null===tI?tI=268435456+Math.round(2147483648*Math.random()):tI++,"0x"+tI.toString(16)}const xY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NY{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Hr="WebChannelConnection";class OY extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){const a=xT(),u=this.So(n,r);ue("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,o,s),this.Do(n,u,l,i).then(h=>(ue("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw wi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Id,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){return`${this.mo}/v1/${r}:${xY[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const o=xT();return new Promise((s,a)=>{const u=new MK;u.setWithCredentials(!0),u.listenOnce(RK.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ub.NO_ERROR:const h=u.getResponseJson();ue(Hr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ub.TIMEOUT:ue(Hr,`RPC '${e}' ${o} timed out`),a(new ie(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ub.HTTP_ERROR:const g=u.getStatus();if(ue(Hr,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m?.error;if(v&&v.status&&v.message){const A=function(x){const U=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(U)>=0?U:z.UNKNOWN}(v.status);a(new ie(A,v.message))}else a(new ie(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ie(z.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ue(Hr,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);ue(Hr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(e,n,r){const i=xT(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=AK(),a=SK(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");ue(Hr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=s.createWebChannel(h,u);let m=!1,v=!1;const A=new NY({co:x=>{v?ue(Hr,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(ue(Hr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ue(Hr,`RPC '${e}' stream ${i} sending:`,x),g.send(x))},lo:()=>g.close()}),R=(x,U,k)=>{x.listen(U,B=>{try{k(B)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(g,Tv.EventType.OPEN,()=>{v||ue(Hr,`RPC '${e}' stream ${i} transport opened.`)}),R(g,Tv.EventType.CLOSE,()=>{v||(v=!0,ue(Hr,`RPC '${e}' stream ${i} transport closed`),A.Ro())}),R(g,Tv.EventType.ERROR,x=>{v||(v=!0,wi(Hr,`RPC '${e}' stream ${i} transport errored:`,x),A.Ro(new ie(z.UNAVAILABLE,"The operation could not be completed")))}),R(g,Tv.EventType.MESSAGE,x=>{var U;if(!v){const k=x.data[0];Ne(!!k);const ee=k.error||(null===(U=k[0])||void 0===U?void 0:U.error);if(ee){ue(Hr,`RPC '${e}' stream ${i} received error:`,ee);const fe=ee.status;let Be=function(ta){const RI=er[ta];if(void 0!==RI)return o2(RI)}(fe),Dt=ee.message;void 0===Be&&(Be=z.INTERNAL,Dt="Unknown error status: "+fe+" with message "+ee.message),v=!0,A.Ro(new ie(Be,Dt)),g.close()}else ue(Hr,`RPC '${e}' stream ${i} received:`,k),A.Vo(k)}}),R(a,PK.STAT_EVENT,x=>{x.stat===QF.PROXY?ue(Hr,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===QF.NOPROXY&&ue(Hr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.Ao()},0),A}}function fL(){return typeof window<"u"?window:null}function nI(){return typeof document<"u"?document:null}function wg(t){return new zQ(t,!0)}class NT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class pL{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new NT(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Q.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Q.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,Q.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new ie(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Q.Z)(function*(){e.state=0,e.start()}))}o_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kY extends pL{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function WQ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:De(),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ne(void 0===h||"string"==typeof h),lr.fromBase64String(h||"")):(Ne(void 0===h||h instanceof Uint8Array),lr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const h=void 0===l.code?z.UNKNOWN:o2(l.code);return new ie(h,l.message||"")}(s);n=new l2(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=cs(t,r.document.name),o=Kn(r.document.updateTime),s=r.document.createTime?Kn(r.document.createTime):ke.min(),a=new Mr({mapValue:{fields:r.document.fields}}),u=pn.newFoundDocument(i,o,s,a);n=new jv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=cs(t,r.document),o=r.readTime?Kn(r.readTime):ke.min(),s=pn.newNoDocument(i,o);n=new jv([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=cs(t,r.document);n=new jv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return De();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new LQ(i,o);n=new c2(r.targetId,s)}}var l;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return ke.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ke.min():s.readTime?Kn(s.readTime):ke.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=fg(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=Ov(u)?{documents:I2(o,u)}:{query:lT(o,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=p2(o,s.resumeToken);const l=sT(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ke.min())>0){a.readTime=kd(o,s.snapshotVersion.toTimestamp());const l=sT(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function KQ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=fg(this.serializer),n.removeTarget=e,this.e_(n)}}class FY extends pL{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function ZQ(t,e){return t&&t.length>0?(Ne(void 0!==e),t.map(n=>function(i,o){let s=Kn(i.updateTime?i.updateTime:o);return s.isEqual(ke.min())&&(s=Kn(o)),new OQ(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.I_(r,n)}return Ne(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=fg(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pg(this.serializer,r))};this.e_(n)}}class VY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(z.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(z.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class UY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Zn(n),this.f_=!1):ue("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class BY{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{r.enqueueAndForget((0,Q.Z)(function*(){var u;ru(s)&&(ue("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Q.Z)(function*(h){const g=pe(h);g.C_.add(4),yield Hd(g),g.M_.set("Unknown"),g.C_.delete(4),yield Cg(g)}),function l(h){return u.apply(this,arguments)})(s))}))}),this.M_=new UY(r,i)}}function Cg(t){return kT.apply(this,arguments)}function kT(){return kT=(0,Q.Z)(function*(t){if(ru(t))for(const e of t.v_)yield e(!0)}),kT.apply(this,arguments)}function Hd(t){return FT.apply(this,arguments)}function FT(){return FT=(0,Q.Z)(function*(t){for(const e of t.v_)yield e(!1)}),FT.apply(this,arguments)}function rI(t,e){const n=pe(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),UT(n)?LT(n):qd(n).Ho()&&VT(n,e))}function bg(t,e){const n=pe(t),r=qd(n);n.D_.delete(e),r.Ho()&&gL(n,e),0===n.D_.size&&(r.Ho()?r.Zo():ru(n)&&n.M_.set("Unknown"))}function VT(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qd(t).u_(e)}function gL(t,e){t.x_.Oe(e),qd(t).c_(e)}function LT(t){t.x_=new BQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),qd(t).start(),t.M_.g_()}function UT(t){return ru(t)&&!qd(t).jo()&&t.D_.size>0}function ru(t){return 0===pe(t).C_.size}function mL(t){t.x_=void 0}function jY(t){return BT.apply(this,arguments)}function BT(){return BT=(0,Q.Z)(function*(t){t.D_.forEach((e,n)=>{VT(t,e)})}),BT.apply(this,arguments)}function $Y(t,e){return jT.apply(this,arguments)}function jT(){return jT=(0,Q.Z)(function*(t,e){mL(t),UT(t)?(t.M_.w_(e),LT(t)):t.M_.set("Unknown")}),jT.apply(this,arguments)}function HY(t,e,n){return $T.apply(this,arguments)}function $T(){return $T=(0,Q.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof l2&&2===e.state&&e.cause)try{yield(r=(0,Q.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.D_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.D_.delete(u),o.x_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield iI(t,r)}else if(e instanceof jv?t.x_.$e(e):e instanceof c2?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(ke.min()))try{const r=yield iL(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.D_.get(l);h&&o.D_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const h=o.D_.get(u);if(!h)return;o.D_.set(u,h.withResumeToken(lr.EMPTY_BYTE_STRING,h.snapshotVersion)),gL(o,u);const g=new Ks(h.target,u,l,h.sequenceNumber);VT(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),yield iI(t,r)}var r}),$T.apply(this,arguments)}function iI(t,e,n){return HT.apply(this,arguments)}function HT(){return HT=(0,Q.Z)(function*(t,e,n){if(!qa(e))throw e;t.C_.add(1),yield Hd(t),t.M_.set("Offline"),n||(n=()=>iL(t.localStore)),t.asyncQueue.enqueueRetryable((0,Q.Z)(function*(){ue("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Cg(t)}))}),HT.apply(this,arguments)}function _L(t,e){return e().catch(n=>iI(t,n,e))}function zd(t){return zT.apply(this,arguments)}function zT(){return zT=(0,Q.Z)(function*(t){const e=pe(t),n=iu(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;zY(e);)try{const i=yield SY(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,qY(e,i)}catch(i){yield iI(e,i)}yL(e)&&vL(e)}),zT.apply(this,arguments)}function zY(t){return ru(t)&&t.b_.length<10}function qY(t,e){t.b_.push(e);const n=iu(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function yL(t){return ru(t)&&!iu(t).jo()&&t.b_.length>0}function vL(t){iu(t).start()}function GY(t){return qT.apply(this,arguments)}function qT(){return qT=(0,Q.Z)(function*(t){iu(t).E_()}),qT.apply(this,arguments)}function WY(t){return GT.apply(this,arguments)}function GT(){return GT=(0,Q.Z)(function*(t){const e=iu(t);for(const n of t.b_)e.P_(n.mutations)}),GT.apply(this,arguments)}function ZY(t,e,n){return WT.apply(this,arguments)}function WT(){return WT=(0,Q.Z)(function*(t,e,n){const r=t.b_.shift(),i=rT.from(r,e,n);yield _L(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield zd(t)}),WT.apply(this,arguments)}function KY(t,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Q.Z)(function*(t,e){var n;e&&iu(t).h_&&(yield(n=(0,Q.Z)(function*(i,o){if(i2(a=o.code)&&a!==z.ABORTED){const s=i.b_.shift();iu(i).Yo(),yield _L(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield zd(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),yL(t)&&vL(t)}),ZT.apply(this,arguments)}function IL(t,e){return KT.apply(this,arguments)}function KT(){return KT=(0,Q.Z)(function*(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=ru(n);n.C_.add(3),yield Hd(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Cg(n)}),KT.apply(this,arguments)}function QT(t,e){return YT.apply(this,arguments)}function YT(){return YT=(0,Q.Z)(function*(t,e){const n=pe(t);e?(n.C_.delete(2),yield Cg(n)):e||(n.C_.add(2),yield Hd(n),n.M_.set("Unknown"))}),YT.apply(this,arguments)}function qd(t){return t.O_||(t.O_=function(n,r,i){const o=pe(n);return o.A_(),new kY(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:jY.bind(null,t),Io:$Y.bind(null,t),a_:HY.bind(null,t)}),t.v_.push(function(){var e=(0,Q.Z)(function*(n){n?(t.O_.Yo(),UT(t)?LT(t):t.M_.set("Unknown")):(yield t.O_.stop(),mL(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function iu(t){return t.N_||(t.N_=function(n,r,i){const o=pe(n);return o.A_(),new FY(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:GY.bind(null,t),Io:KY.bind(null,t),T_:WY.bind(null,t),I_:ZY.bind(null,t)}),t.v_.push(function(){var e=(0,Q.Z)(function*(n){n?(t.N_.Yo(),yield zd(t)):(yield t.N_.stop(),t.b_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class JT{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new JT(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ie(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gd(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),qa(t))return new ie(z.UNAVAILABLE,`${e}: ${t}`);throw t}class Wd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=og(),this.sortedSet=new tn(this.comparator)}static emptySet(e){return new Wd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Wd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class EL{constructor(){this.B_=new tn(_e.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):De():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zd{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Zd(e,n,Wd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class QY{constructor(){this.k_=void 0,this.listeners=[]}}class YY{constructor(){this.queries=new Ws(e=>UV(e),rg),this.onlineState="Unknown",this.q_=new Set}}function XT(t,e){return eD.apply(this,arguments)}function eD(){return eD=(0,Q.Z)(function*(t,e){const n=pe(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new QY),i)try{o.k_=yield n.onListen(r)}catch(s){const a=Gd(s,`Initialization of query '${Pd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&rD(n)}),eD.apply(this,arguments)}function tD(t,e){return nD.apply(this,arguments)}function nD(){return nD=(0,Q.Z)(function*(t,e){const n=pe(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),nD.apply(this,arguments)}function JY(t,e){const n=pe(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&rD(n)}function XY(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function rD(t){t.q_.forEach(e=>{e.next()})}class iD{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Zd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class eJ{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class wL{constructor(e){this.serializer=e}hs(e){return cs(this.serializer,e)}Ps(e){return e.metadata.exists?v2(this.serializer,e.document,!1):pn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Kn(e)}}class tJ{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CL(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=St.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new wL(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.hs(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||rt()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,Q.Z)(function*(){const n=yield function RY(t,e,n,r){return DT.apply(this,arguments)}(e.localStore,new wL(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield PY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function CL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class bL{constructor(e){this.key=e}}class TL{constructor(e){this.key=e}}class DL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=rt(),this.mutatedKeys=rt(),this._a=jV(e),this.aa=new Wd(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new EL,i=n?n.aa:this.aa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),v=ig(this.query,g)?g:null,A=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let x=!1;m&&v?m.data.isEqual(v.data)?A!==R&&(r.track({type:3,doc:v}),x=!0):this.ha(m,v)||(r.track({type:2,doc:v}),x=!0,(u&&this._a(v,u)>0||l&&this._a(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),x=!0):m&&!v&&(r.track({type:1,doc:m}),x=!0,(u||l)&&(a=!0)),x&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((h,g)=>function(v,A){const R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return R(v)-R(A)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,0!==s.length||l?{snapshot:new Zd(this.query,e.aa,o,s,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new EL,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=rt(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new TL(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new bL(r))}),n}da(e){this.ia=e.ls,this.oa=rt();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Zd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class nJ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rJ{constructor(e){this.key=e,this.Ra=!1}}class iJ{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Ws(a=>UV(a),rg),this.fa=new Map,this.ga=new Set,this.pa=new tn(_e.comparator),this.ya=new Map,this.wa=new yT,this.Sa={},this.ba=new Map,this.Da=gc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function oJ(t,e){return oD.apply(this,arguments)}function oD(){return oD=(0,Q.Z)(function*(t,e){const n=SD(t);let r,i;const o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const s=yield jd(n.localStore,ci(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield sD(n,e,r,"current"===a,s.resumeToken),n.isPrimaryClient&&rI(n.remoteStore,s)}return i}),oD.apply(this,arguments)}function sD(t,e,n,r,i){return aD.apply(this,arguments)}function aD(){return aD=(0,Q.Z)(function*(t,e,n,r,i){t.va=(g,m,v)=>{return(A=(0,Q.Z)(function*(x,U,k,B){let ee=U.view.ca(k);ee.Zi&&(ee=yield Jv(x.localStore,U.query,!1).then(({documents:mn})=>U.view.ca(mn,ee)));const fe=B&&B.targetChanges.get(U.targetId),Be=B&&null!=B.targetMismatches.get(U.targetId),Dt=U.view.applyChanges(ee,x.isPrimaryClient,fe,Be);return _D(x,U.targetId,Dt.Ta),Dt.snapshot}),function R(x,U,k,B){return A.apply(this,arguments)})(t,g,m,v);var A};const o=yield Jv(t.localStore,e,!0),s=new DL(e,o.ls),a=s.ca(o.documents),u=dg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=s.applyChanges(a,t.isPrimaryClient,u);_D(t,n,l.Ta);const h=new nJ(e,n,s);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot}),aD.apply(this,arguments)}function sJ(t,e){return uD.apply(this,arguments)}function uD(){return uD=(0,Q.Z)(function*(t,e){const n=pe(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!rg(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $d(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),bg(n.remoteStore,r.targetId),Kd(n,r.targetId)}).catch(za))):(Kd(n,r.targetId),yield $d(n.localStore,r.targetId,!0))}),uD.apply(this,arguments)}function cD(){return cD=(0,Q.Z)(function*(t,e,n){const r=RD(t);try{const i=yield function(s,a){const u=pe(s),l=vn.now(),h=a.reduce((v,A)=>v.add(A.key),rt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let A=bi(),R=rt();return u.ss.getEntries(v,h).next(x=>{A=x,A.forEach((U,k)=>{k.isValidDocument()||(R=R.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,A)).next(x=>{g=x;const U=[];for(const k of a){const B=FQ(k,g.get(k.key).overlayedDocument);null!=B&&U.push(new Zs(k.key,B,bV(B.value.mapValue),In.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,U,a)}).next(x=>{m=x;const U=x.applyToLocalDocumentSet(g,R);return u.documentOverlayCache.saveOverlays(v,x.batchId,U)})}).then(()=>({batchId:m.batchId,changes:HV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Sa[s.currentUser.toKey()];l||(l=new tn(Qe)),l=l.insert(a,u),s.Sa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Qs(r,i.changes),yield zd(r.remoteStore)}catch(i){const o=Gd(i,"Failed to persist write");n.reject(o)}}),cD.apply(this,arguments)}function AL(t,e){return lD.apply(this,arguments)}function lD(){return lD=(0,Q.Z)(function*(t,e){const n=pe(t);try{const r=yield function AY(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.qr.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.qr.addMatchingKeys(o,h.addedDocuments,g)));let v=m.withSequenceNumber(o.currentSequenceNumber);var R,x,U;null!==e.targetMismatches.get(g)?v=v.withResumeToken(lr.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(g,v),x=v,U=h,(0===(R=m).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(o,v))});let u=bi(),l=rt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(oL(o,s,e.documentUpdates).next(h=>{u=h.us,l=h.cs})),!r.isEqual(ke.min())){const h=n.qr.getLastRemoteSnapshotVersion(o).next(g=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.ts=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.ya.get(o);s&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?Ne(s.Ra):i.removedDocuments.size>0&&(Ne(s.Ra),s.Ra=!1))}),yield Qs(n,r,e)}catch(r){yield za(r)}}),lD.apply(this,arguments)}function SL(t,e,n){const r=pe(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=pe(s);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(l=!0)}),l&&rD(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uJ(t,e,n){return dD.apply(this,arguments)}function dD(){return dD=(0,Q.Z)(function*(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),o=i&&i.key;if(o){let s=new tn(_e.comparator);s=s.insert(o,pn.newNoDocument(o,ke.min()));const a=rt().add(o),u=new lg(ke.min(),new Map,new tn(Qe),s,a);yield AL(r,u),r.pa=r.pa.remove(o),r.ya.delete(e),yD(r)}else yield $d(r.localStore,e,!1).then(()=>Kd(r,e,n)).catch(za)}),dD.apply(this,arguments)}function cJ(t,e){return hD.apply(this,arguments)}function hD(){return hD=(0,Q.Z)(function*(t,e){const n=pe(t),r=e.batch.batchId;try{const i=yield function DY(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let v=V.resolve();return m.forEach(A=>{v=v.next(()=>h.getEntry(u,A)).next(R=>{const x=l.docVersions.get(A);Ne(null!==x),R.version.compareTo(x)<0&&(g.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=rt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);mD(n,r,null),gD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Qs(n,i)}catch(i){yield za(i)}}),hD.apply(this,arguments)}function lJ(t,e,n){return fD.apply(this,arguments)}function fD(){return fD=(0,Q.Z)(function*(t,e,n){const r=pe(t);try{const i=yield function(s,a){const u=pe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ne(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);mD(r,e,n),gD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Qs(r,i)}catch(i){yield za(i)}}),fD.apply(this,arguments)}function pD(){return pD=(0,Q.Z)(function*(t,e){const n=pe(t);ru(n.remoteStore)||ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=pe(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Gd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),pD.apply(this,arguments)}function gD(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function mD(t,e,n){const r=pe(t);let i=r.Sa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Kd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||RL(t,r)})}function RL(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(bg(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),yD(t))}function _D(t,e,n){for(const r of n)r instanceof bL?(t.wa.addReference(r.key,e),hJ(t,r)):r instanceof TL?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||RL(t,r.key)):De()}function hJ(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.ga.add(r),yD(t))}function yD(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new _e(St.fromString(e)),r=t.Da.next();t.ya.set(r,new rJ(n)),t.pa=t.pa.insert(n,r),rI(t.remoteStore,new Ks(ci(Sd(n.path)),r,"TargetPurposeLimboResolution",ji._e))}}function Qs(t,e,n){return vD.apply(this,arguments)}function vD(){return vD=(0,Q.Z)(function*(t,e,n){const r=pe(t),i=[],o=[],s=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{s.push(r.va(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=CT.Qi(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Va.a_(i),yield(a=(0,Q.Z)(function*(l,h){const g=pe(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(h,v=>V.forEach(v.ki,A=>g.persistence.referenceDelegate.addReference(m,v.targetId,A)).next(()=>V.forEach(v.qi,A=>g.persistence.referenceDelegate.removeReference(m,v.targetId,A)))))}catch(m){if(!qa(m))throw m;ue("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const A=g.ts.get(v),x=A.withLastLimboFreeSnapshotVersion(A.snapshotVersion);g.ts=g.ts.insert(v,x)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,o))}),vD.apply(this,arguments)}function fJ(t,e){return ID.apply(this,arguments)}function ID(){return ID=(0,Q.Z)(function*(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=yield rL(n.localStore,e);n.currentUser=e,(o=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new ie(z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qs(n,r._s)}var o}),ID.apply(this,arguments)}function pJ(t,e){const n=pe(t),r=n.ya.get(e);if(r&&r.Ra)return rt().add(r.key);{let i=rt();const o=n.fa.get(e);if(!o)return i;for(const s of o){const a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function gJ(t,e){return ED.apply(this,arguments)}function ED(){return ED=(0,Q.Z)(function*(t,e){const n=pe(t),r=yield Jv(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&_D(n,e.targetId,i.Ta),i}),ED.apply(this,arguments)}function mJ(t,e){return wD.apply(this,arguments)}function wD(){return wD=(0,Q.Z)(function*(t,e){const n=pe(t);return aL(n.localStore,e).then(r=>Qs(n,r))}),wD.apply(this,arguments)}function _J(t,e,n,r){return CD.apply(this,arguments)}function CD(){return CD=(0,Q.Z)(function*(t,e,n,r){const i=pe(t),o=yield function(a,u){const l=pe(a),h=pe(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):V.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield zd(i.remoteStore):"acknowledged"===n||"rejected"===n?(mD(i,e,r||null),gD(i,e),u=e,pe(pe(i.localStore).mutationQueue).Fn(u)):De(),yield Qs(i,o)):ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),CD.apply(this,arguments)}function bD(){return bD=(0,Q.Z)(function*(t,e){const n=pe(t);if(SD(n),RD(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield PL(n,r.toArray());n.Ca=!0,yield QT(n.remoteStore,!0);for(const o of i)rI(n.remoteStore,o)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Kd(n,s),$d(n.localStore,s,!0))),bg(n.remoteStore,s)}),yield i,yield PL(n,r),function(s){const a=pe(s);a.ya.forEach((u,l)=>{bg(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new tn(_e.comparator)}(n),n.Ca=!1,yield QT(n.remoteStore,!1)}}),bD.apply(this,arguments)}function PL(t,e,n){return TD.apply(this,arguments)}function TD(){return TD=(0,Q.Z)(function*(t,e,n){const r=pe(t),i=[],o=[];for(const s of e){let a;const u=r.fa.get(s);if(u&&0!==u.length){a=yield jd(r.localStore,ci(u[0]));for(const l of u){const h=r.ma.get(l),g=yield gJ(r,h);g.snapshot&&o.push(g.snapshot)}}else{const l=yield sL(r.localStore,s);a=yield jd(r.localStore,l),yield sD(r,ML(l),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i}),TD.apply(this,arguments)}function ML(t){return FV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vJ(t){return n=pe(t).localStore,pe(pe(n).persistence).Bi();var n}function IJ(t,e,n,r){return DD.apply(this,arguments)}function DD(){return DD=(0,Q.Z)(function*(t,e,n,r){const i=pe(t);if(i.Ca)return void ue("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield aL(i.localStore,BV(o[0])),a=lg.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,lr.EMPTY_BYTE_STRING);yield Qs(i,s,a);break}case"rejected":yield $d(i.localStore,e,!0),Kd(i,e,r);break;default:De()}}),DD.apply(this,arguments)}function EJ(t,e,n){return AD.apply(this,arguments)}function AD(){return AD=(0,Q.Z)(function*(t,e,n){const r=SD(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ue("SyncEngine","Adding an already active target "+i);continue}const o=yield sL(r.localStore,i),s=yield jd(r.localStore,o);yield sD(r,ML(o),s.targetId,!1,s.resumeToken),rI(r.remoteStore,s)}for(const i of n)r.fa.has(i)&&(yield $d(r.localStore,i,!1).then(()=>{bg(r.remoteStore,i),Kd(r,i)}).catch(za))}}),AD.apply(this,arguments)}function SD(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uJ.bind(null,e),e.Va.a_=JY.bind(null,e.eventManager),e.Va.Fa=XY.bind(null,e.eventManager),e}function RD(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lJ.bind(null,e),e}class Tg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Q.Z)(function*(){n.serializer=wg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return nL(this.persistence,new tL,e.initialUser,this.serializer)}createPersistence(e){return new vT(Kv.jr,this.serializer)}createSharedClientState(e){return new dL}terminate(){var e=this;return(0,Q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class PD extends Tg{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield RD(r.xa.syncEngine),yield zd(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return nL(this.persistence,new tL,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new G2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new ZK(n,this.persistence);return new WK(e.asyncQueue,r)}createPersistence(e){const n=wT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$r.withCacheSize(this.cacheSizeBytes):$r.DEFAULT;return new ET(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,fL(),nI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new dL}}class xL extends PD{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof MT&&(r.sharedClientState.syncEngine={Ys:_J.bind(null,i),Zs:IJ.bind(null,i),Xs:EJ.bind(null,i),Bi:vJ.bind(null,i),Js:mJ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var o=(0,Q.Z)(function*(s){yield function yJ(t,e){return bD.apply(this,arguments)}(r.xa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=fL();if(!MT.D(n))throw new ie(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MT(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qd{initialize(e,n){var r=this;return(0,Q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>SL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=fJ.bind(null,r.syncEngine),yield QT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new YY}createDatastore(e){const n=wg(e.databaseInfo.databaseId),r=new OY(e.databaseInfo);return new VY(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>SL(this.syncEngine,n,0),a=hL.D()?new hL:new MY,new BY(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){const g=new iJ(i,o,s,a,u,l);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Q.Z)(function*(r){const i=pe(r);ue("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield Hd(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function NL(t,e=10240){let n=0;return{read:()=>(0,Q.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Q.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class oI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class bJ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new cr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Q.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Q.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Q.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const o=yield e.Ka(i);return new eJ(JSON.parse(o),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Q.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,Q.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Q.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class TJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Q.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new ie(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Q.Z)(function*(s,a){const u=pe(s),l=fg(u.serializer)+"/documents",h={documents:a.map(A=>hg(u.serializer,A))},g=yield u.Co("BatchGetDocuments",l,h,a.length),m=new Map;g.forEach(A=>{const R=function GQ(t,e){return"found"in e?function(r,i){Ne(!!i.found);const o=cs(r,i.found.name),s=Kn(i.found.updateTime),a=i.found.createTime?Kn(i.found.createTime):ke.min(),u=new Mr({mapValue:{fields:i.found.fields}});return pn.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){Ne(!!i.missing),Ne(!!i.readTime);const o=cs(r,i.missing),s=Kn(i.readTime);return pn.newNoDocument(o,s)}(t,e):De()}(u.serializer,A);m.set(R.key.toString(),R)});const v=[];return a.forEach(A=>{const R=m.get(A.toString());Ne(!!R),v.push(R)}),v}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Od(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=_e.fromPath(i);e.mutations.push(new tT(o,e.precondition(o)))}),yield(r=(0,Q.Z)(function*(o,s){const a=pe(o),u=fg(a.serializer)+"/documents",l={writes:s.map(h=>pg(a.serializer,h))};yield a.wo("Commit",u,l)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw De();n=ke.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ie(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ke.min())?In.exists(!1):In.updateTime(n):In.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ke.min()))throw new ie(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return In.updateTime(n)}return In.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DJ{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new NT(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Q.Z)(function*(){const n=new TJ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ja(o)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!Kp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!i2(n)}return!1}}class AJ{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=eV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,Q.Z)(function*(a){ue("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,Q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Gd(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function sI(t,e){return MD.apply(this,arguments)}function MD(){return MD=(0,Q.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Q.Z)(function*(o){r.isEqual(o)||(yield rL(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),MD.apply(this,arguments)}function xD(t,e){return ND.apply(this,arguments)}function ND(){return ND=(0,Q.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield OD(t);ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>IL(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>IL(e.remoteStore,o)),t._onlineComponents=e}),ND.apply(this,arguments)}function OL(t){return"FirebaseError"===t.name?t.code===z.FAILED_PRECONDITION||t.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function OD(t){return kD.apply(this,arguments)}function kD(){return kD=(0,Q.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sI(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!OL(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),yield sI(t,new Tg)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),yield sI(t,new Tg);return t._offlineComponents}),kD.apply(this,arguments)}function aI(t){return FD.apply(this,arguments)}function FD(){return FD=(0,Q.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield xD(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),yield xD(t,new Qd))),t._onlineComponents}),FD.apply(this,arguments)}function kL(t){return OD(t).then(e=>e.persistence)}function Yd(t){return OD(t).then(e=>e.localStore)}function FL(t){return aI(t).then(e=>e.remoteStore)}function VD(t){return aI(t).then(e=>e.syncEngine)}function Jd(t){return LD.apply(this,arguments)}function LD(){return LD=(0,Q.Z)(function*(t){const e=yield aI(t),n=e.eventManager;return n.onListen=oJ.bind(null,e.syncEngine),n.onUnlisten=sJ.bind(null,e.syncEngine),n}),LD.apply(this,arguments)}function LL(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(o,s,a,u,l){const h=new oI({next:m=>{s.enqueueAndForget(()=>tD(o,g));const v=m.docs.has(a);!v&&m.fromCache?l.reject(new ie(z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&"server"===u.source?l.reject(new ie(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new iD(Sd(a.path),h,{includeMetadataChanges:!0,J_:!0});return XT(o,g)}(yield Jd(t),t.asyncQueue,e,n,r)})),r.promise}function UL(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(o,s,a,u,l){const h=new oI({next:m=>{s.enqueueAndForget(()=>tD(o,g)),m.fromCache&&"server"===u.source?l.reject(new ie(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new iD(a,h,{includeMetadataChanges:!0,J_:!0});return XT(o,g)}(yield Jd(t),t.asyncQueue,e,n,r)})),r.promise}function BL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const jL=new Map;function UD(t,e,n){if(!n)throw new ie(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $L(t,e,n,r){if(!0===e&&!0===r)throw new ie(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HL(t){if(!_e.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zL(t){if(_e.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uI(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":De()}function mt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uI(t);throw new ie(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qL(t,e){if(e<=0)throw new ie(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class GL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ie(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ie(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$L("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=BL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ie(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ie(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new kK;switch(r.type){case"firstParty":return new UK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jL.get(n);r&&(ue("ComponentProvider","Removing Datastore"),jL.delete(n),r.terminate())}(this),Promise.resolve()}}function WL(t,e,n,r={}){var i;const o=(t=mt(t,Dg))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Ir.MOCK_USER;else{a=(0,wt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ie(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ir(l)}t._authCredentials=new FK(new JF(a,u))}}class xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class ls extends xr{constructor(e,n,r){super(e,n,Sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new _e(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function ZL(t,e,...n){if(t=(0,wt.m9)(t),UD("collection","path",e),t instanceof Dg){const r=St.fromString(e,...n);return zL(r),new ls(t,null,r)}{if(!(t instanceof gn||t instanceof ls))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(St.fromString(e,...n));return zL(r),new ls(t.firestore,null,r)}}function cI(t,e,...n){if(t=(0,wt.m9)(t),1===arguments.length&&(e=eV.newId()),UD("doc","path",e),t instanceof Dg){const r=St.fromString(e,...n);return HL(r),new gn(t,null,new _e(r))}{if(!(t instanceof gn||t instanceof ls))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(St.fromString(e,...n));return HL(r),new gn(t.firestore,t instanceof ls?t.converter:null,new _e(r))}}function KL(t,e){return t=(0,wt.m9)(t),e=(0,wt.m9)(e),(t instanceof gn||t instanceof ls)&&(e instanceof gn||e instanceof ls)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function BD(t,e){return t=(0,wt.m9)(t),e=(0,wt.m9)(e),t instanceof xr&&e instanceof xr&&t.firestore===e.firestore&&rg(t._query,e._query)&&t.converter===e.converter}class UJ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new NT(this,"async_queue_retry"),this.iu=()=>{const n=nI();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=nI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=nI();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new cr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Q.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!qa(n))throw n;ue("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Zn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=JT.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&De()}verifyOperationInProgress(){}uu(){var e=this;return(0,Q.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function jD(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class BJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nn extends Dg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new UJ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||QL(this),this._firestoreClient.terminate()}}function Un(t){return t._firestoreClient||QL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function QL(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new gQ(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,BL(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new AJ(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function YL(t,e,n){const r=new cr;return t.asyncQueue.enqueue((0,Q.Z)(function*(){try{yield sI(t,n),yield xD(t,e),r.resolve()}catch(i){const o=i;if(!OL(o))throw o;wi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function JL(t){if(t._initialized||t._terminated)throw new ie(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ds(lr.fromBase64String(e))}catch(n){throw new ie(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ds(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ys{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ie(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _c{constructor(e){this._methodName=e}}class lI{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}const JJ=/^__.*__$/;class XJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nd(e,this.data,n,this.fieldTransforms)}}class XL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class dI{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new dI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return pI(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(eU(this.Iu)&&JJ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class eX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wg(e)}pu(e,n,r,i=!1){return new dI({Iu:e,methodName:n,gu:r,path:fn.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yc(t){const e=t._freezeSettings(),n=wg(t._databaseId);return new eX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hI(t,e,n,r,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);qD("Data must be an object, but it was:",s,r);const a=rU(r,s);let u,l;if(o.merge)u=new Ci(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const m=Rg(e,g,n);if(!s.contains(m))throw new ie(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oU(h,m)||h.push(m)}u=new Ci(h),l=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=s.fieldTransforms;return new XJ(new Mr(a),u,l)}class Sg extends _c{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sg}}function tU(t,e,n){return new dI({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $D extends _c{_toFieldTransform(e){return new ag(e.path,new Md)}isEqual(e){return e instanceof $D}}class tX extends _c{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=tU(this,e,!0),r=this.yu.map(o=>vc(o,n)),i=new uc(r);return new ag(e.path,i)}isEqual(e){return this===e}}class nX extends _c{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=tU(this,e,!0),r=this.yu.map(o=>vc(o,n)),i=new cc(r);return new ag(e.path,i)}isEqual(e){return this===e}}class rX extends _c{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new xd(e.serializer,WV(e.serializer,this.wu));return new ag(e.path,n)}isEqual(e){return this===e}}function HD(t,e,n,r){const i=t.pu(1,e,n);qD("Data must be an object, but it was:",i,r);const o=[],s=Mr.empty();Ga(r,(u,l)=>{const h=fI(e,u,n);l=(0,wt.m9)(l);const g=i.Ru(h);if(l instanceof Sg)o.push(h);else{const m=vc(l,g);null!=m&&(o.push(h),s.set(h,m))}});const a=new Ci(o);return new XL(s,a,i.fieldTransforms)}function zD(t,e,n,r,i,o){const s=t.pu(1,e,n),a=[Rg(e,r,n)],u=[i];if(o.length%2!=0)throw new ie(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Rg(e,o[m])),u.push(o[m+1]);const l=[],h=Mr.empty();for(let m=a.length-1;m>=0;--m)if(!oU(l,a[m])){const v=a[m];let A=u[m];A=(0,wt.m9)(A);const R=s.Ru(v);if(A instanceof Sg)l.push(v);else{const x=vc(A,R);null!=x&&(l.push(v),h.set(v,x))}}const g=new Ci(l);return new XL(h,g,s.fieldTransforms)}function nU(t,e,n,r=!1){return vc(n,t.pu(r?4:3,e))}function vc(t,e){if(iU(t=(0,wt.m9)(t)))return qD("Unsupported field value:",e,t),rU(t,e);if(t instanceof _c)return function(r,i){if(!eU(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=vc(a,i.Vu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,wt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return WV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=vn.fromDate(r);return{timestampValue:kd(i.serializer,o)}}if(r instanceof vn){const o=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kd(i.serializer,o)}}if(r instanceof lI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ds)return{bytesValue:p2(i.serializer,r._byteString)};if(r instanceof gn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:aT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${uI(r)}`)}(t,e)}function rU(t,e){const n={};return gV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ga(t,(r,i)=>{const o=vc(i,e.Eu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function iU(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof vn||t instanceof lI||t instanceof ds||t instanceof gn||t instanceof _c)}function qD(t,e,n){if(!iU(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=uI(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Rg(t,e,n){if((e=(0,wt.m9)(e))instanceof Ys)return e._internalPath;if("string"==typeof e)return fI(t,e);throw pI("Field path arguments must be of type string or ",t,!1,void 0,n)}const iX=new RegExp("[~\\*/\\[\\]]");function fI(t,e,n){if(e.search(iX)>=0)throw pI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ys(...e.split("."))._internalPath}catch{throw pI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pI(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new ie(z.INVALID_ARGUMENT,a+t+u)}function oU(t,e){return t.some(n=>n.isEqual(e))}class Pg{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class oX extends Pg{data(){return super.data()}}function gI(t,e){return"string"==typeof e?fI(t,e):e instanceof Ys?e._internalPath:e._delegate._internalPath}function sU(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ie(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GD{}class Mg extends GD{}function ou(t,e,...n){let r=[];e instanceof GD&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Xd).length,a=o.filter(u=>u instanceof xg).length;if(s>1||s>0&&a>0)throw new ie(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class xg extends Mg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xg(e,n,r)}_apply(e){const n=this._parse(e);return lU(e._query,n),new xr(e.firestore,e.converter,Xb(e._query,n))}_parse(e){const n=yc(e.firestore);return function(o,s,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ie(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){cU(g,h);const v=[];for(const A of g)v.push(uU(u,o,A));m={arrayValue:{values:v}}}else m=uU(u,o,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||cU(g,h),m=nU(a,"where",g,"in"===h||"not-in"===h);return Ct.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Xd extends GD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)lU(s,u),s=Xb(s,u)}(e._query,n),new xr(e.firestore,e.converter,Xb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class WD extends Mg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new WD(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new ie(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ie(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tg(o,s)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Gs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class mI extends Mg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new mI(e,n,r)}_apply(e){return new xr(e.firestore,e.converter,Fv(e._query,this._limit,this._limitType))}}class _I extends Mg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new _I(e,n,r)}_apply(e){const n=aU(e,this.type,this._docOrFields,this._inclusive);return new xr(e.firestore,e.converter,(o=n,new Gs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class yI extends Mg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new yI(e,n,r)}_apply(e){const n=aU(e,this.type,this._docOrFields,this._inclusive);return new xr(e.firestore,e.converter,(o=n,new Gs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function aU(t,e,n,r){if(n[0]=(0,wt.m9)(n[0]),n[0]instanceof Pg)return function(o,s,a,u,l){if(!u)throw new ie(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Rd(o))if(g.field.isKeyField())h.push(sc(s,u.key));else{const m=u.data.field(g.field);if(Rv(m))throw new ie(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const v=g.field.canonicalString();throw new ie(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ja(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=yc(t.firestore);return function(s,a,u,l,h,g){const m=s.explicitOrderBy;if(h.length>m.length)throw new ie(z.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let A=0;A<h.length;A++){const R=h[A];if(m[A].field.isKeyField()){if("string"!=typeof R)throw new ie(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!Jb(s)&&-1!==R.indexOf("/"))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);const x=s.path.child(St.fromString(R));if(!_e.isDocumentKey(x))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const U=new _e(x);v.push(sc(a,U))}else{const x=nU(u,l,R);v.push(x)}}return new Ja(v,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function uU(t,e,n){if("string"==typeof(n=(0,wt.m9)(n))){if(""===n)throw new ie(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jb(e)&&-1!==n.indexOf("/"))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(St.fromString(n));if(!_e.isDocumentKey(r))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sc(t,new _e(r))}if(n instanceof gn)return sc(t,n._key);throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uI(n)}.`)}function cU(t,e){if(!Array.isArray(t)||0===t.length)throw new ie(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lU(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ie(z.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZD{convertValue(e,n="none"){switch(Qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ga(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new lI(Ln(e.latitude),Ln(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pv(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yp(e));default:return null}}convertTimestamp(e){const n=Wa(e);return new vn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=St.fromString(e);Ne(b2(r));const i=new Za(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return i.isEqual(n)||Zn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function vI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class pX extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}class Ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends Pg{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ng extends Js{data(e={}){return super.data(e)}}class su{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ic(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ng(this._firestore,this._userDataWriter,r.key,r,new Ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Ng(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ic(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new Ng(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ic(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:mX(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function mX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function hU(t,e){return t instanceof Js&&e instanceof Js?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof su&&e instanceof su&&t._firestore===e._firestore&&BD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class au extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function fU(t,e,n){t=mt(t,gn);const r=mt(t.firestore,nn),i=vI(t.converter,e,n);return eh(r,[hI(yc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,In.none())])}function pU(t,e,n,...r){t=mt(t,gn);const i=mt(t.firestore,nn),o=yc(i);let s;return s="string"==typeof(e=(0,wt.m9)(e))||e instanceof Ys?zD(o,"updateDoc",t._key,e,n,r):HD(o,"updateDoc",t._key,e),eh(i,[s.toMutation(t._key,In.exists(!0))])}function gU(t,...e){var n,r,i;t=(0,wt.m9)(t);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||jD(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(jD(e[s])){const g=e[s];e[s]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof gn)l=mt(t.firestore,nn),h=Sd(t._key.path),u={next:g=>{e[s]&&e[s](KD(l,t,g))},error:e[s+1],complete:e[s+2]};else{const g=mt(t,xr);l=mt(g.firestore,nn),h=g._query;const m=new au(l);u={next:v=>{e[s]&&e[s](new su(l,m,g,v))},error:e[s+1],complete:e[s+2]},sU(t._query)}return function(m,v,A,R){const x=new oI(R),U=new iD(v,x,A);return m.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return XT(yield Jd(m),U)})),()=>{x.Na(),m.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return tD(yield Jd(m),U)}))}}(Un(l),h,a,u)}function eh(t,e){return function(r,i){const o=new cr;return r.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function aJ(t,e,n){return cD.apply(this,arguments)}(yield VD(r),i,o)})),o.promise}(Un(t),e)}function KD(t,e,n){const r=n.docs.get(e._key),i=new au(t);return new Js(t,i,e._key,r,new Ic(n.hasPendingWrites,n.fromCache),e.converter)}const OX={maxAttempts:5};class mU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yc(e)}set(e,n,r){this._verifyNotCommitted();const i=uu(e,this._firestore),o=vI(i.converter,n,r),s=hI(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,In.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=uu(e,this._firestore);let s;return s="string"==typeof(n=(0,wt.m9)(n))||n instanceof Ys?zD(this._dataReader,"WriteBatch.update",o._key,n,r,i):HD(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,In.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=uu(e,this._firestore);return this._mutations=this._mutations.concat(new Od(n._key,In.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uu(t,e){if((t=(0,wt.m9)(t)).firestore!==e)throw new ie(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class kX extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=yc(n)}get(n){const r=uu(n,this._firestore),i=new pX(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return De();const s=o[0];if(s.isFoundDocument())return new Pg(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Pg(this._firestore,i,r._key,null,r.converter);throw De()})}set(n,r,i){const o=uu(n,this._firestore),s=vI(o.converter,r,i),a=hI(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=uu(n,this._firestore);let a;return a="string"==typeof(r=(0,wt.m9)(r))||r instanceof Ys?zD(this._dataReader,"Transaction.update",s._key,r,i,o):HD(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=uu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=uu(e,this._firestore),r=new au(this._firestore);return super.get(e).then(i=>new Js(this._firestore,r,n._key,i._document,new Ic(!1,!1),n.converter))}}function YD(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ie("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function IU(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function EU(){if(!function fQ(){return typeof atob<"u"}())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Id=Rn.SDK_VERSION,(0,Rn._registerComponent)(new YC.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new nn(new VK(r.getProvider("auth-internal")),new BK(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ie(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Rn.registerVersion)(YF,"4.4.0",e),(0,Rn.registerVersion)(YF,"4.4.0","esm2017")}();class Og{constructor(e){this._delegate=e}static fromBase64String(e){return EU(),new Og(ds.fromBase64String(e))}static fromUint8Array(e){return IU(),new Og(ds.fromUint8Array(e))}toBase64(){return EU(),this._delegate.toBase64()}toUint8Array(){return IU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JD(t){return function qX(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class GX{enableIndexedDbPersistence(e,n){return function HJ(t,e){JL(t=mt(t,nn));const n=Un(t);if(n._uninitializedComponentsProvider)throw new ie(z.FAILED_PRECONDITION,"SDK cache is already specified.");wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Qd;return YL(n,i,new PD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function zJ(t){JL(t=mt(t,nn));const e=Un(t);if(e._uninitializedComponentsProvider)throw new ie(z.FAILED_PRECONDITION,"SDK cache is already specified.");wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Qd;return YL(e,r,new xL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qJ(t){if(t._initialized&&!t._terminated)throw new ie(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new cr;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{yield(n=(0,Q.Z)(function*(i){if(!xo.D())return Promise.resolve();const o=i+"main";yield xo.delete(o)}),function r(i){return n.apply(this,arguments)})(wT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class wU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){WL(this._delegate,e,n,r)}enableNetwork(){return function WJ(t){return function SJ(t){return t.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield kL(t),n=yield FL(t);return e.setNetworkEnabled(!0),function(i){const o=pe(i);return o.C_.delete(0),Cg(o)}(n)}))}(Un(t=mt(t,nn)))}(this._delegate)}disableNetwork(){return function ZJ(t){return function RJ(t){return t.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield kL(t),n=yield FL(t);return e.setNetworkEnabled(!1),(r=(0,Q.Z)(function*(o){const s=pe(o);s.C_.add(0),yield Hd(s),s.M_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(Un(t=mt(t,nn)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,$L("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function GJ(t){return function(n){const r=new cr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function dJ(t,e){return pD.apply(this,arguments)}(yield VD(n),r)})),r.promise}(Un(t=mt(t,nn)))}(this._delegate)}onSnapshotsInSync(e){return function TX(t,e){return function xJ(t,e){const n=new oI(e);return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return i=yield Jd(t),o=n,pe(i).q_.add(o),void o.next();var i,o})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return i=yield Jd(t),o=n,void pe(i).q_.delete(o);var i,o}))}}(Un(t=mt(t,nn)),jD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new th(this,ZL(this._delegate,e))}catch(n){throw li(n,"collection()","Firestore.collection()")}}doc(e){try{return new po(this,cI(this._delegate,e))}catch(n){throw li(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new di(this,function LJ(t,e){if(t=mt(t,Dg),UD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xr(t,null,(r=e,new Gs(St.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw li(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function FX(t,e,n){t=mt(t,nn);const r=Object.assign(Object.assign({},OX),n);return function(o){if(o.maxAttempts<1)throw new ie(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new cr;return o.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){const l=yield function VL(t){return aI(t).then(e=>e.datastore)}(o);new DJ(o.asyncQueue,l,a,s,u).run()})),u.promise}(Un(t),i=>e(new kX(t,i)),r)}(this._delegate,n=>e(new CU(this,n)))}batch(){return Un(this._delegate),new bU(new mU(this._delegate,e=>eh(this._delegate,e)))}loadBundle(e){return function KJ(t,e){const n=Un(t=mt(t,nn)),r=new BJ;return function NJ(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?s2().encode(s):s,h=function(h,g){if(h instanceof Uint8Array)return NL(h,g);if(h instanceof ArrayBuffer)return NL(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new bJ(h,a);var h}(n,wg(e));t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){!function wJ(t,e,n){const r=pe(t);var i;(i=(0,Q.Z)(function*(s,a,u){try{const l=yield a.getMetadata();if(yield function(A,R){const x=pe(A),U=Kn(R.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",k=>x.Kr.getBundleMetadata(k,R.id)).then(k=>!!k&&k.createTime.compareTo(U)>=0)}(s.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(A=l).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);u._updateProgress(CL(l));const h=new tJ(l,s.localStore,a.serializer);let g=yield a.Ma();for(;g;){const v=yield h.ea(g);v&&u._updateProgress(v),g=yield a.Ma()}const m=yield h.complete();return yield Qs(s,m.ra,void 0),yield function(A,R){const x=pe(A);return x.persistence.runTransaction("Save bundle","readwrite",U=>x.Kr.saveBundleMetadata(U,R))}(s.localStore,l),u._completeWith(m.progress),Promise.resolve(m.na)}catch(l){return wi("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var A}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield VD(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function QJ(t,e){return function OJ(t,e){return t.asyncQueue.enqueue((0,Q.Z)(function*(){return function(r,i){const o=pe(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield Yd(t),e)}))}(Un(t=mt(t,nn)),e).then(n=>n?new xr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new di(this,n):null)}}class EI extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Og(new ds(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return po.forKey(n,this.firestore,null)}}class CU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new EI(e)}get(e){const n=wc(e);return this._delegate.get(n).then(r=>new kg(this._firestore,new Js(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=wc(e);return r?(YD("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=wc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=wc(e);return this._delegate.delete(n),this}}class bU{constructor(e){this._delegate=e}set(e,n,r){const i=wc(e);return r?(YD("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=wc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=wc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ec{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ng(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ec.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Ec(e,new EI(e),n),i.set(n,o)),o}}Ec.INSTANCES=new WeakMap;class po{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new EI(e)}static forPath(e,n,r){if(e.length%2!=0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new po(n,new gn(n._delegate,r,new _e(e)))}static forKey(e,n,r){return new po(n,new gn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new th(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new th(this.firestore,ZL(this._delegate,e))}catch(n){throw li(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,wt.m9)(e))instanceof gn&&KL(this._delegate,e)}set(e,n){n=YD("DocumentReference.set",n);try{return n?fU(this._delegate,e,n):fU(this._delegate,e)}catch(r){throw li(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?pU(this._delegate,e):pU(this._delegate,e,n,...r)}catch(i){throw li(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CX(t){return eh(mt(t.firestore,nn),[new Od(t._key,In.none())])}(this._delegate)}onSnapshot(...e){const n=TU(e),r=DU(e,i=>new kg(this.firestore,new Js(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gU(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function yX(t){t=mt(t,gn);const e=mt(t.firestore,nn),n=Un(e),r=new au(e);return function PJ(t,e){const n=new cr;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(o,s,a){try{const u=yield function(h,g){const m=pe(h);return m.persistence.runTransaction("read document","readonly",v=>m.localDocuments.getDocument(v,g))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ie(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Gd(u,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Yd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Js(e,r,t._key,i,new Ic(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function vX(t){t=mt(t,gn);const e=mt(t.firestore,nn);return LL(Un(e),t._key,{source:"server"}).then(n=>KD(e,t,n))}(this._delegate):function _X(t){t=mt(t,gn);const e=mt(t.firestore,nn);return LL(Un(e),t._key).then(n=>KD(e,t,n))}(this._delegate),n.then(r=>new kg(this.firestore,new Js(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new po(this.firestore,this._delegate.withConverter(e?Ec.getInstance(this.firestore,e):null))}}function li(t,e,n){return t.message=t.message.replace(e,n),t}function TU(t){for(const e of t)if("object"==typeof e&&!JD(e))return e;return{}}function DU(t,e){var n,r;let i;return i=JD(t[0])?t[0]:JD(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class kg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new po(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return hU(this._delegate,e._delegate)}}class Fg extends kg{data(e){const n=this._delegate.data(e);return this._delegate._converter||function OK(t,e){t||De()}(void 0!==n),n}}class di{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new EI(e)}where(e,n,r){try{return new di(this.firestore,ou(this._delegate,function sX(t,e,n){const r=e,i=gI("where",t);return xg._create(i,r,n)}(e,n,r)))}catch(i){throw li(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new di(this.firestore,ou(this._delegate,function aX(t,e="asc"){const n=e,r=gI("orderBy",t);return WD._create(r,n)}(e,n)))}catch(r){throw li(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new di(this.firestore,ou(this._delegate,function uX(t){return qL("limit",t),mI._create("limit",t,"F")}(e)))}catch(n){throw li(n,"limit()","Query.limit()")}}limitToLast(e){try{return new di(this.firestore,ou(this._delegate,function cX(t){return qL("limitToLast",t),mI._create("limitToLast",t,"L")}(e)))}catch(n){throw li(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new di(this.firestore,ou(this._delegate,function lX(...t){return _I._create("startAt",t,!0)}(...e)))}catch(n){throw li(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new di(this.firestore,ou(this._delegate,function dX(...t){return _I._create("startAfter",t,!1)}(...e)))}catch(n){throw li(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new di(this.firestore,ou(this._delegate,function hX(...t){return yI._create("endBefore",t,!1)}(...e)))}catch(n){throw li(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new di(this.firestore,ou(this._delegate,function fX(...t){return yI._create("endAt",t,!0)}(...e)))}catch(n){throw li(n,"endAt()","Query.endAt()")}}isEqual(e){return BD(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function EX(t){t=mt(t,xr);const e=mt(t.firestore,nn),n=Un(e),r=new au(e);return function MJ(t,e){const n=new cr;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(o,s,a){try{const u=yield Jv(o,s,!0),l=new DL(s,u.ls),h=l.ca(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=Gd(u,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Yd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new su(e,r,t,i))}(this._delegate):"server"===e?.source?function wX(t){t=mt(t,xr);const e=mt(t.firestore,nn),n=Un(e),r=new au(e);return UL(n,t._query,{source:"server"}).then(i=>new su(e,r,t,i))}(this._delegate):function IX(t){t=mt(t,xr);const e=mt(t.firestore,nn),n=Un(e),r=new au(e);return sU(t._query),UL(n,t._query).then(i=>new su(e,r,t,i))}(this._delegate),n.then(r=>new XD(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=TU(e),r=DU(e,i=>new XD(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gU(this._delegate,n,r)}withConverter(e){return new di(this.firestore,this._delegate.withConverter(e?Ec.getInstance(this.firestore,e):null))}}class ZX{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Fg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class XD{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new di(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Fg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new ZX(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Fg(this._firestore,r))})}isEqual(e){return hU(this._delegate,e._delegate)}}class th extends di{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new po(this.firestore,e):null}doc(e){try{return new po(this.firestore,void 0===e?cI(this._delegate):cI(this._delegate,e))}catch(n){throw li(n,"doc()","CollectionReference.doc()")}}add(e){return function bX(t,e){const n=mt(t.firestore,nn),r=cI(t),i=vI(t.converter,e);return eh(n,[hI(yc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,In.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new po(this.firestore,n))}isEqual(e){return KL(this._delegate,e._delegate)}withConverter(e){return new th(this.firestore,this._delegate.withConverter(e?Ec.getInstance(this.firestore,e):null))}}function wc(t){return mt(t,gn)}class eA{constructor(...e){this._delegate=new Ys(...e)}static documentId(){return new eA(fn.keyField().canonicalString())}isEqual(e){return(e=(0,wt.m9)(e))instanceof Ys&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function LX(){return new $D("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Cc(e)}static delete(){const e=function VX(){return new Sg("deleteField")}();return e._methodName="FieldValue.delete",new Cc(e)}static arrayUnion(...e){const n=function UX(...t){return new tX("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Cc(n)}static arrayRemove(...e){const n=function BX(...t){return new nX("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Cc(n)}static increment(e){const n=function jX(t){return new rX("increment",t)}(e);return n._methodName="FieldValue.increment",new Cc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KX={Firestore:wU,GeoPoint:lI,Timestamp:vn,Blob:Og,Transaction:CU,WriteBatch:bU,DocumentReference:po,DocumentSnapshot:kg,Query:di,QueryDocumentSnapshot:Fg,QuerySnapshot:XD,CollectionReference:th,FieldPath:eA,FieldValue:Cc,setLogLevel:function WX(t){!function NK(t){Ha.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function AU(t,e){return function JX(t,e=yO){return new Xe(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function tA(t,e){return AU(t,e).pipe(Ee(n=>({payload:n,type:"query"})))}!function YX(t){(function QX(t,e){t.INTERNAL.registerComponent(new YC.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},KX)))})(t,(e,n)=>new wU(e,n,new GX)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(Oa.Z);class SU{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=OU(r,n);return new MU(i,o,this.afs)}snapshotChanges(){return function XX(t,e){return AU(t,e).pipe(yy(void 0),QC(),Ee(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return this.snapshotChanges().pipe(Ee(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return w(this.ref.get(e)).pipe(Li)}}function wI(t,e){return tA(t,e).pipe(yy(void 0),QC(),Ee(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function RU(t,e,n){return wI(t,n).pipe(Iy((r,i)=>function eee(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function tee(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return nA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return nA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),He(),Ee(r=>r.map(i=>({type:i.type,payload:i}))))}function nA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function PU(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class MU{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=wI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(yy(void 0),QC(),So(([r,i])=>i.length>0||!r),Ee(([,r])=>r),Li)}auditTrail(e){return this.stateChanges(e).pipe(Iy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=PU(e);return RU(this.query,n,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return tA(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Li)}get(e){return w(this.query.get(e)).pipe(Li)}add(e){return this.ref.add(e)}doc(e){return new SU(this.ref.doc(e),this.afs)}}class nee{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?wI(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(n=>n.filter(r=>e.indexOf(r.type)>-1)),So(n=>n.length>0),Li):wI(this.query,this.afs.schedulers.outsideAngular).pipe(Li)}auditTrail(e){return this.stateChanges(e).pipe(Iy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=PU(e);return RU(this.query,n,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return tA(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Li)}get(e){return w(this.query.get(e)).pipe(Li)}}const xU=new me("angularfire2.enableFirestorePersistence"),NU=new me("angularfire2.firestore.persistenceSettings"),ree=new me("angularfire2.firestore.settings"),iee=new me("angularfire2.firestore.use-emulator");function OU(t,e=(n=>n)){return{query:e(t),ref:t}}let kU=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,h,g,m,v,A,R,x,U,k){this.schedulers=u;const B=SC(n,a,r),ee=h;g&&xO(B,a,m,A,R,x,v,U),[this.firestore,this.persistenceEnabled$]=wO(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{const fe=a.runOutsideAngular(()=>B.firestore());if(o&&fe.settings(o),ee&&fe.useEmulator(...ee),i&&!fy(s)){const Be=()=>{try{return w(fe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(Dt){return typeof console<"u"&&console.warn(Dt),P(!1)}};return[fe,a.runOutsideAngular(Be)]}return[fe,P(!1)]},[o,ee,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=OU(i,r),a=this.schedulers.ngZone.run(()=>o);return new MU(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new nee(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new SU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(he(By),he(jy,8),he(xU,8),he(ree,8),he(Wo),he(Mt),he(hp),he(NU,8),he(iee,8),he(fp,8),he(DO,8),he(AO,8),he(SO,8),he(RO,8),he(PO,8),he(MO,8),he(Uy,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),oee=(()=>{class t{constructor(){Oa.Z.registerVersion("angularfire",zu.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:xU,useValue:!0},{provide:NU,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nn({type:t});static \u0275inj=Yn({providers:[kU]})}return t})(),Vg=(()=>{class t{constructor(n,r,i){this.db=n,this.authServ=r,this.localStorage=i,this.dbPathUsers="/users",this.dbPathDocs="/docs",this.usersRef=n.collection(this.dbPathUsers),this.listaUsuarios$=this.usersRef.valueChanges(),this.docsRef=n.collection(this.dbPathDocs)}getAllDocs(){return this.docsRef.valueChanges()}getDocById(n){return this.docsRef.doc(n).valueChanges()}addDoc(n){var r=this;return(0,Q.Z)(function*(){try{yield r.docsRef.add(n),console.log("Documento agregado con \xe9xito")}catch(i){console.error("Error al agregar documento:",i)}})()}updateDoc(n,r){var i=this;return(0,Q.Z)(function*(){try{yield i.docsRef.doc(n).update(r),console.log("Documento actualizado con \xe9xito")}catch(o){console.error("Error al actualizar documento:",o)}})()}deleteDoc(n){var r=this;return(0,Q.Z)(function*(){try{yield r.docsRef.doc(n).delete(),console.log("Documento eliminado con \xe9xito")}catch(i){console.error("Error al eliminar documento:",i)}})()}getDatosUser(n){return this.usersRef.doc(n).valueChanges({idField:"usuarioID"})}getAllUsers(){return this.listaUsuarios$}getUserByID(n){return this.usersRef.doc(n).snapshotChanges()}addUser(n){var r=this;return(0,Q.Z)(function*(){try{const i=yield r.authServ.ObtenerUid();if(i)r.usersRef.doc(String(i)).set({...n,usuarioID:i});else{let o=yield r.usersRef.add({...n});n.usuarioID=o.id}console.log("Usuario agregado con \xe9xito")}catch(i){console.error("Error al agregar usuario:",i)}})()}updateUser(n,r){var i=this;return(0,Q.Z)(function*(){try{yield i.usersRef.doc(n).update(r),console.log("Usuario actualizado con \xe9xito")}catch(o){console.error("Error al actualizar usuario:",o)}})()}deleteUser(n){var r=this;return(0,Q.Z)(function*(){try{yield r.usersRef.doc(n).delete(),console.log("Usuario eliminado con \xe9xito")}catch(i){console.error("Error al eliminar usuario:",i)}})()}static#e=this.\u0275fac=function(r){return new(r||t)(he(kU),he(ud),he(ka))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function see(t,e){1&t&&(y(0,"ul",6)(1,"li",7)(2,"a",8),T(3,"Productos"),E(),y(4,"div",9)(5,"ul")(6,"li")(7,"a",10),T(8,"Ahorros"),E()(),y(9,"li")(10,"a",11),T(11,"Cr\xe9ditos"),E()()()()(),y(12,"li")(13,"a",12),T(14,"Cont\xe1ctanos"),E()(),y(15,"li")(16,"a",13),T(17,"Ub\xedcanos"),E()()())}let aee=(()=>{class t{constructor(n,r,i,o){this.localStorage=n,this.uS=r,this.authServ=i,this.sharedService=o,this.isBottomVisible=!0,this.bloked=!1,this.initializeUserData()}initializeUserData(){this.authServ.stateUser().subscribe(n=>{n?(console.log("loggeado",n),this.uS.getDatosUser(n.uid).subscribe(r=>(console.log("Datos del usuario:",r),this.localStorage.saveDataToLocalStorage("dataUser",r),this.dataUser=this.localStorage.loadDataFromLocalStorage("dataUser")))):console.log("no loggeado")})}toggleBottomVisibility(){this.isBottomVisible=!this.isBottomVisible}blockBottomVisibility(){this.bloked=!this.bloked,this.sharedService.toggleNavbarBlockedStatus(this.bloked)}logout(){this.localStorage.removeDataFromLocalStorage("dataUser"),this.authServ.Logout()}static#e=this.\u0275fac=function(r){return new(r||t)(G(ka),G(Vg),G(ud),G(KC))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-navbar"]],decls:9,vars:7,consts:[[1,"navbar"],[1,"top"],[3,"click"],[1,"btn","btnUser",3,"click"],[1,"fa-solid","fa-user-tie","user"],["class","bottom",4,"ngIf"],[1,"bottom"],[1,"dropdown"],["href","#",1,"productos","escalar"],[1,"dropdown-content"],["href","#",1,"ahorros","escalar"],["href","#",1,"creditos","escalar"],["href","#",1,"contacto","escalar"],["href","#","routerLink","/ubicanos",1,"ubicanos","escalar"]],template:function(r,i){1&r&&(y(0,"nav",0)(1,"div",1)(2,"i",2),Le("click",function(){return i.toggleBottomVisibility()}),E(),y(3,"i",2),Le("click",function(){return i.blockBottomVisibility()}),E(),y(4,"p"),T(5),E(),y(6,"button",3),Le("click",function(){return i.logout()}),J(7,"i",4),E()(),We(8,see,18,0,"ul",5),E()),2&r&&(ce(2),Bw(i.isBottomVisible?"fa-solid fa-angles-up escalar":"fa-solid fa-angles-down escalar"),ce(1),Bw(i.bloked?"fas fa-lock escalar":"fas fa-lock-open escalar"),ce(2),B_("bienvenido ",null==i.dataUser?null:i.dataUser.nombre," ",null==i.dataUser?null:i.dataUser.apellido,""),ce(3),de("ngIf",i.isBottomVisible))},dependencies:[Do,ho],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;text-shadow:2px 2px 4px rgba(0,0,0,.5);transition:background-color .5s ease-in-out,color .5s ease-in-out,transform .3s ease-in-out;font-size:2.5vh;align-items:center;justify-content:center;text-align:center;list-style:none;text-decoration:none}body[_ngcontent-%COMP%]{letter-spacing:1px}.containerInicio[_ngcontent-%COMP%]{background:#f5f5f5}.logo[_ngcontent-%COMP%]{height:7vh}.navbar[_ngcontent-%COMP%]{color:#fff;width:100%;height:100%;box-shadow:0 2px 5px #0000001a;background:linear-gradient(to right,#0a1e3f,#086788,#07a0c3);display:flex;flex-direction:column}.top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:95%;padding:1vh}.btn[_ngcontent-%COMP%]{padding:1vh;border:1px solid black;border-radius:1vh;font-weight:700;cursor:pointer}.btnUser[_ngcontent-%COMP%]{border-radius:50%;transition:background-color .1s ease-in-out,color .1s ease-in-out,transform .1s ease-in-out;font-size:.1vh}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff;transform:scale(1.3);padding:1.5vh}.bottom[_ngcontent-%COMP%]{display:flex;margin:0;padding:0;background:rgb(45,172,45);width:100%;justify-content:space-around;z-index:2}li[_ngcontent-%COMP%]{margin:1vh;padding:1vh;border-radius:5px}.escalar[_ngcontent-%COMP%]{display:flex}.escalar[_ngcontent-%COMP%]:hover{transform:scale(1.5)}a[_ngcontent-%COMP%]{color:#e3d1a3}a[_ngcontent-%COMP%]:hover{color:#000}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background:rgb(45,172,45);box-shadow:0 8px 16px #0003;border-radius:1vh;transform:translate(-50%);top:100%;left:50%;z-index:2}.dropdown-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:1vh 3vh}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.5}"]})}return t})();function uee(t,e){1&t&&J(0,"app-navbar",7)}function cee(t,e){if(1&t&&(y(0,"div",2),J(1,"app-sidebar",3),y(2,"div",4),We(3,uee,1,0,"app-navbar",5),J(4,"router-outlet",6),E()()),2&t){const n=dt();V_("grid-template-columns",n.contentGridColumns),ce(3),de("ngIf",n.showNavbar)}}function lee(t,e){1&t&&J(0,"app-spinner")}let dee=(()=>{class t{constructor(n){this.sharedService=n,this.loading=!1,this.contentGridColumns="20vw 0fr 1fr",this.showNavbar=!0,this.sharedService.sidebarWidth$.subscribe(r=>{this.contentGridColumns="auto"===r?"4.5vw  1fr":"20vw 1fr",this.showNavbar=0!=this.nav||!this.showNavbar}),this.sharedService.isNavbarBlocked$.subscribe(r=>{this.nav=0!=r})}static#e=this.\u0275fac=function(r){return new(r||t)(G(KC))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[["class","content",3,"gridTemplateColumns",4,"ngIf"],[4,"ngIf"],[1,"content"],[1,"sidebar"],[1,"container"],["class","navbar",4,"ngIf"],[1,"router"],[1,"navbar"]],template:function(r,i){1&r&&(We(0,cee,5,3,"div",0),We(1,lee,1,0,"app-spinner",1)),2&r&&(de("ngIf",!i.loading),ce(1),de("ngIf",i.loading))},dependencies:[Do,Py,Ju,DZ,aee],styles:[".content[_ngcontent-%COMP%]{display:grid}.container[_ngcontent-%COMP%]{display:grid;grid-template:auto 0 1fr/ 20 80vw}.router[_ngcontent-%COMP%]{margin-top:3vh}"]})}return t})();const hee=["imageCounter"],fee=["cImg"],pee=["#imageSelector"];function gee(t,e){if(1&t){const n=Eo();O_(0),y(1,"div",11),Le("click",function(){const o=Zt(n).index;return Ut(dt().seleccionarImagen(o))}),E(),k_()}if(2&t){const n=e.index,r=dt();ce(1),V_("background-color",n===r.currentIndex?"red":"#888")}}let mee=(()=>{class t{constructor(){this.imagesData=[{url:"https://i.imgur.com/ODHzBFk.png",link:"https://018100991k.github.io/horario/"},{url:"https://i.imgur.com/F7K5CPh.png",link:"https://018100991k.github.io/horario/"},{url:"https://i.imgur.com/B56uXg9.png",link:"file:///D:/Trabajos/reac/horario/index.html3"},{url:"https://i.imgur.com/xz4Gtk1.jpg",link:"file:///D:/Trabajos/reac/horario/index.html4"},{url:"https://i.imgur.com/0NGwYtS.png",link:"file:///D:/Trabajos/reac/horario/index.html"},{url:"https://i.imgur.com/JoER25Z.png",link:"file:///D:/Trabajos/reac/horario/index.html"}],this.currentIndex=0}rotarImagen(n){this.currentIndex=(this.currentIndex+n+this.imagesData.length)%this.imagesData.length,this.actualizarImagen()}abrirEnlace(){window.location.href=this.imagesData[this.currentIndex].link}actualizarImagen(){const[n,r,i]=this.cImg.nativeElement.querySelectorAll("img");n.src=this.imagesData[(this.currentIndex-1+this.imagesData.length)%this.imagesData.length].url,r.src=this.imagesData[this.currentIndex].url,i.src=this.imagesData[(this.currentIndex+1)%this.imagesData.length].url,this.cImg.nativeElement.querySelectorAll(".side-images, .selected-image").forEach((s,a)=>{s.style.opacity=1===a?"1":"0.6",s.style.transform=1===a?"scale(1.5)":"scale(1)"}),this.actualizarSelectorImagenes(),this.actualizarContadorImagenes()}actualizarSelectorImagenes(){const n=this.imageSelector.nativeElement;n.innerHTML="",this.imagesData.forEach((i,o)=>{const s=document.createElement("div");s.classList.add("image-dot"),s.addEventListener("click",()=>this.seleccionarImagen(o)),n.appendChild(s)});const r=n.children[this.currentIndex];r&&(r.style.backgroundColor="red")}actualizarContadorImagenes(){this.imageCounter.nativeElement.textContent=`${this.currentIndex+1}/${this.imagesData.length}`}seleccionarImagen(n){this.currentIndex=n,this.actualizarImagen()}pausarRotacion(){clearInterval(this.autoRotateInterval)}reanudarRotacion(){this.autoRotateInterval=setInterval(()=>this.rotarImagen(1),5e3)}escalarImagen(){this.cImg.nativeElement.querySelector(".selected-image").style.transform="scale(2)"}restaurarEscala(){this.cImg.nativeElement.querySelector(".selected-image").style.transform="scale(1.5)"}cambiarImagenPorContador(n){if("Enter"===n.key){const r=this.imageCounter.nativeElement.textContent.trim(),i=parseInt(r,10);!isNaN(i)&&i>=1&&i<=this.imagesData.length?(this.currentIndex=i-1,this.actualizarImagen()):alert("Ingrese un n\xfamero v\xe1lido de imagen"),this.imageCounter.nativeElement.blur()}}ngAfterViewInit(){this.actualizarImagen(),this.autoRotateInterval=setInterval(()=>this.rotarImagen(1),5e3)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-ucarrusel-img"]],viewQuery:function(r,i){if(1&r&&(W_(hee,5),W_(fee,5),W_(pee,5)),2&r){let o;Uf(o=Bf())&&(i.imageCounter=o.first),Uf(o=Bf())&&(i.cImg=o.first),Uf(o=Bf())&&(i.imageSelector=o.first)}},decls:11,vars:1,consts:[[1,"container"],["contenteditable","true",1,"image-counter",3,"keydown"],["imageCounter",""],[1,"c-img",3,"mouseover","mouseout"],["cImg",""],[1,"side-images","left-image",3,"click"],[1,"selected-image",3,"click","mouseover","mouseout"],[1,"side-images","right-image",3,"click"],[1,"image-selector"],["imageSelector",""],[4,"ngFor","ngForOf"],[1,"image-dot",3,"click"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1,2),Le("keydown",function(s){return i.cambiarImagenPorContador(s)}),E(),y(3,"div",3,4),Le("mouseover",function(){return i.pausarRotacion()})("mouseout",function(){return i.reanudarRotacion()}),y(5,"img",5),Le("click",function(){return i.rotarImagen(-1)}),E(),y(6,"img",6),Le("click",function(){return i.abrirEnlace()})("mouseover",function(){return i.escalarImagen()})("mouseout",function(){return i.restaurarEscala()}),E(),y(7,"img",7),Le("click",function(){return i.rotarImagen(1)}),E()(),y(8,"div",8,9),We(10,gee,2,2,"ng-container",10),E()()),2&r&&(ce(10),de("ngForOf",i.imagesData))},dependencies:[Uu],styles:["*[_ngcontent-%COMP%]{border:0;margin:0;border-radius:5vh;object-fit:contain;font-size:5vh;text-align:center;font-weight:700}body[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:60vh;width:70vw}.image-counter[_ngcontent-%COMP%]{outline:none;z-index:2}.c-img[_ngcontent-%COMP%]{display:flex;align-items:center;height:60%;cursor:pointer;margin:10vh 0;position:relative}.side-images[_ngcontent-%COMP%]{opacity:.6;width:50vh;height:30vh;transition:transform .4s cubic-bezier(.165,.84,.44,1);position:absolute;top:0}.selected-image[_ngcontent-%COMP%]{height:30vh;width:50vh;z-index:1;transition:transform .4s cubic-bezier(.165,.84,.44,1);background-color:#fff}.left-image[_ngcontent-%COMP%]{left:-40vh}.right-image[_ngcontent-%COMP%]{right:-40vh}.image-selector[_ngcontent-%COMP%]{display:flex}.image-dot[_ngcontent-%COMP%]{width:2.5vh;height:2.5vh;border-radius:50%;background-color:#888;margin:0 .5vh;z-index:2;opacity:.6}"]})}return t})(),_ee=(()=>{class t{constructor(n,r,i,o){this.router=n,this.localStorage=r,this.authServ=i,this.uS=o}logout(){this.localStorage.removeDataFromLocalStorage("dataUser"),this.authServ.Logout()}static#e=this.\u0275fac=function(r){return new(r||t)(G(Xn),G(ka),G(ud),G(Vg))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-dashboard-partner"]],decls:5,vars:0,consts:[[1,"logout",3,"click"]],template:function(r,i){1&r&&(y(0,"p"),T(1,"dashboard-partner works!"),E(),J(2,"app-ucarrusel-img"),y(3,"button",0),Le("click",function(){return i.logout()}),T(4,"cerrar sesion"),E())},dependencies:[mee]})}return t})();const FU=["Abogado","Actor/Actriz","Agricultor/a","Arque\xf3logo/a","Arquitecto","Artista Visual","Asesor/a Financiero/a","Asistente Administrativo","Bi\xf3logo/a","Carpintero","Chef","Contador","Dentista","Dise\xf1ador/a de Moda","Dise\xf1ador Gr\xe1fico","Economista","Editor/a","Educador/a Social","Electricista","Enfermero/a","Escritor/a","Farmac\xe9utico/a","Fot\xf3grafo/a","Ge\xf3logo/a","Ingeniero/a Agr\xf3nomo/a","Ingeniero/a Civil","Ingeniero/a de Sistemas","Ingeniero/a Ambiental","Juez/a","M\xe9dico/a General","M\xe9dico/a Especialista","Meteor\xf3logo/a","Nutricionista","Periodista","Piloto/a","Programador/a Frontend","Programador/a Backend","Psic\xf3logo/a Cl\xednico","Psic\xf3logo/a Organizacional","Qu\xedmico/a","Secretario/a Ejecutivo/a","Soci\xf3logo/a","T\xe9cnico/a de Laboratorio","Terapeuta Ocupacional","Traductor/a de Idiomas","Veterinario/a","Vendedor/a de Bienes Ra\xedces","Vendedor/a de Tecnolog\xeda","Zo\xf3logo/a","Otro"],VU=["Afgana","Afgano","Alemana","Alem\xe1n","Americana","\xc1rabe","Argentina","Australiana","Australiano","Austriaca","Austriaco","Belga","Boliviana","Boliviano","Brasile\xf1a","Brasile\xf1o","Camboyana","Camboyano","Canadiense","Chilena","Chileno","China","Chino","Colombiana","Colombiano","Coreana","Coreano","Costarricense","Costarricense","Cubana","Cubano","Dan\xe9s","Danesa","Ecuatoriana","Ecuatoriano","Egipcia","Egipcio","Eslovaca","Eslovaco","Espa\xf1ola","Espa\xf1ol","Estonia","Estonio","Et\xedope","Etiope","Filipina","Filipino","Finlandesa","Finland\xe9s","Francesa","Franc\xe9s","Galesa","Gal\xe9s","Griega","Griego","Guatemalteca","Guatemalteco","Haitiana","Haitiano","Holandesa","Holand\xe9s","Hondure\xf1a","Hondure\xf1o","Indonesia","Indonesa","Inglesa","Ingl\xe9s","Iraq\xed","Iraqu\xed","Iran\xed","Iran\xed","Irlandesa","Irland\xe9s","Israel\xed","Israel\xed","Italiana","Italiano","Japonesa","Japon\xe9s","Jordana","Jordano","Laosiana","Laosiano","Letona","Let\xf3n","Lituana","Lituano","Malaya","Malayo","Marroqu\xed","Marroqu\xed","Mexicana","Mexicano","Nicarag\xfcense","Nicarag\xfcense","Noruega","Noruego","Neozelandesa","Neozeland\xe9s","Paname\xf1a","Paname\xf1o","Paraguaya","Paraguayo","Peruana","Peruano","Polaca","Polaco","Portuguesa","Portugu\xe9s","Puertorrique\xf1a","Puertorrique\xf1o","Rumana","Rumano","Rusa","Ruso","Sueca","Sueco","Suiza","Suizo","Tailandesa","Tailand\xe9s","Taiwanesa","Taiwan\xe9s","Turca","Turco","Ucraniana","Ucraniano","Uruguaya","Uruguayo","Venezolana","Venezolano","Vietnamita","Vietnamita"].sort();function yee(t,e){1&t&&J(0,"option",78),2&t&&de("value",e.$implicit)}function vee(t,e){1&t&&J(0,"option",78),2&t&&de("value",e.$implicit)}function Iee(t,e){if(1&t&&(y(0,"option",78),T(1),E()),2&t){const n=e.$implicit;de("value",n),ce(1),ao(" ",n," ")}}function Eee(t,e){if(1&t&&(y(0,"div",79),T(1),E()),2&t){const n=dt(2);ce(1),ao(" ",n.getErrorMessage("email")," ")}}function wee(t,e){if(1&t&&(y(0,"option",78),T(1),E()),2&t){const n=e.$implicit;de("value",n),ce(1),ao(" ",n," ")}}function Cee(t,e){1&t&&(y(0,"div",80),T(1," Rellene todos los campos correctamente. "),E())}function bee(t,e){if(1&t){const n=Eo();y(0,"div",2)(1,"div",3),T(2,"registro de datos"),E(),y(3,"form",4),Le("ngSubmit",function(){return Zt(n),Ut(dt().AgregarUsuario())}),y(4,"div",5)(5,"div",6),J(6,"input",7),y(7,"label",8),T(8,"Usuario ID"),E()(),y(9,"div",6),J(10,"input",9),y(11,"label",10),T(12,"nombre"),E()(),y(13,"div",6),J(14,"input",11),y(15,"label",12),T(16,"Apellido"),E()(),y(17,"div",6),J(18,"input",13),y(19,"label",14),T(20,"Fecha de Nacimiento"),E()(),y(21,"div",6)(22,"select",15)(23,"option",16),T(24,"dni"),E(),y(25,"option",17),T(26,"ruc"),E(),y(27,"option",18),T(28,"carnet de extranjeria"),E(),y(29,"option",19),T(30,"pasaporte"),E(),y(31,"option",20),T(32,"libreta electoral"),E()(),y(33,"label",21),T(34,"Tipo de Documento de Identidad"),E()(),y(35,"div",6),J(36,"input",22),y(37,"label",23),T(38,"# de documento de Identidad"),E()(),y(39,"div",6),J(40,"input",24),y(41,"label",25),T(42,"Nacionalidad"),E(),y(43,"datalist",26),We(44,yee,1,1,"option",27),E()(),y(45,"div",6),J(46,"input",28),y(47,"label",29),T(48,"ocupacion"),E(),y(49,"datalist",30),We(50,vee,1,1,"option",27),E()(),y(51,"div",6),J(52,"input",31),y(53,"label",32),T(54,"Tel\xe9fono"),E()()(),y(55,"div",5)(56,"div",6)(57,"select",33),We(58,Iee,2,2,"option",27),E(),y(59,"label",34),T(60,"Estado de Socio"),E()(),y(61,"div",6)(62,"select",35)(63,"option",36),T(64,"Masculino"),E(),y(65,"option",37),T(66,"Femenino"),E()(),y(67,"label",38),T(68,"G\xe9nero"),E()(),y(69,"div",6),J(70,"input",39),y(71,"label",40),T(72,"Direcci\xf3n"),E()(),y(73,"div",6),J(74,"input",41),y(75,"label",42),T(76,"Correo Electr\xf3nico"),E(),We(77,Eee,2,1,"div",43),E(),y(78,"div",6),J(79,"input",44,45),y(81,"label",46),T(82,"Contrase\xf1a"),E(),y(83,"img",47),Le("click",function(){Zt(n);const i=N_(80);return Ut(dt().TogglePasswordVisibility(i))}),E()(),y(84,"div",6)(85,"select",48)(86,"option",49),T(87,"Soltero"),E(),y(88,"option",50),T(89,"Casado"),E()(),y(90,"label",51),T(91,"Estado Civil"),E()(),y(92,"div",6)(93,"select",52),We(94,wee,2,2,"option",27),E(),y(95,"label",53),T(96,"Educaci\xf3n"),E()(),y(97,"div",6),J(98,"input",54),y(99,"label",55),T(100,"N\xfamero de Dependientes"),E()()(),y(101,"div",5)(102,"div",6),J(103,"input",56),y(104,"label",57),T(105,"N\xfamero de Hijos"),E()(),y(106,"div",6)(107,"select",58)(108,"option",59),T(109,"Ninguna"),E(),y(110,"option",60),T(111,"Visual"),E(),y(112,"option",61),T(113,"Auditiva"),E(),y(114,"option",62),T(115,"F\xedsica"),E(),y(116,"option",63),T(117,"Intelectual"),E(),y(118,"option",64),T(119,"Otra"),E()(),y(120,"label",65),T(121,"Discapacidad"),E()(),y(122,"p",66),T(123,"en caso de emergencias"),E(),y(124,"div",6),J(125,"input",67),y(126,"label",68),T(127,"Nombre de Contacto de Emergencia"),E()(),y(128,"div",6),J(129,"input",69),y(130,"label",70),T(131,"Tel\xe9fono de Contacto de Emergencia"),E()(),y(132,"div",6),J(133,"input",71),y(134,"label",72),T(135,"Fecha de Registro"),E()(),y(136,"div",6),J(137,"input",73),y(138,"label",74),T(139,"Fecha de Modificaci\xf3n"),E()()(),y(140,"div",75),We(141,Cee,2,0,"div",76),y(142,"button",77),T(143,"Aceptar"),E()()()()}if(2&t){const n=dt();let r;ce(3),de("formGroup",n.agregarUsuario),ce(15),de("min",n.calcularFechaMinima())("max",n.calcularFechaMaxima()),ce(26),de("ngForOf",n.nacionalidades),ce(6),de("ngForOf",n.listaOcupaciones),ce(8),de("ngForOf",n.estadosSocio),ce(19),de("ngIf",(null==(r=n.agregarUsuario.get("email"))?null:r.invalid)&&(null==(r=n.agregarUsuario.get("email"))?null:r.dirty)),ce(17),de("ngForOf",n.nivelesEducacion),ce(4),de("min",0),ce(5),de("min",0),ce(38),de("ngIf",!n.agregarUsuario.valid),ce(1),de("disabled",!n.agregarUsuario.valid)}}function Tee(t,e){1&t&&J(0,"app-spinner")}let Dee=(()=>{class t{constructor(n,r,i,o,s,a,u){this.fb=n,this.router=r,this.fireError=i,this.errorMessageService=o,this.datosForm=s,this.userService=a,this.localStorage=u,this.mostrarPassword=!1,this.loading=!1,this.listaOcupaciones=FU,this.nacionalidades=VU,this.estadosSocio=["Activo","Inactivo","Pendiente"],this.nivelesEducacion=["Primaria","Secundaria","Universitaria","Postgrado"],this.dataUser=this.localStorage.loadDataFromLocalStorage("dataUser"),this.agregarUsuario=this.fb.group({usuarioID:[this.generarUsuarioID()],nombre:[null,Oe.required],apellido:[null,Oe.required],fechaNacimiento:[null,[Oe.required,this.validarEdad]],tipoDocumentoIdentidad:[null,Oe.required],documentoIdentidad:[null,Oe.required],nacionalidad:[null,Oe.required],telefono:[null,Oe.required],ocupacion:[null,Oe.required],estadoSocio:["Pendiente",Oe.required],genero:[null,Oe.required],direccion:[null,Oe.required],email:[this.dataUser.email,[Oe.required,Oe.email]],password:[this.dataUser.password,[Oe.required,Oe.minLength(6)]],estadoCivil:[null,Oe.required],educacion:[null,Oe.required],numeroDependientes:[0,[Oe.required,Oe.min(0)]],numeroHijos:[0,[Oe.required,Oe.min(0)]],discapacidad:[null,Oe.required],nombreContactoEmergencia:[null,Oe.required],telefonoContactoEmergencia:[null,Oe.required],fechaRegistro:[this.obtenerFechaActual()],fechaModificacion:[this.obtenerFechaActual()]})}obtenerFechaActual(){const n=new Date;return new Intl.DateTimeFormat("es",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"America/Lima"}).format(n)}generarUsuarioID(){const n=new Date;return`SOC\\${n.getDate().toString().padStart(2,"0")}\\${(n.getMonth()+1).toString().padStart(2,"0")}\\${n.getFullYear().toString()}-${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}`}TogglePasswordVisibility(n){this.datosForm.TogglePasswordVisibility(n)}getErrorMessage(n){return this.errorMessageService.getErrorMessage(n,this.agregarUsuario)}validarEdad(n){const r=new Date(n.value),o=(new Date).getFullYear()-r.getFullYear();return o<18||o>100?{edadInvalida:!0}:null}calcularFechaMinima(){const n=new Date;return n.setFullYear(n.getFullYear()-100),n.toISOString().split("T")[0]}calcularFechaMaxima(){const n=new Date;return n.setFullYear(n.getFullYear()-18),n.toISOString().split("T")[0]}AgregarUsuario(){var n=this;return(0,Q.Z)(function*(){n.dataUser=n.agregarUsuario.value,yield n.userService.addUser(n.agregarUsuario.value),n.localStorage.saveDataToLocalStorage("dataUser",JSON.stringify(n.dataUser)),alert("Usuario agregado correctamente."),n.router.navigate(["/login"])})()}static#e=this.\u0275fac=function(r){return new(r||t)(G(bp),G(Xn),G(pp),G(WC),G(ZC),G(Vg),G(ka))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-agregar-usuario"]],decls:2,vars:2,consts:[["class","wrapper",4,"ngIf"],[4,"ngIf"],[1,"wrapper"],[1,"login"],[1,"columns",3,"formGroup","ngSubmit"],[1,"column"],[1,"input-container"],["placeholder","","type","string","id","usuarioID","formControlName","usuarioID","readonly","",1,"input-field"],["for","usuarioID",1,"placeholder"],["placeholder","","type","text","id","nombre","formControlName","nombre","required","",1,"input-field"],["for","nombre",1,"placeholder"],["placeholder","","type","text","id","apellido","formControlName","apellido","required","",1,"input-field"],["for","apellido",1,"placeholder"],["placeholder","","type","date","id","fechaNacimiento","formControlName","fechaNacimiento","required","",1,"input-field",3,"min","max"],["for","fechaNacimiento",1,"placeholder"],["id","tipoDocumentoIdentidad","formControlName","tipoDocumentoIdentidad","required","",1,"input-field"],["value","dni"],["value","ruc"],["value","carnet de extranjeria"],["value","pasaporte"],["value","libreta electoral"],["for","tipoDocumentoIdentidad",1,"placeholder"],["placeholder","","type","text","id","documentoIdentidad","formControlName","documentoIdentidad","required","",1,"input-field"],["for","documentoIdentidad",1,"placeholder"],["placeholder","","list","nacionalidadesList","type","text","id","nacionalidad","formControlName","nacionalidad","required","",1,"input-field"],["for","nacionalidad",1,"placeholder"],["id","nacionalidadesList"],[3,"value",4,"ngFor","ngForOf"],["placeholder","","list","ocupacionesList","type","text","id","ocupacion","formControlName","ocupacion","required","",1,"input-field"],["for","ocupacion",1,"placeholder"],["id","ocupacionesList"],["placeholder","","type","tel","id","telefono","formControlName","telefono","required","",1,"input-field"],["for","telefono",1,"placeholder"],["id","estadoSocio","formControlName","estadoSocio","readonly","",1,"input-field"],["for","estadoSocio",1,"placeholder"],["id","genero","formControlName","genero","required","",1,"input-field"],["value","masculino"],["value","femenino"],["for","genero",1,"placeholder"],["type","text","id","direccion","name","direccion","placeholder","","formControlName","direccion","required","",1,"input-field"],["for","direccion",1,"placeholder"],["type","email","id","email","name","email","placeholder","","autocomplete","off","formControlName","email","readonly","",1,"input-field"],["for","email",1,"placeholder"],["class","error-General",4,"ngIf"],["type","password","id","password","name","password","placeholder","","formControlName","password","readonly","",1,"input-field"],["passwordInput",""],["for","password",1,"placeholder"],["src","../../../assets/img/mostrar.png","id","togglePassword","alt","Mostrar contrase\xf1a",1,"mostrarOcultar",3,"click"],["id","estadoCivil","formControlName","estadoCivil","required","",1,"input-field"],["value","soltero"],["value","casado"],["for","estadoCivil",1,"placeholder"],["id","educacion","formControlName","educacion","required","",1,"input-field"],["for","educacion",1,"placeholder"],["placeholder","","type","number","id","numeroDependientes","formControlName","numeroDependientes","required","",1,"input-field",3,"min"],["for","numeroDependientes",1,"placeholder"],["placeholder","","type","number","id","numeroHijos","formControlName","numeroHijos","required","",1,"input-field",3,"min"],["for","numeroHijos",1,"placeholder"],["id","discapacidad","formControlName","discapacidad","required","",1,"input-field"],["value","ninguna"],["value","visual"],["value","auditiva"],["value","f\xedsica"],["value","intelectual"],["value","otra"],["for","discapacidad",1,"placeholder"],[1,"title"],["placeholder","","type","text","id","nombreContactoEmergencia","formControlName","nombreContactoEmergencia","required","",1,"input-field"],["for","nombreContactoEmergencia",1,"placeholder"],["placeholder","","type","tel","id","telefonoContactoEmergencia","formControlName","telefonoContactoEmergencia","required","",1,"input-field"],["for","telefonoContactoEmergencia",1,"placeholder"],["placeholder","","type","datetime","id","fechaRegistro","formControlName","fechaRegistro","readonly","",1,"input-field"],["for","fechaRegistro",1,"placeholder"],["placeholder","","type","datetime","id","fechaModificacion","formControlName","fechaModificacion","readonly","",1,"input-field"],["for","fechaModificacion",1,"placeholder"],[1,"button-container"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[3,"value"],[1,"error-General"],[1,"error-message"]],template:function(r,i){1&r&&(We(0,bee,144,12,"div",0),We(1,Tee,1,0,"app-spinner",1)),2&r&&(de("ngIf",!i.loading),ce(1),de("ngIf",i.loading))},dependencies:[Uu,Do,hd,Jy,Xy,$s,Ep,wp,Zu,cd,Ba,Cp,Ua,Qu,Ju],styles:[".wrapper[_ngcontent-%COMP%]{background:#f5f5f5;height:100vh;align-items:center;justify-content:center;padding:0 4vh}.title[_ngcontent-%COMP%]{justify-content:center;align-content:center;text-align:center;font-size:5vh;background:rgb(245,108,108);margin:3vh 0}.columns[_ngcontent-%COMP%]{display:grid;grid-template:repeat(1,1fr) / repeat(3,1fr);gap:.5vh 3vh;grid-auto-flow:row}.login[_ngcontent-%COMP%]{font-size:10vh;text-align:center;padding:2vh 0 4vh}.imgContrasena[_ngcontent-%COMP%]{width:20vh;height:auto;cursor:pointer}.input-container[_ngcontent-%COMP%]{position:relative;margin-bottom:3vh;display:flex;flex-flow:column wrap}.input-field[_ngcontent-%COMP%]{width:100%;padding:1vh;border:1px solid #ccc;border-radius:4px;text-transform:none}.input-field[readonly][_ngcontent-%COMP%]{background:#f0f0f0;color:#333;-webkit-user-select:none;user-select:none;border:none;outline:none;border-radius:4px;pointer-events:none;cursor:default}.placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:1vw;transform:translateY(-50%);pointer-events:none;transition:.3s;font-size:2vh;color:#999;z-index:1}.input-field[_ngcontent-%COMP%]:focus + .placeholder[_ngcontent-%COMP%]:active, .input-field[_ngcontent-%COMP%]:not(:placeholder-shown) + .placeholder[_ngcontent-%COMP%]{top:1vh;font-size:3vh;color:#666;transform:translateY(-100%) scale(.8);padding:0 1vh;background-color:#fff;opacity:.5}.input-field[_ngcontent-%COMP%]:invalid + .placeholder[_ngcontent-%COMP%]{color:#410a0a}.input-field[_ngcontent-%COMP%]:invalid:focus + .placeholder[_ngcontent-%COMP%]{color:red}.error-General[_ngcontent-%COMP%]{position:absolute;top:0;left:110%;margin-top:5vh;font-size:2vh;color:red;margin-top:1vh;width:100%;text-align:left;text-shadow:0 0 5px rgba(0,123,255,.5)}.error-message[_ngcontent-%COMP%]{color:red;margin:0 0 2vh;width:100%;text-align:center;text-shadow:0 0 5px rgba(0,123,255,.5)}.mostrarOcultar[_ngcontent-%COMP%]{position:absolute;top:15%;right:1vh;cursor:pointer;width:4vh;transform:translateY(-20%);transition:transform .3s,box-shadow .3s}.mostrarOcultar[_ngcontent-%COMP%]:hover{transform:scale(1.2)}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.button-container[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center;align-items:center;grid-area:2/1/2/4}button[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#65a0df,#2d6bae);color:#fff;padding:1vh;border:none;border-radius:.5vh;cursor:pointer;transition:transform .3s,box-shadow .3s}button[_ngcontent-%COMP%]:focus{background-color:#007bff;outline:none;box-shadow:0 0 5px #007bff80}button[_ngcontent-%COMP%]:hover{transform:scale(1.5);background-image:radial-gradient(circle,#007bff,#0056b3)}.additional-links[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a88ca;text-decoration:none;transition:transform .3s;display:inline-block}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff;text-decoration:underline;margin:0 5vh;transform:scale(1.5)}"]})}return t})();function Aee(t,e){if(1&t&&(y(0,"tr")(1,"td"),T(2),E(),y(3,"td"),T(4),E(),y(5,"td"),T(6),E(),y(7,"td"),T(8),E(),y(9,"td"),T(10),E(),y(11,"td"),T(12),E()()),2&t){const n=e.$implicit;ce(2),so(n.month),ce(2),so(n.date),ce(2),so(n.payment),ce(2),so(n.interest),ce(2),so(n.principal),ce(2),so(n.remainingBalance)}}let See=(()=>{class t{constructor(){this.loanAmount=1e3,this.loanTerm=6,this.monthlyPayment=0,this.scheduleData=[]}ngOnInit(){this.updateMonthlyPayment()}updateMonthlyPayment(){Math.pow(1.01,this.loanTerm),Math.pow(1.01,this.loanTerm),this.monthlyPayment=(.01*this.loanAmount/(1-1/Math.pow(1.01,this.loanTerm))).toFixed(2)}generateSchedule(){this.scheduleData=[];let r=this.loanAmount;for(let i=1;i<=this.loanTerm;i++){const o=(.01*r).toFixed(2),s=(this.monthlyPayment-o).toFixed(2);r=(r-s).toFixed(2);const a={month:i,date:this.getFutureDate(i),payment:this.monthlyPayment,interest:o,principal:s,remainingBalance:r};this.scheduleData.push(a)}}getFutureDate(n){const r=new Date;return new Date(r.setMonth(r.getMonth()+n)).toLocaleDateString("es-ES")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-simulador"]],decls:41,vars:5,consts:[["routerLink","/inicio",1,"btn","regresar"],[1,"simulator-container"],[1,"titulo"],[1,"evaluar"],[1,"container"],["for","loanAmount"],["type","number","id","loanAmount","min","1000","step","50","placeholder","M\xednimo: $1000",1,"montoPrestamo",3,"ngModel","ngModelChange","input"],["for","loanTerm"],[1,"termValue"],["type","range","id","loanTerm","min","6","max","36","value","12",3,"ngModel","ngModelChange","input"],["for","monthlyPayment"],[1,"monthlyPaymentValue"],[1,"btn",3,"click"],[1,"schedule-container"],[1,"schedule-table"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(y(0,"button",0),T(1,"regresar"),E(),y(2,"div",1)(3,"p",2),T(4,"Simulador de Cuotas"),E(),y(5,"div",3)(6,"div",4)(7,"label",5),T(8,"Monto del Pr\xe9stamo: $"),E(),J(9,"br"),y(10,"input",6),Le("ngModelChange",function(s){return i.loanAmount=s})("input",function(){return i.updateMonthlyPayment()}),E()(),y(11,"div",4)(12,"label",7),T(13,"Plazo del Pr\xe9stamo (meses): "),J(14,"br"),y(15,"span",8),T(16),E()(),y(17,"input",9),Le("ngModelChange",function(s){return i.loanTerm=s})("input",function(){return i.updateMonthlyPayment()}),E()(),y(18,"div",4)(19,"label",10),T(20,"Cuota Mensual: $"),y(21,"span",11),T(22),E()()(),y(23,"button",12),Le("click",function(){return i.generateSchedule()}),T(24,"Generar Cronograma"),E()(),y(25,"div",13)(26,"table",14)(27,"tr")(28,"th"),T(29,"Mes"),E(),y(30,"th"),T(31,"Fecha de Pago"),E(),y(32,"th"),T(33,"Cuota"),E(),y(34,"th"),T(35,"Inter\xe9s"),E(),y(36,"th"),T(37,"Principal"),E(),y(38,"th"),T(39,"Saldo Restante"),E()(),We(40,Aee,13,6,"tr",15),E()()()),2&r&&(ce(10),de("ngModel",i.loanAmount),ce(6),so(i.loanTerm),ce(1),de("ngModel",i.loanTerm),ce(5),so(i.monthlyPayment),ce(18),de("ngForOf",i.scheduleData))},dependencies:[Uu,ho,$s,Ep,$C,Zu,Cp,jC],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;margin:0}*[_ngcontent-%COMP%]{font-size:2.5vh}.simulator-container[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;width:100vw;background:linear-gradient(to right,#0a1e3f,#086788,#07a0c3)}.input-disabled[_ngcontent-%COMP%]{background-color:#f5f5f5;cursor:not-allowed}.titulo[_ngcontent-%COMP%]{font-size:4vh;margin:3vh;color:#b5d9f3;font-weight:700}.evaluar[_ngcontent-%COMP%]{background:rgb(166,185,194);border-radius:1vh;height:auto;width:40vw;display:grid;justify-content:center;align-content:center}.montoPrestamo[_ngcontent-%COMP%]{width:6vw}.schedule-container[_ngcontent-%COMP%]{overflow-y:auto;margin-top:20px;text-align:left;max-height:50vh;width:80vw;background:rgb(166,185,194);border-radius:1vh}.schedule-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.schedule-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .schedule-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #caf0de;padding:2vh;text-align:center;white-space:nowrap}.btn[_ngcontent-%COMP%]{font-size:3vh;padding:1vh;border:1px solid black;border-radius:1vh;font-weight:700;cursor:pointer;transition:background-color .5s ease-in-out,color .5s ease-in-out,transform .3s ease-in-out;background:#3bcd40;margin:2vh}.btn[_ngcontent-%COMP%]:hover{background:#2ca632;color:#c0e3f2;transform:scale(1.3)}.regresar[_ngcontent-%COMP%]{position:fixed;left:1vw;top:1vw}"]})}return t})(),Ree=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-ubicanos"]],decls:2,vars:0,consts:[[1,"container"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31032.34929589344!2d-71.95812032980416!3d-13.532912033257265!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x916dd5b49be5f903%3A0xd9a0256024d0b443!2sCoopac%20Santo%20Domingo%20de%20Guzm%C3%A1n!5e0!3m2!1ses!2spe!4v1706165010987!5m2!1ses!2spe","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",1,"map",2,"border","0"]],template:function(r,i){1&r&&(y(0,"div",0),J(1,"iframe",1),E())},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.map[_ngcontent-%COMP%]{margin:5vh;width:80vw;height:40vw}"]})}return t})();const Pee=["Analista de Admisi\xf3n de Cr\xe9ditos","Analista de Contabilidad","Analista de Cr\xe9ditos","Analista de Desarrollo y Mantenimiento de Sistemas","Analista de Infraestructura y Soporte T\xe9cnico","Analista de Riesgo Crediticio","Analista de Riesgo de Liquidez y Mercado","Analista de Riesgo Operacional, Seguridad de la Informaci\xf3n y Continuidad de Negocio","Asistente Administrativo","Asistente Central de Operaciones","Asistente de Adquisiciones","Asistente de Ahorros y Membres\xeda","Asistente de Almac\xe9n y Archivo","Asistente de Atenci\xf3n al Usuario","Asistente de Bienestar Social","Asistente de Caja y Operaciones","Asistente de Contabilidad","Asistente de Cr\xe9ditos","Asistente de Gerencia","Asistente de Imagen Institucional y Relaciones Publicas","Asistente de LA/FT","Asistente de Marketing","Asistente de Organizaci\xf3n y M\xe9todos","Asistente de Planificaci\xf3n","Asistente de Reclutamiento y Capacitaci\xf3n","Asistente de Remuneraciones y Estad\xedstica","Auxiliar de Log\xedstica","Auxiliar de Operaciones","Auxiliar de Servicios Generales","Auxiliar de Tr\xe1mite Administrativo","Coordinador Administrativo","Coordinador Contable","Coordinador de Cr\xe9ditos","Coordinador de Procesos Internos","Coordinador Judicial","Coordinador Procesal","Gerente de Administraci\xf3n","Gerente de Negocios","Gerente de Operaciones y Finanzas","Gerente de Riesgos","Jefe de Asesor\xeda Legal","Jefe de Cobranzas","Jefe de Contabilidad","Jefe de Finanzas y Tesorer\xeda","Jefe de Gesti\xf3n del Talento Humano","Jefe de Gobernanza Cooperativa","Jefe de Inteligencia de Negocios","Jefe de Log\xedstica","Jefe de Marketing","Jefe de Planificaci\xf3n y M\xe9todos","Jefe de Supervisi\xf3n y Seguimiento","Jefe de Tecnolog\xedas de la Informaci\xf3n","Jefe de Cr\xe9ditos","Jefe de Planificaci\xf3n y M\xe9todos","Jefe de Seguridad","Jefe Zonal","Oficial de Cumplimiento","Supervisor Zonal"].sort();function Mee(t,e){1&t&&J(0,"option",84),2&t&&de("value",e.$implicit)}function xee(t,e){if(1&t&&(y(0,"div",4),J(1,"input",81),y(2,"label",82),T(3,"rol"),E(),y(4,"datalist",83),We(5,Mee,1,1,"option",28),E()()),2&t){const n=dt(2);ce(5),de("ngForOf",n.roles)}}function Nee(t,e){1&t&&J(0,"option",84),2&t&&de("value",e.$implicit)}function Oee(t,e){1&t&&J(0,"option",84),2&t&&de("value",e.$implicit)}function kee(t,e){if(1&t&&(y(0,"option",84),T(1),E()),2&t){const n=e.$implicit;de("value",n),ce(1),ao(" ",n," ")}}function Fee(t,e){if(1&t&&(y(0,"div",85),T(1),E()),2&t){const n=dt(2);ce(1),ao(" ",n.getErrorMessage("email")," ")}}function Vee(t,e){1&t&&J(0,"option",84),2&t&&de("value",e.$implicit)}function Lee(t,e){1&t&&(y(0,"div",86),T(1," Rellene todos los campos correctamente. "),E())}function Uee(t,e){if(1&t){const n=Eo();y(0,"div",2)(1,"div",3),T(2),E(),y(3,"div",4)(4,"input",5),Le("change",function(){return Zt(n),Ut(dt().toggleRoles())}),E(),y(5,"label",6),T(6,"Activar Roles solo para miembros de la cooperativa"),E()(),y(7,"form",7),Le("ngSubmit",function(){return Zt(n),Ut(dt().EnviarFormulario())}),y(8,"div",8),We(9,xee,6,1,"div",9),y(10,"div",4),J(11,"input",10),y(12,"label",11),T(13,"nombre"),E()(),y(14,"div",4),J(15,"input",12),y(16,"label",13),T(17,"Apellido"),E()(),y(18,"div",4),J(19,"input",14),y(20,"label",15),T(21,"Fecha de Nacimiento"),E()(),y(22,"div",4)(23,"select",16)(24,"option",17),T(25,"dni"),E(),y(26,"option",18),T(27,"ruc"),E(),y(28,"option",19),T(29,"carnet de extranjeria"),E(),y(30,"option",20),T(31,"pasaporte"),E(),y(32,"option",21),T(33,"libreta electoral"),E()(),y(34,"label",22),T(35,"Tipo de Documento de Identidad"),E()(),y(36,"div",4),J(37,"input",23),y(38,"label",24),T(39,"# de documento de Identidad"),E()(),y(40,"div",4),J(41,"input",25),y(42,"label",26),T(43,"Nacionalidad"),E(),y(44,"datalist",27),We(45,Nee,1,1,"option",28),E()(),y(46,"div",4),J(47,"input",29),y(48,"label",30),T(49,"ocupacion"),E(),y(50,"datalist",31),We(51,Oee,1,1,"option",28),E()(),y(52,"div",4),J(53,"input",32),y(54,"label",33),T(55,"Tel\xe9fono"),E()()(),y(56,"div",8)(57,"div",4)(58,"select",34),We(59,kee,2,2,"option",28),E(),y(60,"label",35),T(61,"Estado de Socio"),E()(),y(62,"div",4)(63,"select",36)(64,"option",37),T(65," seleccione un g\xe9nero "),E(),y(66,"option",38),T(67,"Masculino"),E(),y(68,"option",39),T(69,"Femenino"),E()(),y(70,"label",40),T(71,"G\xe9nero"),E()(),y(72,"div",4),J(73,"input",41),y(74,"label",42),T(75,"Direcci\xf3n"),E()(),y(76,"div",4),J(77,"input",43),y(78,"label",44),T(79,"Correo Electr\xf3nico"),E(),We(80,Fee,2,1,"div",45),E(),y(81,"div",4),J(82,"input",46,47),y(84,"label",48),T(85,"Contrase\xf1a"),E(),y(86,"img",49),Le("click",function(){Zt(n);const i=N_(83);return Ut(dt().TogglePasswordVisibility(i))}),E()(),y(87,"div",4)(88,"select",50)(89,"option",37),T(90," seleccione su estado civil actual "),E(),y(91,"option",51),T(92,"Soltero"),E(),y(93,"option",52),T(94,"Casado"),E()(),y(95,"label",53),T(96,"Estado Civil"),E()(),y(97,"div",4),J(98,"input",54),y(99,"label",55),T(100,"nivel educativo"),E(),y(101,"datalist",56),We(102,Vee,1,1,"option",28),E()(),y(103,"div",4),J(104,"input",57),y(105,"label",58),T(106,"N\xfamero de Dependientes"),E()()(),y(107,"div",8)(108,"div",4),J(109,"input",59),y(110,"label",60),T(111,"N\xfamero de Hijos"),E()(),y(112,"div",4)(113,"select",61)(114,"option",37),T(115," \xbfposee alguna discapacidad? "),E(),y(116,"option",62),T(117,"Ninguna"),E(),y(118,"option",63),T(119,"Visual"),E(),y(120,"option",64),T(121,"Auditiva"),E(),y(122,"option",65),T(123,"F\xedsica"),E(),y(124,"option",66),T(125,"Intelectual"),E(),y(126,"option",67),T(127,"Otra"),E()(),y(128,"label",68),T(129,"Discapacidad"),E()(),y(130,"p",69),T(131,"en caso de emergencias"),E(),y(132,"div",4),J(133,"input",70),y(134,"label",71),T(135,"Nombre de Contacto de Emergencia"),E()(),y(136,"div",4),J(137,"input",72),y(138,"label",73),T(139,"Tel\xe9fono de Contacto de Emergencia"),E()(),y(140,"div",4),J(141,"input",74),y(142,"label",75),T(143,"Fecha de Registro"),E()(),y(144,"div",4),J(145,"input",76),y(146,"label",77),T(147,"Fecha de Modificaci\xf3n"),E()()(),y(148,"div",78),We(149,Lee,2,0,"div",79),y(150,"button",80),T(151),E()()()()}if(2&t){const n=dt();let r;ce(2),so(n.titulo),ce(5),de("formGroup",n.editarUsuario),ce(2),de("ngIf",n.activoRol),ce(10),de("min",n.calcularFechaMinima())("max",n.calcularFechaMaxima()),ce(5),de("selected",!0),ce(21),de("ngForOf",n.nacionalidades),ce(6),de("ngForOf",n.listaOcupaciones),ce(8),de("ngForOf",n.estadosSocio),ce(5),de("disabled",!0)("selected",!0),ce(16),de("ngIf",(null==(r=n.editarUsuario.get("email"))?null:r.invalid)&&(null==(r=n.editarUsuario.get("email"))?null:r.dirty)),ce(9),de("disabled",!0)("selected",!0),ce(13),de("ngForOf",n.nivelesEducacion),ce(2),de("min",0),ce(5),de("min",0),ce(5),de("disabled",!0)("selected",!0),ce(35),de("ngIf",!n.editarUsuario.valid),ce(1),de("disabled",!n.editarUsuario.valid),ce(1),ao(" ",n.enviarFormulario," ")}}function Bee(t,e){1&t&&J(0,"app-spinner")}let LU=(()=>{class t{constructor(n,r,i,o,s,a,u,l){this.fb=n,this.router=r,this.route=i,this.fireError=o,this.errorMessageService=s,this.userService=a,this.localStorage=u,this.datosForm=l,this.editarUsuario=new dd({}),this.mostrarPassword=!1,this.loading=!1,this.listaOcupaciones=FU,this.nacionalidades=VU,this.roles=Pee,this.estadosSocio=["Activo","Inactivo","Pendiente"],this.nivelesEducacion=["Primaria","Secundaria","Universitaria","Postgrado"],this.defaultEducacion="Universitaria",this.titulo="registro de datos",this.enviarFormulario="registrar datos",this.submitted=!1,this.id="",this.activoRol=!1,this.id=this.route.snapshot.paramMap.get("usuarioID")||"",this.InicializarFormulario(),this.EsEditable(this.id)&&this.EditarCampos(this.id)}toggleRoles(){this.activoRol=!this.activoRol}EnviarFormulario(){this.EsEditable(this.id)?this.EditarUsuario():this.AgregarUsuario()}EsEditable(n){return!!n}EditarCampos(n){this.titulo="Editar Usuario",this.enviarFormulario="actualizar datos",this.userService.getUserByID(n).subscribe(r=>{this.editarUsuario.setValue({rol:r.payload.data().rol,nombre:r.payload.data().nombre,apellido:r.payload.data().apellido,fechaNacimiento:r.payload.data().fechaNacimiento,tipoDocumentoIdentidad:r.payload.data().tipoDocumentoIdentidad,documentoIdentidad:r.payload.data().documentoIdentidad,nacionalidad:r.payload.data().nacionalidad,telefono:r.payload.data().telefono,ocupacion:r.payload.data().ocupacion,estadoSocio:r.payload.data().estadoSocio,genero:r.payload.data().genero,direccion:r.payload.data().direccion,email:r.payload.data().email,password:r.payload.data().password,estadoCivil:r.payload.data().estadoCivil,educacion:r.payload.data().educacion,numeroDependientes:r.payload.data().numeroDependientes,numeroHijos:r.payload.data().numeroHijos,discapacidad:r.payload.data().discapacidad,nombreContactoEmergencia:r.payload.data().nombreContactoEmergencia,telefonoContactoEmergencia:r.payload.data().telefono,fechaRegistro:r.payload.data().fechaRegistro,fechaModificacion:this.datosForm.ObtenerFechaActual()})})}AgregarUsuario(){this.submitted=!0,!this.editarUsuario.invalid&&(this.loading=!0,this.dataUser=this.editarUsuario.value,console.log(this.dataUser),this.userService.addUser(this.dataUser).then(n=>{console.log("registro exitoso",n),this.loading=!1,this.router.navigate(["/admin"])}).catch(n=>{console.log(n),this.loading=!1}))}EditarUsuario(){this.dataUser=this.editarUsuario.value,this.userService.updateUser(this.id,this.dataUser),alert("Usuario editado correctamente."),this.router.navigate(["/admin"])}InicializarFormulario(){this.dataUser=this.localStorage.loadDataFromLocalStorage("dataUser"),this.editarUsuario=this.fb.group({rol:["soc",Oe.required],nombre:[null,Oe.required],apellido:[null,Oe.required],fechaNacimiento:[null,[Oe.required,this.datosForm.ValidarEdad]],tipoDocumentoIdentidad:[null,Oe.required],documentoIdentidad:[null,Oe.required],nacionalidad:[null,Oe.required],telefono:[null,Oe.required],ocupacion:[null,Oe.required],estadoSocio:["Pendiente",Oe.required],genero:[null,Oe.required],direccion:[null,Oe.required],email:[this.dataUser.email,[Oe.required,Oe.email]],password:[this.dataUser.password,[Oe.required,Oe.minLength(6)]],estadoCivil:[null,Oe.required],educacion:[null,Oe.required],numeroDependientes:[0,[Oe.required,Oe.min(0)]],numeroHijos:[0,[Oe.required,Oe.min(0)]],discapacidad:[null,Oe.required],nombreContactoEmergencia:[null,Oe.required],telefonoContactoEmergencia:[null,Oe.required],fechaRegistro:[this.datosForm.ObtenerFechaActual()],fechaModificacion:[this.datosForm.ObtenerFechaActual()]})}TogglePasswordVisibility(n){this.datosForm.TogglePasswordVisibility(n)}calcularFechaMinima(){return this.datosForm.CalcularFechaMinima()}calcularFechaMaxima(){return this.datosForm.CalcularFechaMaxima()}getErrorMessage(n){return this.errorMessageService.getErrorMessage(n,this.editarUsuario)}static#e=this.\u0275fac=function(r){return new(r||t)(G(bp),G(Xn),G(Hu),G(pp),G(WC),G(Vg),G(ka),G(ZC))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-editar-usuario"]],decls:2,vars:2,consts:[["class","wrapper",4,"ngIf"],[4,"ngIf"],[1,"wrapper"],[1,"login"],[1,"input-container"],["type","checkbox","id","activarRoles",3,"change"],["for","activarRoles",1,"placeholder"],[1,"columns",3,"formGroup","ngSubmit"],[1,"column"],["class","input-container",4,"ngIf"],["placeholder","","type","text","id","nombre","formControlName","nombre","required","",1,"input-field"],["for","nombre",1,"placeholder"],["placeholder","","type","text","id","apellido","formControlName","apellido","required","",1,"input-field"],["for","apellido",1,"placeholder"],["placeholder","","type","date","id","fechaNacimiento","formControlName","fechaNacimiento","required","",1,"input-field",3,"min","max"],["for","fechaNacimiento",1,"placeholder"],["id","tipoDocumentoIdentidad","formControlName","tipoDocumentoIdentidad","required","",1,"input-field"],["value","dni",3,"selected"],["value","ruc"],["value","carnet de extranjeria"],["value","pasaporte"],["value","libreta electoral"],["for","tipoDocumentoIdentidad",1,"placeholder"],["placeholder","","type","text","id","documentoIdentidad","formControlName","documentoIdentidad","required","",1,"input-field"],["for","documentoIdentidad",1,"placeholder"],["placeholder","","list","nacionalidadesList","type","text","id","nacionalidad","formControlName","nacionalidad","required","",1,"input-field"],["for","nacionalidad",1,"placeholder"],["id","nacionalidadesList"],[3,"value",4,"ngFor","ngForOf"],["placeholder","","list","ocupacionesList","type","text","id","ocupacion","formControlName","ocupacion","required","",1,"input-field"],["for","ocupacion",1,"placeholder"],["id","ocupacionesList"],["placeholder","","type","tel","id","telefono","formControlName","telefono","required","",1,"input-field"],["for","telefono",1,"placeholder"],["id","estadoSocio","formControlName","estadoSocio","readonly","",1,"input-field"],["for","estadoSocio",1,"placeholder"],["id","genero","formControlName","genero","required","",1,"input-field"],["value","",3,"disabled","selected"],["value","masculino"],["value","femenino"],["for","genero",1,"placeholder"],["type","text","id","direccion","name","direccion","placeholder","","formControlName","direccion","required","",1,"input-field"],["for","direccion",1,"placeholder"],["type","email","id","email","name","email","placeholder","","autocomplete","off","formControlName","email","readonly","",1,"input-field"],["for","email",1,"placeholder"],["class","error-General",4,"ngIf"],["type","password","id","password","name","password","placeholder","","formControlName","password","readonly","",1,"input-field"],["passwordInput",""],["for","password",1,"placeholder"],["src","../../../assets/img/mostrar.png","id","togglePassword","alt","Mostrar contrase\xf1a",1,"mostrarOcultar",3,"click"],["id","estadoCivil","formControlName","estadoCivil","required","",1,"input-field"],["value","soltero"],["value","casado"],["for","estadoCivil",1,"placeholder"],["placeholder","","list","educacionList","type","text","id","educacion","formControlName","educacion","required","","autocomplete","off",1,"input-field"],["for","educacion",1,"placeholder"],["id","educacionList"],["placeholder","","type","number","id","numeroDependientes","formControlName","numeroDependientes","required","",1,"input-field",3,"min"],["for","numeroDependientes",1,"placeholder"],["placeholder","","type","number","id","numeroHijos","formControlName","numeroHijos","required","",1,"input-field",3,"min"],["for","numeroHijos",1,"placeholder"],["id","discapacidad","formControlName","discapacidad","required","",1,"input-field"],["value","ninguna"],["value","visual"],["value","auditiva"],["value","f\xedsica"],["value","intelectual"],["value","otra"],["for","discapacidad",1,"placeholder"],[1,"title"],["placeholder","","type","text","id","nombreContactoEmergencia","formControlName","nombreContactoEmergencia","required","",1,"input-field"],["for","nombreContactoEmergencia",1,"placeholder"],["placeholder","","type","tel","id","telefonoContactoEmergencia","formControlName","telefonoContactoEmergencia","required","",1,"input-field"],["for","telefonoContactoEmergencia",1,"placeholder"],["placeholder","","type","datetime","id","fechaRegistro","formControlName","fechaRegistro","readonly","",1,"input-field"],["for","fechaRegistro",1,"placeholder"],["placeholder","","type","datetime","id","fechaModificacion","formControlName","fechaModificacion","readonly","",1,"input-field"],["for","fechaModificacion",1,"placeholder"],[1,"button-container"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],["placeholder","","list","rolesList","type","text","id","rol","formControlName","rol","required","","autocomplete","off",1,"input-field"],["for","rol",1,"placeholder"],["id","rolesList"],[3,"value"],[1,"error-General"],[1,"error-message"]],template:function(r,i){1&r&&(We(0,Uee,152,22,"div",0),We(1,Bee,1,0,"app-spinner",1)),2&r&&(de("ngIf",!i.loading),ce(1),de("ngIf",i.loading))},dependencies:[Uu,Do,hd,Jy,Xy,$s,Ep,wp,Zu,cd,Ba,Cp,Ua,Qu,Ju],styles:[".wrapper[_ngcontent-%COMP%]{background:#f5f5f5;height:100vh;align-items:center;justify-content:center;padding:0 4vh}.title[_ngcontent-%COMP%]{justify-content:center;align-content:center;text-align:center;font-size:5vh;background:rgb(245,108,108);margin:3vh 0}.columns[_ngcontent-%COMP%]{display:grid;grid-template:repeat(1,1fr) / repeat(3,1fr);gap:.5vh 3vh;grid-auto-flow:row}.login[_ngcontent-%COMP%]{font-size:10vh;text-align:center;padding:2vh 0 4vh}.imgContrasena[_ngcontent-%COMP%]{width:20vh;height:auto;cursor:pointer}.input-container[_ngcontent-%COMP%]{position:relative;margin-bottom:3vh;display:flex;flex-flow:column wrap}.input-field[_ngcontent-%COMP%]{width:100%;padding:1vh;border:1px solid #ccc;border-radius:4px;text-transform:none}.input-field[readonly][_ngcontent-%COMP%]{background:#f0f0f0;color:#333;-webkit-user-select:none;user-select:none;border:none;outline:none;border-radius:4px;pointer-events:none;cursor:default}.placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:1vw;transform:translateY(-50%);pointer-events:none;transition:.3s;font-size:2vh;color:#999;z-index:1}.input-field[_ngcontent-%COMP%]:focus + .placeholder[_ngcontent-%COMP%]:active, .input-field[_ngcontent-%COMP%]:not(:placeholder-shown) + .placeholder[_ngcontent-%COMP%]{top:1vh;font-size:3vh;color:#666;transform:translateY(-100%) scale(.8);padding:0 1vh;background-color:#fff;opacity:.5}.input-field[_ngcontent-%COMP%]:invalid + .placeholder[_ngcontent-%COMP%]{color:#410a0a}.input-field[_ngcontent-%COMP%]:invalid:focus + .placeholder[_ngcontent-%COMP%]{color:red}.error-General[_ngcontent-%COMP%]{position:absolute;top:0;left:110%;margin-top:5vh;font-size:2vh;color:red;margin-top:1vh;width:100%;text-align:left;text-shadow:0 0 5px rgba(0,123,255,.5)}.error-message[_ngcontent-%COMP%]{color:red;margin:0 0 2vh;width:100%;text-align:center;text-shadow:0 0 5px rgba(0,123,255,.5)}.mostrarOcultar[_ngcontent-%COMP%]{position:absolute;top:15%;right:1vh;cursor:pointer;width:4vh;transform:translateY(-20%);transition:transform .3s,box-shadow .3s}.mostrarOcultar[_ngcontent-%COMP%]:hover{transform:scale(1.2)}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.button-container[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center;align-items:center;grid-area:2/1/2/4}button[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#65a0df,#2d6bae);color:#fff;padding:1vh;border:none;border-radius:.5vh;cursor:pointer;transition:transform .3s,box-shadow .3s}button[_ngcontent-%COMP%]:focus{background-color:#007bff;outline:none;box-shadow:0 0 5px #007bff80}button[_ngcontent-%COMP%]:hover{transform:scale(1.5);background-image:radial-gradient(circle,#007bff,#0056b3)}.additional-links[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a88ca;text-decoration:none;transition:transform .3s;display:inline-block}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff;text-decoration:underline;margin:0 5vh;transform:scale(1.5)}"]})}return t})();function jee(t,e){if(1&t){const n=Eo();y(0,"div")(1,"div",2),J(2,"input",3),y(3,"button",4),Le("click",function(){return Zt(n),Ut(dt().buscar())}),J(4,"i",5),E(),y(5,"button",4),Le("click",function(){return Zt(n),Ut(dt().resetCampos())}),J(6,"i",6),E()(),y(7,"div",7)(8,"div",8)(9,"label",9),T(10,"codigo de agencia"),E(),y(11,"select",10)(12,"option",11),T(13,"seleccione 1-10"),E(),y(14,"option",12),T(15,"1"),E(),y(16,"option",13),T(17,"2"),E(),y(18,"option",14),T(19,"3"),E(),y(20,"option",15),T(21,"4"),E(),y(22,"option",16),T(23,"5"),E(),y(24,"option",17),T(25,"6"),E(),y(26,"option",18),T(27,"7"),E(),y(28,"option",19),T(29,"8"),E(),y(30,"option",20),T(31,"9"),E(),y(32,"option",21),T(33,"10"),E()(),y(34,"label",22),T(35,"moneda"),E(),y(36,"select",23)(37,"option",11),T(38,"seleccione soles / dolares"),E(),y(39,"option",24),T(40,"d (dolares)"),E(),y(41,"option",25),T(42,"s (soles)"),E()(),y(43,"label",26),T(44,"riesgo credito"),E(),y(45,"select",27)(46,"option",11),T(47,"seleccione riesgo credito"),E(),y(48,"option",28),T(49,"deficiente"),E(),y(50,"option",29),T(51,"dudoso"),E(),y(52,"option",30),T(53,"normal"),E(),y(54,"option",31),T(55,"perdida"),E(),y(56,"option",32),T(57,"potencial"),E()(),y(58,"label",33),T(59,"grupo de riesgo"),E(),y(60,"select",34)(61,"option",11),T(62,"seleccione grupo de riesgo"),E(),y(63,"option",28),T(64,"deficiente"),E(),y(65,"option",29),T(66,"dudoso"),E(),y(67,"option",30),T(68,"normal"),E(),y(69,"option",31),T(70,"perdida"),E(),y(71,"option",32),T(72,"potencial"),E()(),y(73,"label",35),T(74,"analista"),E(),y(75,"select",36)(76,"option",11),T(77,"seleccione analista"),E(),y(78,"option",37),T(79,"analista1"),E(),y(80,"option",38),T(81,"analista2"),E(),y(82,"option",39),T(83,"analista3"),E(),y(84,"option",40),T(85,"analista4"),E(),y(86,"option",41),T(87,"analista5"),E()(),y(88,"label",42),T(89,"recuperador"),E(),y(90,"select",43)(91,"option",11),T(92,"seleccione recuperador"),E(),y(93,"option",44),T(94,"recuperador1"),E(),y(95,"option",45),T(96,"recuperador2"),E(),y(97,"option",46),T(98,"recuperador3"),E(),y(99,"option",47),T(100,"recuperador4"),E(),y(101,"option",48),T(102,"recuperador5"),E()(),y(103,"label",49),T(104,"sexo"),E(),y(105,"select",50)(106,"option",11),T(107,"seleccione sexo"),E(),y(108,"option",51),T(109,"masculino"),E(),y(110,"option",52),T(111,"femenino"),E()(),y(112,"label",53),T(113,"departamento"),E(),y(114,"select",54)(115,"option",11),T(116,"seleccione departamento"),E(),y(117,"option",55),T(118,"apurimac"),E(),y(119,"option",56),T(120,"arequipa"),E(),y(121,"option",57),T(122,"cusco"),E(),y(123,"option",58),T(124,"madre de dios"),E()(),y(125,"label",59),T(126,"provincia"),E(),y(127,"select",60)(128,"option",11),T(129,"seleccione provincia"),E(),y(130,"option",61),T(131,"abancay"),E(),y(132,"option",62),T(133,"anta"),E(),y(134,"option",56),T(135,"arequipa"),E()(),y(136,"label",63),T(137,"distrito"),E(),y(138,"select",64)(139,"option",11),T(140,"seleccione distrito"),E(),y(141,"option",61),T(142,"abancay"),E(),y(143,"option",62),T(144,"anta"),E(),y(145,"option",56),T(146,"arequipa"),E()(),y(147,"label",65),T(148,"empresa"),E(),y(149,"select",66)(150,"option",11),T(151,"seleccione empresa"),E(),y(152,"option",67),T(153,"andina sindicato"),E(),y(154,"option",68),T(155," cooperativa santo domingo de guzman "),E()(),y(156,"label",69),T(157,"riesgo anterior"),E(),y(158,"select",70)(159,"option",11),T(160,"seleccione riesgo anterior"),E(),y(161,"option",28),T(162,"deficiente"),E(),y(163,"option",29),T(164,"dudoso"),E(),y(165,"option",30),T(166,"normal"),E(),y(167,"option",32),T(168,"potencial"),E()(),y(169,"label",71),T(170,"destino"),E(),y(171,"select",72)(172,"option",11),T(173,"seleccione destino"),E(),y(174,"option",73),T(175," actividades inmobiliarias empresariales y de alquiler "),E(),y(176,"option",74),T(177,"activo"),E()(),y(178,"label",75),T(179,"forma de pago"),E(),y(180,"select",76)(181,"option",11),T(182,"seleccione forma de pago"),E(),y(183,"option",77),T(184,"convenio"),E(),y(185,"option",78),T(186,"directo"),E()(),y(187,"label",79),T(188,"estado de credito"),E(),y(189,"select",80)(190,"option",11),T(191,"seleccione estado de credito"),E(),y(192,"option",81),T(193,"judicial"),E(),y(194,"option",82),T(195,"vencido"),E(),y(196,"option",83),T(197,"vigente"),E()(),y(198,"label",84),T(199,"actividad economica"),E(),y(200,"select",85)(201,"option",11),T(202," seleccione actividad economica "),E(),y(203,"option",86),T(204,"agricultura"),E(),y(205,"option",87),T(206,"alquiler"),E()(),y(207,"label",88),T(208,"tipo de socio"),E(),y(209,"select",89)(210,"option",11),T(211,"seleccione tipo de socio"),E(),y(212,"option",90),T(213,"campa\xf1a"),E(),y(214,"option",90),T(215,"exclusivo"),E(),y(216,"option",90),T(217,"nuevo"),E(),y(218,"option",90),T(219,"recurrente"),E(),y(220,"option",90),T(221,"tasa negociable"),E()()(),y(222,"div",91)(223,"div",92),J(224,"input",93),y(225,"label",94),T(226,"nombres"),E()(),y(227,"div",92),J(228,"input",95),y(229,"label",96),T(230,"# de cuenta"),E()(),y(231,"div",92),J(232,"input",97),y(233,"label",98),T(234,"codigo de pagare"),E()(),y(235,"div",92),J(236,"input",99),y(237,"label",100),T(238,"otorga"),E()(),y(239,"div",92),J(240,"input",101),y(241,"label",102),T(242,"prestamo"),E()(),y(243,"div",92),J(244,"input",103),y(245,"label",104),T(246,"nombre De Prestamo"),E()(),y(247,"div",92),J(248,"input",105),y(249,"label",106),T(250,"producto"),E()(),y(251,"div",92),J(252,"input",107),y(253,"label",108),T(254,"monto prestamo"),E()(),y(255,"div",92),J(256,"input",109),y(257,"label",110),T(258,"saldo prestamo"),E()(),y(259,"div",92),J(260,"input",111),y(261,"label",112),T(262,"# De D\xedas"),E()(),y(263,"div",92),J(264,"input",113),y(265,"label",114),T(266,"exceso De Deficit"),E()(),y(267,"div",92),J(268,"input",115),y(269,"label",116),T(270,"saldo Vencido"),E()(),y(271,"div",92),J(272,"input",117),y(273,"label",118),T(274,"total De Garantias"),E()(),y(275,"div",92),J(276,"input",119),y(277,"label",120),T(278,"fecha del ultimo oago"),E()(),y(279,"div",92),J(280,"input",121),y(281,"label",122),T(282,"fecha de aprobacion"),E()(),y(283,"div",92),J(284,"input",123),y(285,"label",124),T(286,"plazo"),E()(),y(287,"div",92),J(288,"input",125),y(289,"label",126),T(290,"pagadas"),E()(),y(291,"div",92),J(292,"input",127),y(293,"label",128),T(294,"pendientes"),E()(),y(295,"div",92),J(296,"input",129),y(297,"label",130),T(298,"atrasadas"),E()(),y(299,"div",92),J(300,"input",131),y(301,"label",132),T(302,"tasa de interes"),E()(),y(303,"div",92),J(304,"input",133),y(305,"label",134),T(306,"fecha de vencimiento"),E()(),y(307,"div",92),J(308,"input",135),y(309,"label",136),T(310,"sexo"),E()(),y(311,"div",92),J(312,"input",137),y(313,"label",138),T(314,"edad"),E()(),y(315,"div",92),J(316,"input",139),y(317,"label",140),T(318,"direccion"),E()(),y(319,"div",92),J(320,"input",141),y(321,"label",142),T(322,"tel\xe9fono"),E()(),y(323,"div",92),J(324,"input",143),y(325,"label",144),T(326,"fecha de nacimiento"),E()(),y(327,"div",92),J(328,"input",145),y(329,"label",146),T(330,"dni"),E()(),y(331,"div",92),J(332,"input",147),y(333,"label",148),T(334,"cuota Mensual"),E()(),y(335,"div",92),J(336,"input",149),y(337,"label",150),T(338,"forma de pago"),E()(),y(339,"div",92),J(340,"input",151),y(341,"label",152),T(342,"estado de credito"),E()(),y(343,"div",92),J(344,"input",153),y(345,"label",154),T(346,"aporte"),E()(),y(347,"div",92),J(348,"input",155),y(349,"label",156),T(350,"id de prestamo"),E()(),y(351,"div",92),J(352,"input",157),y(353,"label",158),T(354,"c\xf3digo de recuperador"),E()()()()()}2&t&&(ce(12),de("disabled",!0),ce(25),de("disabled",!0),ce(9),de("disabled",!0),ce(15),de("disabled",!0),ce(15),de("disabled",!0),ce(15),de("disabled",!0),ce(15),de("disabled",!0),ce(9),de("disabled",!0),ce(13),de("disabled",!0),ce(11),de("disabled",!0),ce(11),de("disabled",!0),ce(9),de("disabled",!0),ce(13),de("disabled",!0),ce(9),de("disabled",!0),ce(9),de("disabled",!0),ce(11),de("disabled",!0),ce(9),de("disabled",!0))}function $ee(t,e){if(1&t){const n=Eo();y(0,"div",159)(1,"div",160)(2,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("PieChart"))}),T(3,"Pie Chart"),E(),y(4,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("BarChart"))}),T(5,"Bar Chart"),E(),y(6,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("ColumnChart"))}),T(7,"Column Chart"),E(),y(8,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("LineChart"))}),T(9,"Line Chart"),E(),y(10,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("AreaChart"))}),T(11,"Area Chart"),E(),y(12,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("ScatterChart"))}),T(13,"Scatter Chart"),E(),y(14,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("SteppedAreaChart"))}),T(15," Stepped Area Chart "),E(),y(16,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("ComboChart"))}),T(17,"Combo Chart"),E(),y(18,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("Histogram"))}),T(19,"Histogram"),E(),y(20,"button",161),Le("click",function(){return Zt(n),Ut(dt().mostrarGraficos("GeoChart"))}),T(21,"GeoChart"),E()(),J(22,"div",162),E()}}let UU=(()=>{class t{constructor(){this.mostrarInformacion=!0,google.charts.load("current",{packages:["corechart","geochart"]})}buscar(){const n=[];document.querySelectorAll(".seleccionables select").forEach(s=>{""!==s.value&&"seleccione"!==s.value&&n.push({id:s.id,valor:s.value})}),document.querySelectorAll('.checkeables input[type="checkbox"]').forEach(s=>{s.checked&&n.push({id:s.id,valor:s.value})});const o=document.getElementById("campoBusqueda").value;""!==o.trim()&&n.unshift({id:"campoBusqueda",valor:o}),alert("Campos seleccionados:\n"+n.map(s=>s.id).join("\n")),this.mostrarInformacion=!1,google.charts.setOnLoadCallback(()=>{this.mostrarGraficos.bind(this)})}mostrarGraficos(n){const r=document.getElementById("grafico");if(r){const i=new google.visualization.arrayToDataTable([["Task","Hours per Day"],["Work",11],["Eat",2],["Commute",2],["Watch TV",2],["Sleep",7]]),o=google.visualization.arrayToDataTable([["Country","Popularity"],["Germany",200],["United States",300],["Brazil",400],["Canada",500],["France",600],["RU",700]]),s={width:800,height:500,hAxis:{title:"Age",minValue:0,maxValue:15},vAxis:{title:"Weight",minValue:0,maxValue:15},legend:"none",title:"Title"};let a;switch(n){case"PieChart":a=new google.visualization.PieChart(r),a.draw(i,s);break;case"BarChart":a=new google.visualization.BarChart(r),a.draw(i,s);break;case"ColumnChart":a=new google.visualization.ColumnChart(r),a.draw(i,s);break;case"LineChart":a=new google.visualization.LineChart(r),a.draw(i,s);break;case"AreaChart":a=new google.visualization.AreaChart(r),a.draw(i,s);break;case"ScatterChart":a=new google.visualization.ScatterChart(r),a.draw(i,s);break;case"SteppedAreaChart":a=new google.visualization.SteppedAreaChart(r),a.draw(i,s);break;case"ComboChart":a=new google.visualization.ComboChart(r),a.draw(i,s);break;case"Histogram":a=new google.visualization.Histogram(r),a.draw(i,s);break;case"GeoChart":a=new google.visualization.GeoChart(r),a.draw(o,s);break;default:return void console.error("Tipo de gr\xe1fico no reconocido.")}}else console.error("Contenedor no encontrado.")}resetCampos(){document.querySelectorAll(".seleccionables select").forEach(i=>{i.value=""}),document.querySelectorAll('.checkeables input[type="checkbox"]').forEach(i=>{i.checked=!1}),document.getElementById("campoBusqueda").value=""}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-filtros"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","contenedorGraficos",4,"ngIf"],[1,"busqueda"],["type","text","id","campoBusqueda","placeholder","Ingrese contenido a buscar",1,"space"],[1,"space",3,"click"],[1,"fa-solid","fa-magnifying-glass"],[1,"fa-solid","fa-arrow-rotate-left"],[1,"filtrosContainer"],[1,"seleccionables"],["for","codigoDeAgencia"],["id","codigoDeAgencia"],["value","",3,"disabled"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["for","moneda"],["id","moneda"],["value","d"],["value","s"],["for","riesgo credito"],["id","riesgo credito"],["value","deficiente"],["value","dudoso"],["value","normal"],["value","perdida"],["value","potencial"],["for","grupoderiesgo"],["id","grupoderiesgo"],["for","analista"],["id","analista"],["value","analista1"],["value","analista2"],["value","analista3"],["value","analista4"],["value","analista5"],["for","recuperador"],["id","recuperador"],["value","recuperador1"],["value","recuperador2"],["value","recuperador3"],["value","recuperador4"],["value","recuperador5"],["for","sexo"],["id","sexo"],["value","m"],["value","f"],["for","departamento"],["id","departamento"],["value","apurimac"],["value","arequipa"],["value","cusco"],["value","madre de dios"],["for","provincia"],["id","provincia"],["value","abancay"],["value","anta"],["for","distrito"],["id","distrito"],["for","empresa"],["id","empresa"],["value","andina sindicato"],["value","cooperativa santo domingo de guzman"],["for","riesgoanterior"],["id","riesgoanterior"],["for","destino"],["id","destino"],["value","actividades inmobiliarias empresariales y de alquiler"],["value","activo"],["for","forma de pago"],["id","forma de pago"],["value","convenio"],["value","directo"],["for","estadodecredito"],["id","estadodecredito"],["value","judicial"],["value","vencido"],["value","vigente"],["for","actividadEconomica"],["id","actividadEconomica"],["value","agricultura"],["value","alquiler"],["for","tipodesocio"],["id","tipodesocio"],["value","campa\xf1a"],[1,"checkeables"],[1,"checkbox-container"],["type","checkbox","id","nombres","value","nombres del asociado"],["for","nombres"],["type","checkbox","id","#cuenta","value","#cuenta"],["for","#cuenta"],["type","checkbox","id","pagare","value","pagare"],["for","pagare"],["type","checkbox","id","otorga","value","otorga"],["for","otorga"],["type","checkbox","id","prestamo","value","prestamo"],["for","prestamo"],["type","checkbox","id","nombreDePrestamo","value","nombreDePrestamo"],["for","nombreDePrestamo"],["type","checkbox","id","producto","value","producto"],["for","producto"],["type","checkbox","id","montoPrestamo","value","montoPrestamo"],["for","montoPrestamo"],["type","checkbox","id","saldoPrestamo","value","saldoPrestamo"],["for","saldoPrestamo"],["type","checkbox","id","#DeDias","value","#DeDias"],["for","#DeDias"],["type","checkbox","id","excesoDeDeficit","value","excesoDeDeficit"],["for","excesoDeDeficit"],["type","checkbox","id","saldoVencido","value","saldoVencido"],["for","saldoVencido"],["type","checkbox","id","totalDeGarantias","value","totalDeGarantias"],["for","totalDeGarantias"],["type","checkbox","id","fechaDeUltimoPago","value","fechaDeUltimoPago"],["for","fechaDeUltimoPago"],["type","checkbox","id","fechaDeAprobacion","value","fechaDeAprobacion"],["for","fechaDeAprobacion"],["type","checkbox","id","plazo","value","plazo"],["for","plazo"],["type","checkbox","id","pagadas","value","pagadas"],["for","pagadas"],["type","checkbox","id","pendientes","value","pendientes"],["for","pendientes"],["type","checkbox","id","atrasadas","value","atrasadas"],["for","atrasadas"],["type","checkbox","id","tasaDeInteres","value","tasaDeInteres"],["for","tasaDeInteres"],["type","checkbox","id","fechaDeVencimiento","value","fechaDeVencimiento"],["for","fechaDeVencimiento"],["type","checkbox","id","CSexo","value","CSexo"],["for","CSexo"],["type","checkbox","id","edad","value","edad"],["for","edad"],["type","checkbox","id","direccion","value","direccion"],["for","direccion"],["type","checkbox","id","telefono","value","telefono"],["for","telefono"],["type","checkbox","id","fechaDeNacimiento","value","fechaDeNacimiento"],["for","fechaDeNacimiento"],["type","checkbox","id","dni","value","dni"],["for","dni"],["type","checkbox","id","cuotaMensual","value","cuotaMensual"],["for","cuotaMensual"],["type","checkbox","id","formaDePago","value","formaDePago"],["for","formaDePago"],["type","checkbox","id","estadoDeCredito","value","estadoDeCredito"],["for","estadoDeCredito"],["type","checkbox","id","aporte","value","aporte"],["for","aporte"],["type","checkbox","id","idprestamo","value","idprestamo"],["for","idprestamo"],["type","checkbox","id","codigoDeRecuperador","value","codigoDeRecuperador"],["for","codigoDeRecuperador"],[1,"contenedorGraficos"],[1,"contenedorOpciones"],[3,"click"],["id","grafico",1,"grafico"]],template:function(r,i){1&r&&(We(0,jee,355,17,"div",0),We(1,$ee,23,0,"div",1)),2&r&&(de("ngIf",i.mostrarInformacion),ce(1),de("ngIf",!i.mostrarInformacion))},dependencies:[Do,Jy,Xy],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;text-transform:capitalize;font-size:2vh}.busqueda[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:15px;box-sizing:border-box;text-align:center}.filtrosContainer[_ngcontent-%COMP%]{display:flex}.seleccionables[_ngcontent-%COMP%], .checkeables[_ngcontent-%COMP%]{flex:1;padding:3vh}.seleccionables[_ngcontent-%COMP%]{flex:40vw;border-right:1px solid #948e8e;display:grid;grid-template-columns:45% 55%;gap:5px}.checkeables[_ngcontent-%COMP%]{flex:60vw;display:grid;grid-template-columns:repeat(3,.5fr);gap:1vh}.checkbox-container[_ngcontent-%COMP%]{background-color:#eae3e3;border-radius:5px;margin-bottom:5px;display:flex;align-items:center;padding:1vh;position:relative;width:auto}.checkeables[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;margin-right:5px}.checkbox-container[_ngcontent-%COMP%]:hover{background:none}.checkbox-container[_ngcontent-%COMP%]:hover:after{content:"";position:absolute;left:0;bottom:-2px;width:100%;height:2px;background-color:#333;box-shadow:0 2px 5px #0003}.space[_ngcontent-%COMP%]{margin-right:1vh}.contenedorGraficos[_ngcontent-%COMP%]{display:grid;justify-content:center;align-content:center;padding:3vh}.contenedorOpciones[_ngcontent-%COMP%]{display:grid;justify-content:center;grid-gap:1vh;align-items:center;grid-template:auto / repeat(6,1fr);grid-auto-flow:row wrap}.grafico[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center}']})}return t})();const Hee=function(t){return["/editUser/",t]};function zee(t,e){if(1&t){const n=Eo();y(0,"tr")(1,"td"),T(2),E(),y(3,"td"),T(4),E(),y(5,"td"),J(6,"button",7),y(7,"button",8),Le("click",function(){const o=Zt(n).$implicit;return Ut(dt(2).eliminarUsuario(o.usuarioID))}),E()()()}if(2&t){const n=e.$implicit;ce(2),B_("",n.nombre,", ",n.apellido,""),ce(2),so(n.email),ce(2),de("routerLink",Jw(4,Hee,n.usuarioID))}}function qee(t,e){if(1&t){const n=Eo();y(0,"div",2)(1,"p"),J(2,"i",3),y(3,"button",4),Le("click",function(){return Zt(n),Ut(dt().AgregarUsuario())}),T(4," agregar usuario "),E()(),y(5,"table")(6,"thead",5)(7,"tr")(8,"th"),T(9,"Nombres y Apellidos"),E(),y(10,"th"),T(11,"Email"),E(),y(12,"th"),T(13,"Acciones"),E()()(),y(14,"tbody"),We(15,zee,8,6,"tr",6),function nM(t,e){const n=Et();let r;const i=t+lt;n.firstCreatePass?(r=function VH(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=pa(r.type)),a=Or(G);try{const u=ll(!1),l=o();return ll(u),function y$(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,re(),i,l),l}finally{Or(a)}}(16,"async"),E()()()}if(2&t){const n=dt();ce(15),de("ngForOf",rM(16,1,n.listaUsuarios$))}}function Gee(t,e){1&t&&J(0,"app-spinner")}let Wee=(()=>{class t{constructor(n,r){this.usersService=n,this.router=r,this.loading=!1,this.listaUsuarios$=new Xe,this.listaUsuarios$=this.usersService.getAllUsers()}AgregarUsuario(){this.router.navigate(["/editUser"])}editarUsuario(n){n?(console.log("Editar usuario con ID:",n),this.router.navigate(["/editUser",n])):console.error("ID de usuario indefinido")}eliminarUsuario(n){n?(console.log("Eliminar usuario con ID:",n),this.usersService.deleteUser(n)):console.error("ID de usuario indefinido")}static#e=this.\u0275fac=function(r){return new(r||t)(G(Vg),G(Xn))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-administrar-usuarios"]],decls:2,vars:2,consts:[["class","containerUsers",4,"ngIf"],[4,"ngIf"],[1,"containerUsers"],[1,"fas","fa-users","btn","clientes"],[1,"fas","fa-user-plus","btn","agregar",3,"click"],[1,"encabezadoTabla"],[4,"ngFor","ngForOf"],[1,"far","fa-edit","btn","editar",3,"routerLink"],[1,"fas","fa-trash","btn","eliminar",3,"click"]],template:function(r,i){1&r&&(We(0,qee,17,3,"div",0),We(1,Gee,1,0,"app-spinner",1)),2&r&&(de("ngIf",!i.loading),ce(1),de("ngIf",i.loading))},dependencies:[Uu,Do,ho,Ju,Vx],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;transition:background-color .5s ease-in-out,color .5s ease-in-out,transform .3s ease-in-out;font-size:3vh;align-items:center;justify-content:center;text-align:center;list-style:none;text-decoration:none}.containerUsers[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh}table[_ngcontent-%COMP%]{width:80%;border-collapse:collapse;margin:3vh 0;border-radius:10px;overflow:hidden}.btn[_ngcontent-%COMP%]{margin:0 2vh;padding:1vh;color:#fff;border:none;cursor:pointer;border-radius:5px}.btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#2c3e50;transform:scale(1.3)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:2vh}.encabezadoTabla[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ebe8e8}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ecf0f1}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d4e6f1}.clientes[_ngcontent-%COMP%]{color:#2e9acc}.agregar[_ngcontent-%COMP%]{background-color:#0d572c;margin:0 4vh}.agregar[_ngcontent-%COMP%]:hover{background-color:#0d572c}.editar[_ngcontent-%COMP%]{color:#2ecc71}.eliminar[_ngcontent-%COMP%]{color:#e74c3c}"]})}return t})();class Lg{constructor(e){return e}}class rA{constructor(){return(0,Rn.getApps)()}}const iA=new me("angularfire2._apps"),Kee={provide:Lg,useFactory:function Zee(t){return t&&1===t.length?t[0]:new Lg((0,Rn.getApp)())},deps:[[new _i,iA]]},Qee={provide:rA,deps:[[new _i,iA]]};function Yee(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Lg(r)}}let Jee=(()=>{class t{constructor(n){(0,Rn.registerVersion)("angularfire",zu.full,"core"),(0,Rn.registerVersion)("angularfire",zu.full,"app"),(0,Rn.registerVersion)("angular",uw.full,n.toString())}static \u0275fac=function(r){return new(r||t)(he(Wo))};static \u0275mod=Nn({type:t});static \u0275inj=Yn({providers:[Kee,Qee]})}return t})();function Xee(t,...e){return{ngModule:Jee,providers:[{provide:iA,useFactory:Yee(t),multi:!0,deps:[Mt,Fr,hp,...e]}]}}const ete=Gu(Rn.initializeApp,!0);var tte=Ue(217);class oA{constructor(e){return e}}class jU{constructor(){return AC("auth")}}const sA=new me("angularfire2.auth-instances");function rte(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new oA(r)}}const ite={provide:jU,deps:[[new _i,sA]]},ote={provide:oA,useFactory:function nte(t,e){const n=vO("auth",t,e);return n&&new oA(n)},deps:[[new _i,sA],Lg]};let ste=(()=>{class t{constructor(){(0,Rn.registerVersion)("angularfire",zu.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nn({type:t});static \u0275inj=Yn({providers:[ote,ite]})}return t})();function ate(t,...e){return{ngModule:ste,providers:[{provide:sA,useFactory:rte(t),multi:!0,deps:[Mt,Fr,hp,rA,[new _i,Uy],...e]}]}}const ute=Gu(tte.o,!0),$U="firebasestorage.googleapis.com",HU="storageBucket";class Pn extends wt.ZR{constructor(e,n,r=0){super(aA(e),`Firebase Storage: ${n} (${aA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return aA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var En=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(En||{});function aA(t){return"storage/"+t}function uA(){return new Pn(En.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function cA(t){return new Pn(En.INVALID_ARGUMENT,t)}function WU(){return new Pn(En.APP_DELETED,"The Firebase app was deleted.")}function Ug(t,e){return new Pn(En.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bg(t){throw new Pn(En.INTERNAL_ERROR,"Internal error: "+t)}class hi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=hi.makeFromUrl(e,n)}catch{return new hi(e,"")}if(""===r.path)return r;throw function yte(t){return new Pn(En.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(ee){ee.path_=decodeURIComponent(ee.path)}const g=n.replace(/[.]/g,"\\."),B=[{regex:a,indices:{bucket:1,path:3},postModify:function o(ee){"/"===ee.path.charAt(ee.path.length-1)&&(ee.path_=ee.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${g}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${n===$U?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let ee=0;ee<B.length;ee++){const fe=B[ee],Be=fe.regex.exec(e);if(Be){let mn=Be[fe.indices.path];mn||(mn=""),r=new hi(Be[fe.indices.bucket],mn),fe.postModify(r);break}}if(null==r)throw function _te(t){return new Pn(En.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class bte{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CI(t){return"string"==typeof t||t instanceof String}function ZU(t){return lA()&&t instanceof Blob}function lA(){return typeof Blob<"u"}function dA(t,e,n,r){if(r<e)throw cA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw cA(`Invalid value for '${t}'. Expected ${n} or less.`)}function Xs(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function KU(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var nh=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(nh||{});class Pte{constructor(e,n,r,i,o,s,a,u,l,h,g,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,A)=>{this.resolve_=v,this.reject_=A,this.start_()})}start_(){const n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function Ate(t){return void 0!==t}(u)?o():o(u)}catch(u){s(u)}else if(null!==a){const u=uA();u.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,u):u)}else s(i.canceled?this.appDelete_?WU():function qU(){return new Pn(En.CANCELED,"User canceled the upload/download.")}():function zU(){return new Pn(En.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?n(0,new bI(!1,null,!0)):this.backoffId_=function Tte(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return 2===a}let l=!1;function h(...x){l||(l=!0,e.apply(null,x))}function g(x){i=setTimeout(()=>{i=null,t(v,u())},x)}function m(){o&&clearTimeout(o)}function v(x,...U){if(l)return void m();if(x)return m(),void h.call(null,x,...U);if(u()||s)return m(),void h.call(null,x,...U);let B;r<64&&(r*=2),1===a?(a=2,B=0):B=1e3*(r+Math.random()),g(B)}let A=!1;function R(x){A||(A=!0,m(),!l&&(null!==i?(x||(a=2),clearTimeout(i),g(0)):x||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,R(!0)},n),R}((r,i)=>{if(i)return void r(!1,new bI(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===nh.NO_ERROR,u=o.getStatus();if(!a||function QU(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==e.indexOf(t);return n||i||o}(u,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===nh.ABORT;return void r(!1,new bI(!1,null,h))}const l=-1!==this.successCodes_.indexOf(u);r(!0,new bI(l,o))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Dte(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bI{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Vte(...t){const e=function Fte(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(lA())return new Blob(t);throw new Pn(En.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const No={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hA{constructor(e,n){this.data=e,this.contentType=n||null}}function JU(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function XU(t,e){switch(t){case No.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw Ug(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case No.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ug(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function Ute(t){if(typeof atob>"u")throw function wte(t){return new Pn(En.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:Ug(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class eB{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw Ug(No.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function Hte(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ea{constructor(e,n){let r=0,i="";ZU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(ZU(this.data_)){const i=function Lte(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new ea(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ea(r,!0)}}static getBlob(...e){if(lA()){const n=e.map(r=>r instanceof ea?r.data_:r);return new ea(Vte.apply(null,n))}{const n=e.map(s=>CI(s)?function YU(t,e){switch(t){case No.RAW:return new hA(JU(e));case No.BASE64:case No.BASE64URL:return new hA(XU(t,e));case No.DATA_URL:return new hA(function jte(t){const e=new eB(t);return e.base64?XU(No.BASE64,e.rest):function Bte(t){let e;try{e=decodeURIComponent(t)}catch{throw Ug(No.DATA_URL,"Malformed data URL.")}return JU(e)}(e.rest)}(e),function $te(t){return new eB(t).contentType}(e))}throw uA()}(No.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new ea(i,!0)}}uploadData(){return this.data_}}function fA(t){let e;try{e=JSON.parse(t)}catch{return null}return function Rte(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function tB(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Gte(t,e){return e}class fi{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Gte}}let TI=null;function jg(){if(TI)return TI;const t=[];t.push(new fi("bucket")),t.push(new fi("generation")),t.push(new fi("metageneration")),t.push(new fi("name","fullPath",!0));const n=new fi("name");n.xform=function e(o,s){return function Wte(t){return!CI(t)||t.length<2?t:tB(t)}(s)},t.push(n);const i=new fi("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},t.push(i),t.push(new fi("timeCreated")),t.push(new fi("updated")),t.push(new fi("md5Hash",null,!0)),t.push(new fi("cacheControl",null,!0)),t.push(new fi("contentDisposition",null,!0)),t.push(new fi("contentEncoding",null,!0)),t.push(new fi("contentLanguage",null,!0)),t.push(new fi("contentType",null,!0)),t.push(new fi("metadata","customMetadata",!0)),TI=t,TI}function nB(t,e,n){const r=fA(e);return null===r?null:function Kte(t,e,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return function Zte(t,e){Object.defineProperty(t,"ref",{get:function n(){const o=new hi(t.bucket,t.fullPath);return e._makeStorageReference(o)}})}(r,t),r}(t,r,n)}const rB="prefixes",iB="items";class hs{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fs(t){if(!t)throw uA()}function rh(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function gte(){return new Pn(En.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function pte(){return new Pn(En.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function fte(t){return new Pn(En.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function mte(t){return new Pn(En.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function tne(t,e,n,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=Xs(e.bucketOnlyServerUrl(),t.host,t._protocol),l=t.maxOperationRetryTime,h=new hs(a,"GET",function Xte(t,e){return function n(r,i){const o=function Jte(t,e,n){const r=fA(n);return null===r?null:function Yte(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[rB])for(const i of n[rB]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new hi(e,o));r.prefixes.push(s)}if(n[iB])for(const i of n[iB]){const o=t._makeStorageReference(new hi(e,i.name));r.items.push(o)}return r}(t,e,r)}(t,e,i);return fs(null!==o),o}}(t,e.bucket),l);return h.urlParams=o,h.errorHandler=rh(e),h}function uB(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let B="";for(let ee=0;ee<2;ee++)B+=Math.random().toString().slice(2);return B}();s["Content-Type"]="multipart/related; boundary="+u;const l=function aB(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function one(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}(e,r,i),h=function pA(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}(l,n),v=ea.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+u+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===v)throw function GU(){return new Pn(En.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const A={name:l.fullPath},R=Xs(o,t.host,t._protocol),U=t.maxUploadRetryTime,k=new hs(R,"POST",function DI(t,e){return function n(r,i){const o=nB(t,i,e);return fs(null!==o),o}}(t,n),U);return k.urlParams=A,k.headers=s,k.body=v.uploadData(),k.errorHandler=rh(e),k}let lB=null;class lne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Bg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class dne extends lne{initXhr(){this.xhr_.responseType="text"}}function Oo(){return lB?lB():new dne}class bc{constructor(e,n){this._service=e,this._location=n instanceof hi?n:hi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bc(e,n)}get root(){const e=new hi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tB(this._location.path)}get storage(){return this._service}get parent(){const e=function zte(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new hi(this._location.bucket,e);return new bc(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw function Cte(t){return new Pn(En.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function hB(t,e,n){return _A.apply(this,arguments)}function _A(){return _A=(0,Q.Z)(function*(t,e,n){const i=yield function fB(t,e){null!=e&&"number"==typeof e.maxResults&&dA("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=tne(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Oo)}(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield hB(t,e,i.nextPageToken))}),_A.apply(this,arguments)}function bne(t){t._throwIfRoot("getDownloadURL");const e=function nne(t,e,n){const i=Xs(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new hs(i,"GET",function ene(t,e){return function n(r,i){const o=nB(t,i,e);return fs(null!==o),function Qte(t,e,n,r){const i=fA(e);if(null===i||!CI(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const g=t.fullPath;return Xs("/b/"+s(t.bucket)+"/o/"+s(g),n,r)+KU({alt:"media",token:l})})[0]}(o,i,t.host,t._protocol)}}(t,n),s);return a.errorHandler=function $g(t){const e=rh(t);return function n(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function hte(t){return new Pn(En.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),o.serverResponse=i.serverResponse,o}}(e),a}(t.storage,t._location,jg());return t.storage.makeRequestWithTokens(e,Oo).then(n=>{if(null===n)throw function Ete(){return new Pn(En.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function gB(t,e){if(t instanceof yA){const n=t;if(null==n._bucket)throw function vte(){return new Pn(En.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HU+"' property when initializing the app?")}();const r=new bc(n,n._bucket);return null!=e?gB(r,e):r}return void 0!==e?function pB(t,e){const n=function qte(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new hi(t._location.bucket,n);return new bc(t.storage,r)}(t,e):t}function mB(t,e){const n=e?.[HU];return null==n?null:hi.makeFromBucketSpec(n,t)}class yA{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=$U,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?hi.makeFromBucketSpec(i,this._host):mB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?hi.makeFromBucketSpec(this._url,e):mB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Q.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Q.Z)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new bte(WU());{const s=function kte(t,e,n,r,i,o,s=!0){const a=KU(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return function Nte(t,e){e&&(t["X-Firebase-GMPID"]=e)}(l,e),function Mte(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(l,n),function xte(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,o),function Ote(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(l,r),new Pte(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){var r=this;return(0,Q.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,o).getPromise()})()}}const _B="@firebase/storage",vB="storage";function Pne(t,e,n){return function dB(t,e,n){t._throwIfRoot("uploadBytes");const r=uB(t.storage,t._location,jg(),new ea(e,!0),n);return t.storage.makeRequestWithTokens(r,Oo).then(i=>({metadata:i,ref:t}))}(t=(0,wt.m9)(t),e,n)}function Mne(t){return function Ene(t){const e={prefixes:[],items:[]};return hB(t,e).then(()=>e)}(t=(0,wt.m9)(t))}function xne(t){return bne(t=(0,wt.m9)(t))}function Nne(t,e){return function Sne(t,e){if(e&&function Dne(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof yA)return function Ane(t,e){return new bc(t,e)}(t,e);throw cA("To use ref(service, url), the first argument must be a Storage instance.")}return gB(t,e)}(t=(0,wt.m9)(t),e)}function One(t=(0,Rn.getApp)(),e){t=(0,wt.m9)(t);const r=(0,Rn._getProvider)(t,vB).getImmediate({identifier:e}),i=(0,wt.P0)("storage");return i&&function kne(t,e,n,r={}){!function Rne(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,wt.Sg)(i,t.app.options.projectId))}(t,e,n,r)}(r,...i),r}function Fne(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new yA(n,r,i,e,Rn.SDK_VERSION)}!function Vne(){(0,Rn._registerComponent)(new YC.wA(vB,Fne,"PUBLIC").setMultipleInstances(!0)),(0,Rn.registerVersion)(_B,"0.12.0",""),(0,Rn.registerVersion)(_B,"0.12.0","esm2017")}();class SI{constructor(e){return e}}const IB="storage",vA=new me("angularfire2.storage-instances");function Bne(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new SI(r)}}const jne={provide:class Lne{constructor(){return AC(IB)}},deps:[[new _i,vA]]},$ne={provide:SI,useFactory:function Une(t,e){const n=vO(IB,t,e);return n&&new SI(n)},deps:[[new _i,vA],Lg]};let Hne=(()=>{class t{constructor(){(0,Rn.registerVersion)("angularfire",zu.full,"gcs")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nn({type:t});static \u0275inj=Yn({providers:[$ne,jne]})}return t})();function zne(t,...e){return{ngModule:Hne,providers:[{provide:vA,useFactory:Bne(t),multi:!0,deps:[Mt,Fr,hp,rA,[new _i,jU],[new _i,Uy],...e]}]}}const EB=Gu(xne,!0),qne=Gu(One,!0),Gne=Gu(Mne,!0),wB=Gu(Nne,!0),Wne=Gu(Pne,!0);function Zne(t,e){if(1&t&&(y(0,"div"),J(1,"img",6),E()),2&t){const n=e.$implicit;ce(1),de("src",n,l_)}}const Kne=[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"inicio",component:l7},{path:"login",component:sZ},{path:"registrar-usuario",component:fZ},{path:"restablecer-password",component:mZ},{path:"verificar-correo",component:_Z},{path:"addUser",component:Dee},{path:"editUser",component:LU},{path:"editUser/:usuarioID",component:LU},{path:"simulador",component:See},{path:"ubicanos",component:Ree},{path:"filtrar",component:UU},{path:"dashboard",component:dee,canMatch:[NO],data:{allowedRoles:["admin"]},children:[{path:"admin",component:Wee},{path:"filtrar",component:UU},{path:"adminDocs",component:(()=>{class t{constructor(n){this.storage=n,this.imagenes=[]}CargarArchivos(n){const r=n.target.files;for(let i=0;i<r.length;i++){const o=r[i].name+"_"+Date.now(),s=wB(this.storage,`docs/${o}`);Wne(s,r[i]).then(a=>{console.log("Imagen subida"),EB(s).then(u=>{console.log(`URL de la imagen: ${u}`),this.imagenes.push(u)})}).catch(a=>{console.log("Error al subir la imagen")})}console.log(`estas son las imagenes ${this.imagenes}`)}GetImages(){var n=this;const r=wB(this.storage,"docs/");Gne(r).then(function(){var i=(0,Q.Z)(function*(o){n.imagenes=[];for(let s of o.items){const a=yield EB(s);n.imagenes.push(a),console.log(`aqu\xed las ${a}`)}});return function(o){return i.apply(this,arguments)}}()).catch(i=>{})}static#e=this.\u0275fac=function(r){return new(r||t)(G(SI))};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-administrar-archivos"]],decls:10,vars:2,consts:[["type","file","accept",".png, .jpg, .jpeg, .pdf ","id","files","multiple","",1,"btnSubir",3,"change"],["for","files"],[1,"fas","fa-upload"],["alt","imagen subida",3,"src"],[1,"contenedor-imagenes"],[4,"ngFor","ngForOf"],["alt","imagen subida","width","100 ",3,"src"]],template:function(r,i){1&r&&(y(0,"p"),T(1,"administrar-archivos works!"),E(),y(2,"input",0),Le("change",function(s){return i.CargarArchivos(s)}),E(),y(3,"label",1),J(4,"i",2),E(),J(5,"img",3),y(6,"p"),T(7,"subida de imagenes"),E(),y(8,"div",4),We(9,Zne,2,1,"div",5),E()),2&r&&(ce(5),kw("src",i.imagenes[0],l_),ce(4),de("ngForOf",i.imagenes))},dependencies:[Uu],styles:[".btnSubir[_ngcontent-%COMP%]{width:auto;color:#000;font-size:20px;font-weight:700;cursor:pointer;transition:.3s;display:flex;justify-content:center;align-items:center;text-align:center;text-decoration:none}"]})}return t})()}]},{path:"dashboard",component:_ee,canMatch:[NO],data:{allowedRoles:["soc"]}},{path:"**",redirectTo:"login",pathMatch:"full"}];let Qne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=Yn({imports:[pO.forRoot(Kne),pO]})}return t})(),Yne=(()=>{class t{constructor(){this.title="firebase"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Dn({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&J(0,"router-outlet")},dependencies:[Py]})}return t})();const IA_firebaseConfig={apiKey:"AIzaSyDI_LOMFpmrsjiQg9pp5nVdBKI09sc5h2U",authDomain:"copacgestion.firebaseapp.com",projectId:"copacgestion",storageBucket:"copacgestion.appspot.com",messagingSenderId:"495804268452",appId:"1:495804268452:web:1a7f45e940a1bb9cff8b31"};!function $J(t,e){const n="object"==typeof t?t:(0,Rn.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Rn._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,wt.P0)("firestore");o&&WL(i,...o)}}((0,Rn.initializeApp)(IA_firebaseConfig));let Xne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nn({type:t,bootstrap:[Yne]});static#n=this.\u0275inj=Yn({imports:[i8,Qne,rZ,nZ,o7.initializeApp(IA_firebaseConfig),Xee(()=>ete(IA_firebaseConfig)),zne(()=>qne()),ate(()=>ute()),oee]})}return t})();n8().bootstrapModule(Xne).catch(t=>console.error(t))},106:($i,Bn,Ue)=>{Ue.d(Bn,{Z:()=>jn});var D=Ue(58),K=Ue(537),F=Ue(534),Me=Ue(879);class bt{constructor(qe,Ge){this._delegate=qe,this.firebase=Ge,(0,F._addComponent)(qe,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(qe,Ge=F._DEFAULT_ENTRY_NAME){var $n;this._delegate.checkDestroyed();const on=this._delegate.container.getProvider(qe);return!on.isInitialized()&&"EXPLICIT"===(null===($n=on.getComponent())||void 0===$n?void 0:$n.instantiationMode)&&on.initialize(),on.getImmediate({identifier:Ge})}_removeServiceInstance(qe,Ge=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(Ge)}_addComponent(qe){(0,F._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,F._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const wn=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function _t(){const ht=function zt(ht){const qe={},Ge={__esModule:!0,initializeApp:function ut(tt,ae={}){const gt=F.initializeApp(tt,ae);if((0,D.r3)(qe,gt.name))return qe[gt.name];const Wt=new ht(gt,Ge);return qe[gt.name]=Wt,Wt},app:on,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function zr(tt){const ae=tt.name,gt=ae.replace("-compat","");if(F._registerComponent(tt)&&"PUBLIC"===tt.type){const Wt=(_n=on())=>{if("function"!=typeof _n[gt])throw wn.create("invalid-app-argument",{appName:ae});return _n[gt]()};void 0!==tt.serviceProps&&(0,D.ZB)(Wt,tt.serviceProps),Ge[gt]=Wt,ht.prototype[gt]=function(..._n){return this._getService.bind(this,ae).apply(this,tt.multipleInstances?_n:[])}}return"PUBLIC"===tt.type?Ge[gt]:null},removeApp:function $n(tt){delete qe[tt]},useAsService:function Mn(tt,ae){return"serverAuth"===ae?null:ae},modularAPIs:F}};function on(tt){if(!(0,D.r3)(qe,tt=tt||F._DEFAULT_ENTRY_NAME))throw wn.create("no-app",{appName:tt});return qe[tt]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function xt(){return Object.keys(qe).map(tt=>qe[tt])}}),on.App=ht,Ge}(bt);return ht.INTERNAL=Object.assign(Object.assign({},ht.INTERNAL),{createFirebaseNamespace:_t,extendNamespace:function qe(Ge){(0,D.ZB)(ht,Ge)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),ht}(),le=new Me.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ht=self.firebase.SDK_VERSION;ht&&ht.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const jn=X;!function Tt(ht){(0,F.registerVersion)("@firebase/app-compat","0.2.25",ht)}()},534:($i,Bn,Ue)=>{Ue.r(Bn),Ue.d(Bn,{FirebaseError:()=>Me.ZR,SDK_VERSION:()=>Wi,_DEFAULT_ENTRY_NAME:()=>Ri,_addComponent:()=>Wr,_addOrOverwriteComponent:()=>Zr,_apps:()=>dr,_clearComponents:()=>bn,_components:()=>Gr,_getProvider:()=>Nt,_registerComponent:()=>nr,_removeServiceInstance:()=>Kr,deleteApp:()=>xn,getApp:()=>Mi,getApps:()=>qn,initializeApp:()=>Zi,onLog:()=>na,registerVersion:()=>Qr,setLogLevel:()=>ko});var D=Ue(861),K=Ue(537),F=Ue(879),Me=Ue(58);const bt=(L,N)=>N.some(se=>L instanceof se);let rn,wn;const X=new WeakMap,le=new WeakMap,Re=new WeakMap,Ye=new WeakMap,Tt=new WeakMap;let qe={get(L,N,se){if(L instanceof IDBTransaction){if("done"===N)return le.get(L);if("objectStoreNames"===N)return L.objectStoreNames||Re.get(L);if("store"===N)return se.objectStoreNames[1]?void 0:se.objectStore(se.objectStoreNames[0])}return ut(L[N])},set:(L,N,se)=>(L[N]=se,!0),has:(L,N)=>L instanceof IDBTransaction&&("done"===N||"store"===N)||N in L};function on(L){return"function"==typeof L?function $n(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _t(){return wn||(wn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...N){return L.apply(xt(this),N),ut(X.get(this))}:function(...N){return ut(L.apply(xt(this),N))}:function(N,...se){const we=L.call(xt(this),N,...se);return Re.set(we,N.sort?N.sort():[N]),ut(we)}}(L):(L instanceof IDBTransaction&&function ht(L){if(le.has(L))return;const N=new Promise((se,we)=>{const it=()=>{L.removeEventListener("complete",ct),L.removeEventListener("error",Z),L.removeEventListener("abort",Z)},ct=()=>{se(),it()},Z=()=>{we(L.error||new DOMException("AbortError","AbortError")),it()};L.addEventListener("complete",ct),L.addEventListener("error",Z),L.addEventListener("abort",Z)});le.set(L,N)}(L),bt(L,function zt(){return rn||(rn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,qe):L)}function ut(L){if(L instanceof IDBRequest)return function jn(L){const N=new Promise((se,we)=>{const it=()=>{L.removeEventListener("success",ct),L.removeEventListener("error",Z)},ct=()=>{se(ut(L.result)),it()},Z=()=>{we(L.error),it()};L.addEventListener("success",ct),L.addEventListener("error",Z)});return N.then(se=>{se instanceof IDBCursor&&X.set(se,L)}).catch(()=>{}),Tt.set(N,L),N}(L);if(Ye.has(L))return Ye.get(L);const N=on(L);return N!==L&&(Ye.set(L,N),Tt.set(N,L)),N}const xt=L=>Tt.get(L),tt=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],gt=new Map;function Wt(L,N){if(!(L instanceof IDBDatabase)||N in L||"string"!=typeof N)return;if(gt.get(N))return gt.get(N);const se=N.replace(/FromIndex$/,""),we=N!==se,it=ae.includes(se);if(!(se in(we?IDBIndex:IDBObjectStore).prototype)||!it&&!tt.includes(se))return;const ct=function(){var Z=(0,D.Z)(function*(un,...Se){const ot=this.transaction(un,it?"readwrite":"readonly");let lu=ot.store;return we&&(lu=lu.index(Se.shift())),(yield Promise.all([lu[se](...Se),it&&ot.done]))[0]});return function(Se){return Z.apply(this,arguments)}}();return gt.set(N,ct),ct}!function Ge(L){qe=L(qe)}(L=>({...L,get:(N,se,we)=>Wt(N,se)||L.get(N,se,we),has:(N,se)=>!!Wt(N,se)||L.has(N,se)}));class _n{constructor(N){this.container=N}getPlatformInfoString(){return this.container.getProviders().map(se=>{if(function Cn(L){const N=L.getComponent();return"VERSION"===N?.type}(se)){const we=se.getImmediate();return`${we.library}/${we.version}`}return null}).filter(se=>se).join(" ")}}const Di="@firebase/app",Xe=new F.Yd("@firebase/app"),Ri="[DEFAULT]",Pi={[Di]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dr=new Map,Gr=new Map;function Wr(L,N){try{L.container.addComponent(N)}catch(se){Xe.debug(`Component ${N.name} failed to register with FirebaseApp ${L.name}`,se)}}function Zr(L,N){L.container.addOrOverwriteComponent(N)}function nr(L){const N=L.name;if(Gr.has(N))return Xe.debug(`There were multiple attempts to register component ${N}.`),!1;Gr.set(N,L);for(const se of dr.values())Wr(se,L);return!0}function Nt(L,N){const se=L.container.getProvider("heartbeat").getImmediate({optional:!0});return se&&se.triggerHeartbeat(),L.container.getProvider(N)}function Kr(L,N,se=Ri){Nt(L,N).clearInstance(se)}function bn(){Gr.clear()}const an=new Me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tn{constructor(N,se,we){this._isDeleted=!1,this._options=Object.assign({},N),this._config=Object.assign({},se),this._name=se.name,this._automaticDataCollectionEnabled=se.automaticDataCollectionEnabled,this._container=we,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(N){this.checkDestroyed(),this._automaticDataCollectionEnabled=N}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(N){this._isDeleted=N}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const Wi="10.7.1";function Zi(L,N={}){let se=L;"object"!=typeof N&&(N={name:N});const we=Object.assign({name:Ri,automaticDataCollectionEnabled:!1},N),it=we.name;if("string"!=typeof it||!it)throw an.create("bad-app-name",{appName:String(it)});if(se||(se=(0,Me.aH)()),!se)throw an.create("no-options");const ct=dr.get(it);if(ct){if((0,Me.vZ)(se,ct.options)&&(0,Me.vZ)(we,ct.config))return ct;throw an.create("duplicate-app",{appName:it})}const Z=new K.H0(it);for(const Se of Gr.values())Z.addComponent(Se);const un=new Tn(se,we,Z);return dr.set(it,un),un}function Mi(L=Ri){const N=dr.get(L);if(!N&&L===Ri&&(0,Me.aH)())return Zi();if(!N)throw an.create("no-app",{appName:L});return N}function qn(){return Array.from(dr.values())}function xn(L){return hr.apply(this,arguments)}function hr(){return(hr=(0,D.Z)(function*(L){const N=L.name;dr.has(N)&&(dr.delete(N),yield Promise.all(L.container.getProviders().map(se=>se.delete())),L.isDeleted=!0)})).apply(this,arguments)}function Qr(L,N,se){var we;let it=null!==(we=Pi[L])&&void 0!==we?we:L;se&&(it+=`-${se}`);const ct=it.match(/\s|\//),Z=N.match(/\s|\//);if(ct||Z){const un=[`Unable to register library "${it}" with version "${N}":`];return ct&&un.push(`library name "${it}" contains illegal characters (whitespace or "/")`),ct&&Z&&un.push("and"),Z&&un.push(`version name "${N}" contains illegal characters (whitespace or "/")`),void Xe.warn(un.join(" "))}nr(new K.wA(`${it}-version`,()=>({library:it,version:N}),"VERSION"))}function na(L,N){if(null!==L&&"function"!=typeof L)throw an.create("invalid-log-argument");(0,F.Am)(L,N)}function ko(L){(0,F.Ub)(L)}const ps="firebase-heartbeat-database",Ki=1,M="firebase-heartbeat-store";let S=null;function w(){return S||(S=function zr(L,N,{blocked:se,upgrade:we,blocking:it,terminated:ct}={}){const Z=indexedDB.open(L,N),un=ut(Z);return we&&Z.addEventListener("upgradeneeded",Se=>{we(ut(Z.result),Se.oldVersion,Se.newVersion,ut(Z.transaction),Se)}),se&&Z.addEventListener("blocked",Se=>se(Se.oldVersion,Se.newVersion,Se)),un.then(Se=>{ct&&Se.addEventListener("close",()=>ct()),it&&Se.addEventListener("versionchange",ot=>it(ot.oldVersion,ot.newVersion,ot))}).catch(()=>{}),un}(ps,Ki,{upgrade:(L,N)=>{0===N&&L.createObjectStore(M)}}).catch(L=>{throw an.create("idb-open",{originalErrorMessage:L.message})})),S}function I(){return(I=(0,D.Z)(function*(L){try{return yield(yield w()).transaction(M).objectStore(M).get(be(L))}catch(N){if(N instanceof Me.ZR)Xe.warn(N.message);else{const se=an.create("idb-get",{originalErrorMessage:N?.message});Xe.warn(se.message)}}})).apply(this,arguments)}function P(L,N){return Y.apply(this,arguments)}function Y(){return(Y=(0,D.Z)(function*(L,N){try{const we=(yield w()).transaction(M,"readwrite");yield we.objectStore(M).put(N,be(L)),yield we.done}catch(se){if(se instanceof Me.ZR)Xe.warn(se.message);else{const we=an.create("idb-set",{originalErrorMessage:se?.message});Xe.warn(we.message)}}})).apply(this,arguments)}function be(L){return`${L.name}!${L.options.appId}`}class It{constructor(N){this.container=N,this._heartbeatsCache=null;const se=this.container.getProvider("app").getImmediate();this._storage=new xe(se),this._heartbeatsCachePromise=this._storage.read().then(we=>(this._heartbeatsCache=we,we))}triggerHeartbeat(){var N=this;return(0,D.Z)(function*(){var se,we;const ct=N.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Z=ye();if((null!=(null===(se=N._heartbeatsCache)||void 0===se?void 0:se.heartbeats)||(N._heartbeatsCache=yield N._heartbeatsCachePromise,null!=(null===(we=N._heartbeatsCache)||void 0===we?void 0:we.heartbeats)))&&N._heartbeatsCache.lastSentHeartbeatDate!==Z&&!N._heartbeatsCache.heartbeats.some(un=>un.date===Z))return N._heartbeatsCache.heartbeats.push({date:Z,agent:ct}),N._heartbeatsCache.heartbeats=N._heartbeatsCache.heartbeats.filter(un=>{const Se=new Date(un.date).valueOf();return Date.now()-Se<=2592e6}),N._storage.overwrite(N._heartbeatsCache)})()}getHeartbeatsHeader(){var N=this;return(0,D.Z)(function*(){var se;if(null===N._heartbeatsCache&&(yield N._heartbeatsCachePromise),null==(null===(se=N._heartbeatsCache)||void 0===se?void 0:se.heartbeats)||0===N._heartbeatsCache.heartbeats.length)return"";const we=ye(),{heartbeatsToSend:it,unsentEntries:ct}=function Ft(L,N=1024){const se=[];let we=L.slice();for(const it of L){const ct=se.find(Z=>Z.agent===it.agent);if(ct){if(ct.dates.push(it.date),Qn(se)>N){ct.dates.pop();break}}else if(se.push({agent:it.agent,dates:[it.date]}),Qn(se)>N){se.pop();break}we=we.slice(1)}return{heartbeatsToSend:se,unsentEntries:we}}(N._heartbeatsCache.heartbeats),Z=(0,Me.L)(JSON.stringify({version:2,heartbeats:it}));return N._heartbeatsCache.lastSentHeartbeatDate=we,ct.length>0?(N._heartbeatsCache.heartbeats=ct,yield N._storage.overwrite(N._heartbeatsCache)):(N._heartbeatsCache.heartbeats=[],N._storage.overwrite(N._heartbeatsCache)),Z})()}}function ye(){return(new Date).toISOString().substring(0,10)}class xe{constructor(N){this.app=N,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,Me.hl)()&&(0,Me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var N=this;return(0,D.Z)(function*(){if(yield N._canUseIndexedDBPromise){const we=yield function b(L){return I.apply(this,arguments)}(N.app);return we?.heartbeats?we:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(N){var se=this;return(0,D.Z)(function*(){var we;if(yield se._canUseIndexedDBPromise){const ct=yield se.read();return P(se.app,{lastSentHeartbeatDate:null!==(we=N.lastSentHeartbeatDate)&&void 0!==we?we:ct.lastSentHeartbeatDate,heartbeats:N.heartbeats})}})()}add(N){var se=this;return(0,D.Z)(function*(){var we;if(yield se._canUseIndexedDBPromise){const ct=yield se.read();return P(se.app,{lastSentHeartbeatDate:null!==(we=N.lastSentHeartbeatDate)&&void 0!==we?we:ct.lastSentHeartbeatDate,heartbeats:[...ct.heartbeats,...N.heartbeats]})}})()}}function Qn(L){return(0,Me.L)(JSON.stringify({version:2,heartbeats:L})).length}!function gs(L){nr(new K.wA("platform-logger",N=>new _n(N),"PRIVATE")),nr(new K.wA("heartbeat",N=>new It(N),"PRIVATE")),Qr(Di,"0.9.25",L),Qr(Di,"0.9.25","esm2017"),Qr("fire-js","")}("")},537:($i,Bn,Ue)=>{Ue.d(Bn,{H0:()=>zt,wA:()=>F});var D=Ue(861),K=Ue(58);class F{constructor(X,le,Re){this.name=X,this.instanceFactory=le,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const Me="[DEFAULT]";class bt{constructor(X,le){this.name=X,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const le=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(le)){const Re=new K.BH;if(this.instancesDeferred.set(le,Re),this.isInitialized(le)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:le});Ye&&Re.resolve(Ye)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(X){var le;const Re=this.normalizeInstanceIdentifier(X?.identifier),Ye=null!==(le=X?.optional)&&void 0!==le&&le;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(Tt){if(Ye)return null;throw Tt}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function wn(_t){return"EAGER"===_t.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:Me})}catch{}for(const[le,Re]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(le);try{const Tt=this.getOrInitializeService({instanceIdentifier:Ye});Re.resolve(Tt)}catch{}}}}clearInstance(X=Me){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,D.Z)(function*(){const le=Array.from(X.instances.values());yield Promise.all([...le.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...le.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=Me){return this.instances.has(X)}getOptions(X=Me){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:le={}}=X,Re=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:Re,options:le});for(const[Tt,jn]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(Tt)&&jn.resolve(Ye);return Ye}onInit(X,le){var Re;const Ye=this.normalizeInstanceIdentifier(le),Tt=null!==(Re=this.onInitCallbacks.get(Ye))&&void 0!==Re?Re:new Set;Tt.add(X),this.onInitCallbacks.set(Ye,Tt);const jn=this.instances.get(Ye);return jn&&X(jn,Ye),()=>{Tt.delete(X)}}invokeOnInitCallbacks(X,le){const Re=this.onInitCallbacks.get(le);if(Re)for(const Ye of Re)try{Ye(X,le)}catch{}}getOrInitializeService({instanceIdentifier:X,options:le={}}){let Re=this.instances.get(X);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:(_t=X,_t===Me?void 0:_t),options:le}),this.instances.set(X,Re),this.instancesOptions.set(X,le),this.invokeOnInitCallbacks(Re,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,Re)}catch{}var _t;return Re||null}normalizeInstanceIdentifier(X=Me){return this.component?this.component.multipleInstances?X:Me:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class zt{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const le=this.getProvider(X.name);if(le.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);le.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const le=new bt(X,this);return this.providers.set(X,le),le}getProviders(){return Array.from(this.providers.values())}}},879:($i,Bn,Ue)=>{Ue.d(Bn,{Am:()=>_t,Ub:()=>zt,Yd:()=>wn,in:()=>K});const D=[];var K=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(K||{});const F={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Me=K.INFO,bt={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},rn=(X,le,...Re)=>{if(le<X.logLevel)return;const Ye=(new Date).toISOString(),Tt=bt[le];if(!Tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Tt](`[${Ye}]  ${X.name}:`,...Re)};class wn{constructor(le){this.name=le,this._logLevel=Me,this._logHandler=rn,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in K))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?F[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...le),this._logHandler(this,K.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...le),this._logHandler(this,K.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,K.INFO,...le),this._logHandler(this,K.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,K.WARN,...le),this._logHandler(this,K.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...le),this._logHandler(this,K.ERROR,...le)}}function zt(X){D.forEach(le=>{le.setLogLevel(X)})}function _t(X,le){for(const Re of D){let Ye=null;le&&le.level&&(Ye=F[le.level]),Re.userLogHandler=null===X?null:(Tt,jn,...ht)=>{const qe=ht.map(Ge=>{if(null==Ge)return null;if("string"==typeof Ge)return Ge;if("number"==typeof Ge||"boolean"==typeof Ge)return Ge.toString();if(Ge instanceof Error)return Ge.message;try{return JSON.stringify(Ge)}catch{return null}}).filter(Ge=>Ge).join(" ");jn>=(Ye??Tt.logLevel)&&X({level:K[jn].toLowerCase(),message:qe,args:ht,type:Tt.name})}}}},365:($i,Bn,Ue)=>{Ue.r(Bn);var D=Ue(861),K=Ue(106),F=Ue(217),Me=Ue(58),wn=(Ue(534),Ue(879),Ue(537));function zt(){return window}function le(){return le=(0,D.Z)(function*(w,b,I){var P;const{BuildInfo:Y}=zt();(0,F.au)(b.sessionId,"AuthEvent did not contain a session ID");const be=yield function Ge(w){return $n.apply(this,arguments)}(b.sessionId),Ae={};return(0,F.av)()?Ae.ibi=Y.packageName:(0,F.aw)()?Ae.apn=Y.packageName:(0,F.ax)(w,"operation-not-supported-in-this-environment"),Y.displayName&&(Ae.appDisplayName=Y.displayName),Ae.sessionId=be,(0,F.ay)(w,I,b.type,void 0,null!==(P=b.eventId)&&void 0!==P?P:void 0,Ae)}),le.apply(this,arguments)}function Ye(){return(Ye=(0,D.Z)(function*(w){const{BuildInfo:b}=zt(),I={};(0,F.av)()?I.iosBundleId=b.packageName:(0,F.aw)()?I.androidPackageName=b.packageName:(0,F.ax)(w,"operation-not-supported-in-this-environment"),yield(0,F.az)(w,I)})).apply(this,arguments)}function ht(){return(ht=(0,D.Z)(function*(w,b,I){const{cordova:P}=zt();let Y=()=>{};try{yield new Promise((be,Ae)=>{let He=null;function It(){var xe;be();const Qn=null===(xe=P.plugins.browsertab)||void 0===xe?void 0:xe.close;"function"==typeof Qn&&Qn(),"function"==typeof I?.close&&I.close()}function ye(){He||(He=window.setTimeout(()=>{Ae((0,F.aB)(w,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&ye()}b.addPassiveListener(It),document.addEventListener("resume",ye,!1),(0,F.aw)()&&document.addEventListener("visibilitychange",Ft,!1),Y=()=>{b.removePassiveListener(It),document.removeEventListener("resume",ye,!1),document.removeEventListener("visibilitychange",Ft,!1),He&&window.clearTimeout(He)}})}finally{Y()}})).apply(this,arguments)}function $n(){return($n=(0,D.Z)(function*(w){const b=function on(w){if((0,F.au)(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const b=new ArrayBuffer(w.length),I=new Uint8Array(b);for(let P=0;P<w.length;P++)I[P]=w.charCodeAt(P);return I}(w),I=yield crypto.subtle.digest("SHA-256",b);return Array.from(new Uint8Array(I)).map(Y=>Y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class xt extends F.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(b=>{this.resolveInialized=b})}addPassiveListener(b){this.passiveListeners.add(b)}removePassiveListener(b){this.passiveListeners.delete(b)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(b){return this.resolveInialized(),this.passiveListeners.forEach(I=>I(b)),super.onEvent(b)}initialized(){var b=this;return(0,D.Z)(function*(){yield b.initPromise})()}}function tt(w){return ae.apply(this,arguments)}function ae(){return(ae=(0,D.Z)(function*(w){const b=yield _n()._get(Cn(w));return b&&(yield _n()._remove(Cn(w))),b})).apply(this,arguments)}function Wt(){const w=[];for(let I=0;I<20;I++){const P=Math.floor(62*Math.random());w.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(P))}return w.join("")}function _n(){return(0,F.aE)(F.b)}function Cn(w){return(0,F.aF)("authEvent",w.config.apiKey,w.name)}function Xe(w){if(!w?.includes("?"))return{};const[b,...I]=w.split("?");return(0,Me.zd)(I.join("?"))}const H=class Hi{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aG,this._overrideRedirectResult=F.aH}_initialize(b){var I=this;return(0,D.Z)(function*(){const P=b._key();let Y=I.eventManagers.get(P);return Y||(Y=new xt(b),I.eventManagers.set(P,Y),I.attachCallbackListeners(b,Y)),Y})()}_openPopup(b){(0,F.ax)(b,"operation-not-supported-in-this-environment")}_openRedirect(b,I,P,Y){var be=this;return(0,D.Z)(function*(){!function qe(w){var b,I,P,Y,be,Ae,He,It,ye,Ft;const xe=zt();(0,F.aC)("function"==typeof(null===(b=xe?.universalLinks)||void 0===b?void 0:b.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aC)(typeof(null===(I=xe?.BuildInfo)||void 0===I?void 0:I.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aC)("function"==typeof(null===(be=null===(Y=null===(P=xe?.cordova)||void 0===P?void 0:P.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===be?void 0:be.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aC)("function"==typeof(null===(It=null===(He=null===(Ae=xe?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===He?void 0:He.browsertab)||void 0===It?void 0:It.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aC)("function"==typeof(null===(Ft=null===(ye=xe?.cordova)||void 0===ye?void 0:ye.InAppBrowser)||void 0===Ft?void 0:Ft.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(b);const Ae=yield be._initialize(b);yield Ae.initialized(),Ae.resetRedirect(),(0,F.aI)(),yield be._originValidation(b);const He=function zr(w,b,I=null){return{type:b,eventId:I,urlResponse:null,sessionId:Wt(),postBody:null,tenantId:w.tenantId,error:(0,F.aB)(w,"no-auth-event")}}(b,P,Y);yield function Mn(w,b){return _n()._set(Cn(w),b)}(b,He);const It=yield function X(w,b,I){return le.apply(this,arguments)}(b,He,I),ye=yield function Tt(w){const{cordova:b}=zt();return new Promise(I=>{b.plugins.browsertab.isAvailable(P=>{let Y=null;P?b.plugins.browsertab.openUrl(w):Y=b.InAppBrowser.open(w,(0,F.aA)()?"_blank":"_system","location=yes"),I(Y)})})}(It);return function jn(w,b,I){return ht.apply(this,arguments)}(b,Ae,ye)})()}_isIframeWebStorageSupported(b,I){throw new Error("Method not implemented.")}_originValidation(b){const I=b._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function Re(w){return Ye.apply(this,arguments)}(b)),this.originValidationPromises[I]}attachCallbackListeners(b,I){const{universalLinks:P,handleOpenURL:Y,BuildInfo:be}=zt(),Ae=setTimeout((0,D.Z)(function*(){yield tt(b),I.onEvent(q())}),500),He=function(){var Ft=(0,D.Z)(function*(xe){clearTimeout(Ae);const Qn=yield tt(b);let gs=null;Qn&&xe?.url&&(gs=function gt(w,b){var I,P;const Y=function Ai(w){const b=Xe(w),I=b.link?decodeURIComponent(b.link):void 0,P=Xe(I).link,Y=b.deep_link_id?decodeURIComponent(b.deep_link_id):void 0;return Xe(Y).link||Y||P||I||w}(b);if(Y.includes("/__/auth/callback")){const be=Xe(Y),Ae=be.firebaseError?function Di(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(be.firebaseError)):null,He=null===(P=null===(I=Ae?.code)||void 0===I?void 0:I.split("auth/"))||void 0===P?void 0:P[1],It=He?(0,F.aB)(He):null;return It?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:It,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:Y,postBody:null}}return null}(Qn,xe.url)),I.onEvent(gs||q())});return function(Qn){return Ft.apply(this,arguments)}}();typeof P<"u"&&"function"==typeof P.subscribe&&P.subscribe(null,He);const It=Y,ye=`${be.packageName.toLowerCase()}://`;zt().handleOpenURL=function(){var Ft=(0,D.Z)(function*(xe){if(xe.toLowerCase().startsWith(ye)&&He({url:xe}),"function"==typeof It)try{It(xe)}catch(Qn){console.error(Qn)}});return function(xe){return Ft.apply(this,arguments)}}()}};function q(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.aB)("no-auth-event")}}function ge(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function Ee(w=(0,Me.z$)()){return!("file:"!==ge()&&"ionic:"!==ge()&&"capacitor:"!==ge()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function sn(){try{const w=self.localStorage,b=F.aN();if(w)return w.setItem(b,"1"),w.removeItem(b),!function Lt(w=(0,Me.z$)()){return function yt(){return(0,Me.w1)()&&11===document?.documentMode}()||function Qt(w=(0,Me.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,Me.hl)()}catch{return Hn()&&(0,Me.hl)()}return!1}function Hn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zn(){return(function at(){return"http:"===ge()||"https:"===ge()}()||(0,Me.ru)()||Ee())&&!function Fe(){return(0,Me.b$)()||(0,Me.UG)()}()&&sn()&&!Hn()}function tr(){return Ee()&&typeof document<"u"}function Si(){return(Si=(0,D.Z)(function*(){return!!tr()&&new Promise(w=>{const b=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(b),w(!0)})})})).apply(this,arguments)}const vt={LOCAL:"local",NONE:"none",SESSION:"session"},qi=F.aC,Gi="persistence";function Pi(w){return dr.apply(this,arguments)}function dr(){return(dr=(0,D.Z)(function*(w){yield w._initializationPromise;const b=Wr(),I=F.aF(Gi,w.config.apiKey,w.name);b&&b.setItem(I,w._getPersistence())})).apply(this,arguments)}function Wr(){var w;try{return(null===(w=function zi(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const Zr=F.aC;class nr{constructor(){this.browserResolver=F.aE(F.k),this.cordovaResolver=F.aE(H),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aG,this._overrideRedirectResult=F.aH}_initialize(b){var I=this;return(0,D.Z)(function*(){return yield I.selectUnderlyingResolver(),I.assertedUnderlyingResolver._initialize(b)})()}_openPopup(b,I,P,Y){var be=this;return(0,D.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openPopup(b,I,P,Y)})()}_openRedirect(b,I,P,Y){var be=this;return(0,D.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openRedirect(b,I,P,Y)})()}_isIframeWebStorageSupported(b,I){this.assertedUnderlyingResolver._isIframeWebStorageSupported(b,I)}_originValidation(b){return this.assertedUnderlyingResolver._originValidation(b)}get _shouldInitProactively(){return tr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var b=this;return(0,D.Z)(function*(){if(b.underlyingResolver)return;const I=yield function Nr(){return Si.apply(this,arguments)}();b.underlyingResolver=I?b.cordovaResolver:b.browserResolver})()}}function Nt(w){return w.unwrap()}function bn(w){return an(w)}function an(w){const{_tokenResponse:b}=w instanceof Me.ZR?w.customData:w;if(!b)return null;if(!(w instanceof Me.ZR)&&"temporaryProof"in b&&"phoneNumber"in b)return F.P.credentialFromResult(w);const I=b.providerId;if(!I||I===F.p.PASSWORD)return null;let P;switch(I){case F.p.GOOGLE:P=F.X;break;case F.p.FACEBOOK:P=F.W;break;case F.p.GITHUB:P=F.Y;break;case F.p.TWITTER:P=F.$;break;default:const{oauthIdToken:Y,oauthAccessToken:be,oauthTokenSecret:Ae,pendingToken:He,nonce:It}=b;return be||Ae||Y||He?He?I.startsWith("saml.")?F.aQ._create(I,He):F.N._fromParams({providerId:I,signInMethod:I,pendingToken:He,idToken:Y,accessToken:be}):new F.Z(I).credential({idToken:Y,accessToken:be,rawNonce:It}):null}return w instanceof Me.ZR?P.credentialFromError(w):P.credentialFromResult(w)}function Tn(w,b){return b.catch(I=>{throw I instanceof Me.ZR&&function cu(w,b){var I;const P=null===(I=b.customData)||void 0===I?void 0:I._tokenResponse;if("auth/multi-factor-auth-required"===b?.code)b.resolver=new Mi(w,F.as(w,b));else if(P){const Y=an(b),be=b;Y&&(be.credential=Y,be.tenantId=P.tenantId||void 0,be.email=P.email||void 0,be.phoneNumber=P.phoneNumber||void 0)}}(w,I),I}).then(I=>{const Y=I.user;return{operationType:I.operationType,credential:bn(I),additionalUserInfo:F.aq(I),user:qn.getOrCreate(Y)}})}function Wi(w,b){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,D.Z)(function*(w,b){const I=yield b;return{verificationId:I.verificationId,confirm:P=>Tn(w,I.confirm(P))}})).apply(this,arguments)}class Mi{constructor(b,I){this.resolver=I,this.auth=function Kr(w){return w.wrapped()}(b)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(b){return Tn(Nt(this.auth),this.resolver.resolveSignIn(b))}}class qn{constructor(b){this._delegate=b,this.multiFactor=F.at(b)}static getOrCreate(b){return qn.USER_MAP.has(b)||qn.USER_MAP.set(b,new qn(b)),qn.USER_MAP.get(b)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(b){return this._delegate.getIdTokenResult(b)}getIdToken(b){return this._delegate.getIdToken(b)}linkAndRetrieveDataWithCredential(b){return this.linkWithCredential(b)}linkWithCredential(b){var I=this;return(0,D.Z)(function*(){return Tn(I.auth,F.a2(I._delegate,b))})()}linkWithPhoneNumber(b,I){var P=this;return(0,D.Z)(function*(){return Wi(P.auth,F.l(P._delegate,b,I))})()}linkWithPopup(b){var I=this;return(0,D.Z)(function*(){return Tn(I.auth,F.d(I._delegate,b,nr))})()}linkWithRedirect(b){var I=this;return(0,D.Z)(function*(){return yield Pi(F.aJ(I.auth)),F.g(I._delegate,b,nr)})()}reauthenticateAndRetrieveDataWithCredential(b){return this.reauthenticateWithCredential(b)}reauthenticateWithCredential(b){var I=this;return(0,D.Z)(function*(){return Tn(I.auth,F.a3(I._delegate,b))})()}reauthenticateWithPhoneNumber(b,I){return Wi(this.auth,F.r(this._delegate,b,I))}reauthenticateWithPopup(b){return Tn(this.auth,F.e(this._delegate,b,nr))}reauthenticateWithRedirect(b){var I=this;return(0,D.Z)(function*(){return yield Pi(F.aJ(I.auth)),F.h(I._delegate,b,nr)})()}sendEmailVerification(b){return F.ag(this._delegate,b)}unlink(b){var I=this;return(0,D.Z)(function*(){return yield F.ap(I._delegate,b),I})()}updateEmail(b){return F.al(this._delegate,b)}updatePassword(b){return F.am(this._delegate,b)}updatePhoneNumber(b){return F.u(this._delegate,b)}updateProfile(b){return F.ak(this._delegate,b)}verifyBeforeUpdateEmail(b,I){return F.ah(this._delegate,b,I)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qn.USER_MAP=new WeakMap;const xn=F.aC;let hr=(()=>{class w{constructor(I,P){if(this.app=I,P.isInitialized())return this._delegate=P.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Y}=I.options;xn(Y,"invalid-api-key",{appName:I.name}),xn(Y,"invalid-api-key",{appName:I.name});const be=typeof window<"u"?nr:void 0;this._delegate=P.initialize({options:{persistence:na(Y,I.name),popupRedirectResolver:be}}),this._delegate._updateErrorMap(F.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(I){this._delegate.languageCode=I}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(I){this._delegate.tenantId=I}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(I,P){F.K(this._delegate,I,P)}applyActionCode(I){return F.a7(this._delegate,I)}checkActionCode(I){return F.a8(this._delegate,I)}confirmPasswordReset(I,P){return F.a6(this._delegate,I,P)}createUserWithEmailAndPassword(I,P){var Y=this;return(0,D.Z)(function*(){return Tn(Y._delegate,F.aa(Y._delegate,I,P))})()}fetchProvidersForEmail(I){return this.fetchSignInMethodsForEmail(I)}fetchSignInMethodsForEmail(I){return F.af(this._delegate,I)}isSignInWithEmailLink(I){return F.ad(this._delegate,I)}getRedirectResult(){var I=this;return(0,D.Z)(function*(){xn(zn(),I._delegate,"operation-not-supported-in-this-environment");const P=yield F.j(I._delegate,nr);return P?Tn(I._delegate,Promise.resolve(P)):{credential:null,user:null}})()}addFrameworkForLogging(I){!function W(w,b){(0,F.aJ)(w)._logFramework(b)}(this._delegate,I)}onAuthStateChanged(I,P,Y){const{next:be,error:Ae,complete:He}=Qr(I,P,Y);return this._delegate.onAuthStateChanged(be,Ae,He)}onIdTokenChanged(I,P,Y){const{next:be,error:Ae,complete:He}=Qr(I,P,Y);return this._delegate.onIdTokenChanged(be,Ae,He)}sendSignInLinkToEmail(I,P){return F.ac(this._delegate,I,P)}sendPasswordResetEmail(I,P){return F.a5(this._delegate,I,P||void 0)}setPersistence(I){var P=this;return(0,D.Z)(function*(){let Y;switch(function Ri(w,b){qi(Object.values(vt).includes(b),w,"invalid-persistence-type"),(0,Me.b$)()?qi(b!==vt.SESSION,w,"unsupported-persistence-type"):(0,Me.UG)()?qi(b===vt.NONE,w,"unsupported-persistence-type"):Hn()?qi(b===vt.NONE||b===vt.LOCAL&&(0,Me.hl)(),w,"unsupported-persistence-type"):qi(b===vt.NONE||sn(),w,"unsupported-persistence-type")}(P._delegate,I),I){case vt.SESSION:Y=F.a;break;case vt.LOCAL:Y=(yield F.aE(F.i)._isAvailable())?F.i:F.b;break;case vt.NONE:Y=F.U;break;default:return F.ax("argument-error",{appName:P._delegate.name})}return P._delegate.setPersistence(Y)})()}signInAndRetrieveDataWithCredential(I){return this.signInWithCredential(I)}signInAnonymously(){return Tn(this._delegate,F.a0(this._delegate))}signInWithCredential(I){return Tn(this._delegate,F.a1(this._delegate,I))}signInWithCustomToken(I){return Tn(this._delegate,F.a4(this._delegate,I))}signInWithEmailAndPassword(I,P){return Tn(this._delegate,F.ab(this._delegate,I,P))}signInWithEmailLink(I,P){return Tn(this._delegate,F.ae(this._delegate,I,P))}signInWithPhoneNumber(I,P){return Wi(this._delegate,F.s(this._delegate,I,P))}signInWithPopup(I){var P=this;return(0,D.Z)(function*(){return xn(zn(),P._delegate,"operation-not-supported-in-this-environment"),Tn(P._delegate,F.c(P._delegate,I,nr))})()}signInWithRedirect(I){var P=this;return(0,D.Z)(function*(){return xn(zn(),P._delegate,"operation-not-supported-in-this-environment"),yield Pi(P._delegate),F.f(P._delegate,I,nr)})()}updateCurrentUser(I){return this._delegate.updateCurrentUser(I)}verifyPasswordResetCode(I){return F.a9(this._delegate,I)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=vt,w})();function Qr(w,b,I){let P=w;"function"!=typeof w&&({next:P,error:b,complete:I}=w);const Y=P;return{next:Ae=>Y(Ae&&qn.getOrCreate(Ae)),error:b,complete:I}}function na(w,b){const I=function Gr(w,b){const I=Wr();if(!I)return[];const P=F.aF(Gi,w,b);switch(I.getItem(P)){case vt.NONE:return[F.U];case vt.LOCAL:return[F.i,F.a];case vt.SESSION:return[F.a];default:return[]}}(w,b);if(typeof self<"u"&&!I.includes(F.i)&&I.push(F.i),typeof window<"u")for(const P of[F.b,F.a])I.includes(P)||I.push(P);return I.includes(F.U)||I.push(F.U),I}class ko{constructor(){this.providerId="phone",this._delegate=new F.P(Nt(K.Z.auth()))}static credential(b,I){return F.P.credential(b,I)}verifyPhoneNumber(b,I){return this._delegate.verifyPhoneNumber(b,I)}unwrap(){return this._delegate}}ko.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,ko.PROVIDER_ID=F.P.PROVIDER_ID;const ps=F.aC;class Ki{constructor(b,I,P=K.Z.app()){var Y;ps(null===(Y=P.options)||void 0===Y?void 0:Y.apiKey,"invalid-api-key",{appName:P.name}),this._delegate=new F.R(P.auth(),b,I),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function S(w){w.INTERNAL.registerComponent(new wn.wA("auth-compat",b=>{const I=b.getProvider("app-compat").getImmediate(),P=b.getProvider("auth");return new hr(I,P)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.V,FacebookAuthProvider:F.W,GithubAuthProvider:F.Y,GoogleAuthProvider:F.X,OAuthProvider:F.Z,SAMLAuthProvider:F._,PhoneAuthProvider:ko,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:Ki,TwitterAuthProvider:F.$,Auth:hr,AuthCredential:F.L,Error:Me.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.5.1")}(K.Z)},861:($i,Bn,Ue)=>{function D(F,Me,bt,rn,wn,zt,_t){try{var X=F[zt](_t),le=X.value}catch(Re){return void bt(Re)}X.done?Me(le):Promise.resolve(le).then(rn,wn)}function K(F){return function(){var Me=this,bt=arguments;return new Promise(function(rn,wn){var zt=F.apply(Me,bt);function _t(le){D(zt,rn,wn,_t,X,"next",le)}function X(le){D(zt,rn,wn,_t,X,"throw",le)}_t(void 0)})}}Ue.d(Bn,{Z:()=>K})},582:($i,Bn,Ue)=>{function Me(H,q){var W={};for(var j in H)Object.prototype.hasOwnProperty.call(H,j)&&q.indexOf(j)<0&&(W[j]=H[j]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var ne=0;for(j=Object.getOwnPropertySymbols(H);ne<j.length;ne++)q.indexOf(j[ne])<0&&Object.prototype.propertyIsEnumerable.call(H,j[ne])&&(W[j[ne]]=H[j[ne]])}return W}function Re(H,q,W,j){return new(W||(W=Promise))(function(te,ge){function at(yt){try{Fe(j.next(yt))}catch(Qt){ge(Qt)}}function Ee(yt){try{Fe(j.throw(yt))}catch(Qt){ge(Qt)}}function Fe(yt){yt.done?te(yt.value):function ne(te){return te instanceof W?te:new W(function(ge){ge(te)})}(yt.value).then(at,Ee)}Fe((j=j.apply(H,q||[])).next())})}function ut(H){return this instanceof ut?(this.v=H,this):new ut(H)}function xt(H,q,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,j=W.apply(H,q||[]),te=[];return ne={},ge("next"),ge("throw"),ge("return"),ne[Symbol.asyncIterator]=function(){return this},ne;function ge(Lt){j[Lt]&&(ne[Lt]=function(sn){return new Promise(function(Hn,zn){te.push([Lt,sn,Hn,zn])>1||at(Lt,sn)})})}function at(Lt,sn){try{!function Ee(Lt){Lt.value instanceof ut?Promise.resolve(Lt.value.v).then(Fe,yt):Qt(te[0][2],Lt)}(j[Lt](sn))}catch(Hn){Qt(te[0][3],Hn)}}function Fe(Lt){at("next",Lt)}function yt(Lt){at("throw",Lt)}function Qt(Lt,sn){Lt(sn),te.shift(),te.length&&at(te[0][0],te[0][1])}}function Mn(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,q=H[Symbol.asyncIterator];return q?q.call(H):(H=function ht(H){var q="function"==typeof Symbol&&Symbol.iterator,W=q&&H[q],j=0;if(W)return W.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&j>=H.length&&(H=void 0),{value:H&&H[j++],done:!H}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),W={},j("next"),j("throw"),j("return"),W[Symbol.asyncIterator]=function(){return this},W);function j(te){W[te]=H[te]&&function(ge){return new Promise(function(at,Ee){!function ne(te,ge,at,Ee){Promise.resolve(Ee).then(function(Fe){te({value:Fe,done:at})},ge)}(at,Ee,(ge=H[te](ge)).done,ge.value)})}}}Ue.d(Bn,{FC:()=>xt,KL:()=>Mn,_T:()=>Me,mG:()=>Re,qq:()=>ut}),"function"==typeof SuppressedError&&SuppressedError}},$i=>{$i($i.s=179)}]);